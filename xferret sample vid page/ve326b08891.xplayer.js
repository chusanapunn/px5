!function(){var e={93752:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function a(e,t,i=5){if(!e)throw TypeError("Element must be set");if(e.get&&(e=e.get(0)),"function"!=typeof t)throw TypeError("Check must be a function");"number"!=typeof i&&(i=5);let n=0,s=e;for(;s&&n++<i&&s!==document.body;){if(t(s))return s;s=s.parentElement}return!1}i.d(t,{Z:function(){return n_}}),i(88972);var l,h,c={css(e,t,i){if(!e)throw TypeError("Element not specified");if(!t||"string"!=typeof t&&"object"!=typeof t)throw TypeError("Style must be a string or an object");if(void 0===i&&"string"==typeof t)return(e.style[t]||window.getComputedStyle(e)).getPropertyValue(t);let n=(e,t,i)=>{if(!1===i)return e.style.removeProperty(t);"number"==typeof i&&-1==="zoom,opacity,z-index".indexOf(t)&&(i+="px"),e.style.setProperty(t,i)};if("string"==typeof t)n(e,t,i);else for(let i in t)t.hasOwnProperty(i)&&n(e,i,t[i])},findElPosition(e){let t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0,bottom:e.offsetHeight,right:e.offsetWidth};let i=document.documentElement,n=document.body,s=i.clientLeft||n.clientLeft||0,r=window.pageXOffset||n.scrollLeft,o=t.left+r-s,a=i.clientTop||n.clientTop||0,l=window.pageYOffset||n.scrollTop;return{left:Math.round(o),top:Math.round(t.top+l-a),width:Math.round(e.offsetWidth),height:Math.round(e.offsetHeight)}},addClass(e,t){let i=e.className?e.className.split(" "):[];for(let e=0;e<i.length;e++)if(i[e]==t)return;i.push(t),e.className=i.join(" ")},hasClass:(e,t)=>` ${e.className} `.indexOf(` ${t} `)>-1,removeClass(e,t){let i=e.className.split(" ");for(let e=0;e<i.length;e++)i[e]==t&&(i.splice(e,1),e--);e.className=i.join(" ")},getScript:e=>new Promise((t,i)=>{let n=document.createElement("script");n.type="text/javascript",n.src=e,n.defer=!0,n.onload=t,n.onerror=i,document.body.appendChild(n)}),isElement(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},checkTransformVendor(){let e=document.createElement("div");if(null==e.style.transform){let t=["Webkit","Moz","ms"];for(let i in t)if(void 0!==e.style[`${t[i]}Transform`])return`${t[i]}Transform`}return"transform"},hasParentByData:(e,t,i=5)=>a(e,e=>!!e.hasAttribute(`data-${t}`),i),hasParentByTag:(e,t,i=5)=>a(e,e=>e.tagName.toLowerCase()===t.toLowerCase(),i),hasParent:(e,t,i=5)=>a(e,e=>e===t,i),removeElement(e){e.parentNode&&e.parentNode.removeChild(e)}};let u=/(:?(\?|&)t=)([0-9]+\.[0-9]{1,2})/;var d={OFFSET_REGEX:u,parseTime(e,t){let i=parseInt(e,10),n=Math.floor(i/3600)||0,s=Math.floor((i-3600*n)/60)||0,r=i-3600*n-60*s||0;return n<10&&(n=`0${n}`),s<10&&(s=`0${s}`),r<10&&(r=`0${r}`),`${(t?`${n}:`:"")+s}:${r}`},parseTimeOffset(){let e=u.exec(window.location.href);return!!e&&e[3]},stringToSeconds:e=>e.split(":").reduce((e,t)=>60*e+parseInt(t,10))},m=i(72253),p=i(14932);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function _(e,t){if(e){if("string"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(e,t)}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i,n,s=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=s){var r=[],o=!0,a=!1;try{for(s=s.call(e);!(o=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw n}}return r}}(e,t)||_(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=i(90874),g=["USER_ACTION_BLOCK","USER_ACTION_UNBLOCK","USER_ACTION","NO_USER_ACTION","USER_ACTION_PAUSE","USER_ACTION_UNPAUSE","PLAYER_ON_TIMEUPDATE"];let y=new(o(function e(t){s(this,e),this.events={},this.eventId=0,this.debug=t||!1},[{key:"on",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)throw Error("Dispatcher: no event name passed");if("number"!=typeof e)throw TypeError("Dispatcher: event name should be a number");if(!t)throw Error("Dispatcher: no callback passed");if("function"!=typeof t)throw Error("Dispatcher: callback not a function");return -1!==Object.keys(this.events).indexOf("".concat(e))||(this.events[e]={}),this.eventId++,this.events[e][this.eventId]={callback:t,context:i,once:s,extraData:n},this.eventId}},{key:"once",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.on(e,t,i,n,!0)}},{key:"offAllEvents",value:function(){this.events={}}},{key:"offMany",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(function(t){var i,n=v(t,2),s=n[0],r=n[1],o=null===(i=e.events)||void 0===i||null===(i=i[s])||void 0===i?void 0:i[r];o&&(e.debug&&console.info("Event listener unbound: ",s,r,o),delete e.events[s][r])})}},{key:"off",value:function(e,t){if(!e||!t){console.warn("Dispatcher: incorrect event name or eventId passed");return}var i=this.events[e];i&&i[t]&&delete i[t]}},{key:"logEmittedEvent",value:function(e,t){if(this.debug){var i=Object.keys(f.Z)[Object.values(f.Z).indexOf(e)];if(-1===g.indexOf(i))try{throw Error()}catch(e){var n=e.stack;console.info("Event emitted: ".concat(i),t,n)}}}},{key:"deleteEvent",value:function(e,t){try{delete this.events[e][t]}catch(e){}}},{key:"emit",value:function(e){for(var t=this,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];this.logEmittedEvent(e,n);var r=this.events[e];r&&Object.keys(r).length&&Object.keys(r).forEach(function(i){var s=Number(i);if(!Number.isNaN(s)){var o=r[s];if(o){if(!o.context){t.deleteEvent(e,s);return}o.extraData&&n.push(o.extraData),o.once&&t.deleteEvent(e,s),o.callback.apply(o.context,n)}}})}}]));var S=class{init(){window.WebKitPlaybackTargetAvailabilityEvent&&this.attachEvents()}onAirplayWirelessChanged(){var e;y.emit(f.Z.PLAYER_WIRELESS_CHANGED),"auto"!==this.core.sourceController.getCurrentQuality()&&-1!==this.core.sourceController.getQualities().indexOf("auto")&&(null===(e=this.core.videoElement)||void 0===e?void 0:e.webkitCurrentPlaybackTargetIsWireless)&&(y.emit(f.Z.PLAYER_SET_SOURCE,"auto"),y.emit(f.Z.SETTINGS_RENDER_QUALITY))}attachEvents(){this.core.videoElement.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.onAirplayWirelessChanged.bind(this))}constructor(e){this.core=e,this.init()}};let b={hls:"application/vnd.apple.mpegurl",dash:"application/dash+xml",h264:'video/mp4; codecs="avc1.640029"',vp9:'video/webm; codecs="vp9, opus"',h265:'video/mp4; codecs="hvc1"',av1:'video/mp4; codecs="av01.0.00M.08"'};var T=class{defaultCapabilities(){return{videoElementSupported:!1,hlsJs:!1,dashJs:!1,dashJsVp9:!1,hls:!1,dash:!1,h264:!0,h265:!1,vp9:!1,av1:!1,android:!1,idevice:!1,mobile:!1,ipad:!1,iphone:!1,touch:!1,gyroscope:!1,console:!1,ie:!1,safari:!1,chrome:!1,chromeIos:!1,firefox:!1,samsung:!1,fullscreen:!1,volumeControl:!1,mobilePlayer2:!1}}init(){this.detectCapabilities()}detectCapabilities(){this.checkIsMobile(),this.checkIsConsole(),this.checkIsIE(),this.checkBrowser(),this.checkHlsJs(),this.checkDashJs(),this.checkSupportedFormatsAndVolumeControl(),this.checkTouchScreen(),this.checkFullscreen()}getMediaSource(){return"undefined"!=typeof window?window.MediaSource||window.WebKitMediaSource:null}checkMediaSource(e){let t=this.getMediaSource(),i=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported(e),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!n&&!!s}checkHlsJs(){this.capabilities.hlsJs=this.checkMediaSource(b.h264)}checkDashJs(){this.capabilities.dashJs=this.checkMediaSource(b.h264),this.capabilities.dashJsVp9=this.checkMediaSource(b.vp9)}checkSupportedFormatsAndVolumeControl(){try{let t=document.createElement("video"),i=t.muted;if(t.muted=!t.muted,this.capabilities.volumeControl=i!==t.muted,!t.canPlayType)return;let n=["hls","h265","dash","h264"];for(let i in b){if("h264"===i)continue;let s=["probably"];n.includes(i)&&s.push("maybe");let r=!!this.capabilities.idevice&&this.capabilities.idevice<11;if("h265"===i&&(r||this.capabilities.console)){this.capabilities[i]=!1;continue}let o=b[i],a=t.canPlayType(o),l=s.includes(a);if(l)this.capabilities[i]=l;else{var e;this.capabilities[i]=!!(null===(e=this.getMediaSource())||void 0===e?void 0:e.isTypeSupported(o))}}}catch(e){}}checkIsMobile(){try{if(/iP(hone|od|ad)/.test(navigator.appVersion)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1){(/iPhone/.test(navigator.appVersion)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.capabilities.iphone=!0),(/iPad/.test(navigator.appVersion)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(this.capabilities.ipad=!0),this.capabilities.mobile=!0,this.capabilities.idevice=parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],10);return}let e=`${navigator.userAgent.toLowerCase()}`.match(/android\s([0-9.]*)/);e&&2===e.length&&(this.capabilities.android=parseFloat(e[1]),this.capabilities.mobile=!0)}catch(e){}}checkTouchScreen(){this.capabilities.touch="ontouchstart"in window||navigator.msMaxTouchPoints||navigator.maxTouchPoints>1}checkIsConsole(){try{(navigator.userAgent.match(/playstation/i)||navigator.userAgent.match(/xbox/i)||navigator.userAgent.match(/wii/i)||navigator.userAgent.match(/psvita/i))&&(this.capabilities.console=!0)}catch(e){}}checkIsIE(){try{let e;this.capabilities.ie=(e=navigator.userAgent.match(/(?:MSIE |Edge\/*|Trident\/.*; rv:)(\d+)/))?parseInt(e[1],10):null}catch(e){}}checkFullscreen(){this.capabilities.fullscreen=!0===document.fullscreenEnabled||!0===document.webkitFullscreenEnabled||!0===document.mozFullScreenEnabled||!0===document.msFullscreenEnabled||this.capabilities.idevice&&!this.core.isVr||"number"==typeof this.capabilities.ie&&this.capabilities.ie<11}checkBrowser(){try{let e=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),t=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&"Win32"!==navigator.platform,i=/Firefox\//.test(navigator.userAgent),n=/SamsungBrowser\//.test(navigator.userAgent),s=/Safari/.test(navigator.userAgent)&&"Win32"!==navigator.platform&&/CriOS/.test(navigator.userAgent);this.capabilities.firefox=i,this.capabilities.chrome=e,this.capabilities.chromeIos=s,this.capabilities.safari=t,this.capabilities.samsung=n}catch(e){}}checkGyroscope(e){"ondevicemotion"in window||(this.capabilities.gyroscope=!1);let t=i=>{(i.rotationRate.alpha||i.rotationRate.beta||i.rotationRate.gamma)&&(this.capabilities.gyroscope=!0,e()),window.removeEventListener("devicemotion",t)};if("function"==typeof DeviceOrientationEvent){if("function"!=typeof DeviceOrientationEvent.requestPermission){window.addEventListener("devicemotion",t);return}DeviceOrientationEvent.requestPermission().then(t=>("granted"===t&&(this.capabilities.gyroscope=!0,e()),t)).catch(()=>{let t=()=>{this.checkGyroscope(e),this.core.element.removeEventListener("click",t.bind(this))};this.core.element.addEventListener("click",t.bind(this))})}}constructor(e){this.core=e,this.capabilities=this.defaultCapabilities(),this.init()}};class A{static ajax(e,t,i=!1,n={}){let s=new("onload"in new XMLHttpRequest?XMLHttpRequest:window.XDomainRequest),r,o="{}";if(!n.clean&&i){if("GET"===e)r=A.serializeQuery(i),t+=`${(t.includes("?")?"&":"?")+r}&_=${Math.random()}`;else try{o=JSON.stringify(i)}catch(e){o="{error: stringify error}"}}n.no_cache&&(t+=`${(t.includes("?")?"&":"?")+r}&_=${Math.random()}`),s.open(e,t,!n.sync),n.fetch||n.clean||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.clean||(s.withCredentials=!1!==n.credentials,s.aborting=!1),n.contentType&&s.setRequestHeader("Content-Type",n.contentType);let a=new Promise((e,t)=>{s.onreadystatechange=function(){if(2===this.readyState&&n.headersReceivedCallback&&"function"==typeof n.headersReceivedCallback&&n.headersReceivedCallback(),4===this.readyState){if(200!==this.status){t({statusText:s.aborting?"abort":s.statusText,status:s.status,responseJSON:s.responseText,responseURL:s.responseURL,headers:s.getAllResponseHeaders()});return}e(n.clean?s:s.responseText)}}});return a.abort=function(){s.aborting=!0,s.abort()},s.send(o),a}static getHeadRedirect(e,t=!1){return A.ajax("HEAD",e,!1,{sync:t,clean:!0})}static serializeQuery(e){let t=[];for(let i in e)e.hasOwnProperty(i)&&t.push(`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`);return t.join("&")}static sendBeacon(e,t=null){let i="";if(t)try{i=JSON.stringify(t)}catch(e){return Promise.reject()}if(navigator.sendBeacon)return navigator.sendBeacon(e,i),Promise.resolve();let n="GET",s={async:!1};return i.length>0&&(n="POST",s.raw=!0),A.ajax(n,e,i,!1,s)}}var L={IO_ERROR:"IO_ERROR",PLAYER_ERROR:"PLAYER_ERROR",SOURCE_ERROR:"SOURCE_ERROR",SCRIPT_ERROR:"SCRIPT_ERROR",FALLBACK_ERROR:"FALLBACK_ERROR",FALLBACK_INIT:"FALLBACK_INIT",INIT_ERROR:"INIT_ERROR",NETWORK_ERROR:"NETWORK_ERROR"};let k={},C=new class{log(e,t,i,n){let s={component:t,message:i,stack:Error().stack};s=(0,m._)({},n,s),this.errorLog.push(s),window.Raven&&window.Raven.captureMessage(`XPlayer-${e}`,{extra:s}),this.debug&&console.error(s)}send(e,t){if(e=k[e]){try{t=JSON.stringify(t)}catch(e){t="{'error': 'stringify error'}"}A.ajax("GET",`/statistics?key=${e}&data=${t}`)}}constructor(){this.debug=!1,this.errorLog=[],this.TYPES=L}};var R=new class{getDefaultStates(){return{ads:!1,ads_playing:!1,ads_preload:!1,error:!1,playing:!1,ended:!1,duration:0,sourceLoaded:!1,remoteSourceLoading:!1,chromecast:!1,currentTime:!1,savedCurrentTime:!1,playbackRate:1,swiping:!1,fullscreen:!1,seeking:!1,orientation:null}}init(){y.on(f.Z.ADS_STARTED,this.setAds.bind(this)),y.on(f.Z.ADS_ENDED,this.clearAds.bind(this)),y.on(f.Z.PLAYER_ON_PLAY,this.set.bind(this,"playing",!0)),y.on(f.Z.PLAYER_ON_PLAYING,this.set.bind(this,"playing",!0)),y.on(f.Z.PLAYER_ON_PAUSE,this.set.bind(this,"playing",!1)),y.on(f.Z.PLAYER_ON_ENDED,this.set.bind(this,"playing",!1)),y.on(f.Z.PLAYER_ON_SWIPE_START,this.set.bind(this,"swiping",!0)),y.on(f.Z.PLAYER_ON_SWIPE_SEEK_END,this.set.bind(this,"swiping",!1)),y.on(f.Z.PLAYER_ON_ENDED,this.set.bind(this,"ended",!0)),y.on(f.Z.PLAYER_ON_PLAY,this.set.bind(this,"ended",!1)),y.on(f.Z.PLAYER_ON_PLAYING,this.set.bind(this,"ended",!1)),y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.onTimeupdate,this),y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.onDurationChange,this),y.on(f.Z.PLAYER_ON_RATECHANGE,this.onRateChange,this),y.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.onSetPlaybackRate,this),y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.toggleFullscreen,this)}toggleFullscreen(){this.set("fullscreen",!this.get("fullscreen"))}onDurationChange(e){this.set("duration",e.target.duration)}onSetPlaybackRate(e){this.set("playbackRate",parseFloat(e))}onRateChange(e){this.set("playbackRate",parseFloat(e.target.playbackRate))}onTimeupdate(e){this.states.chromecast||this.set("currentTime",e.target.currentTime)}set(e,t){this.states[e]=t}setAds(){this.set("ads_playing",!0),this.set("ads_preload",!1)}clearAds(){this.set("ads",!1),this.set("ads_playing",!1),this.set("ads_preload",!1)}get(e){return this.states.hasOwnProperty(e)?this.states[e]:null}constructor(){this.states=this.getDefaultStates(),this.init()}},O={ABORTED:1,NETWORK:2,DECODER:3,SOURCE:4},P={1:O.ABORTED,2:O.NETWORK,3:O.DECODER,4:O.SOURCE},w={[O.ABORTED]:"Aborted error",[O.NETWORK]:"Network error",[O.DECODER]:"Decoder error",[O.SOURCE]:"Source error"};let N="xplayer-error",I="xh-helper-hidden";var D=class{init(){this.render(),this.attachEvents()}render(){this.errorElement=document.createElement("div"),this.errorElement.className="xplayer-error",c.addClass(this.errorElement,I),this.core.element.appendChild(this.errorElement)}attachEvents(){this.core.on(f.Z.PLAYER_ON_ERROR,this.processPlayerErrorEvent,this),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE_FAIL,this.processErrorType.bind(this,O.SOURCE,!0)),this.core.on(f.Z.PLAYER_ERROR_CONTROLLER_BLOCK,this.onErrorServiceBlock,this),this.core.on(f.Z.PLAYER_ERROR_CONTROLLER_UNBLOCK,this.onErrorServiceUnblock,this),this.core.on(f.Z.PLAYER_ON_PLAYING,this.hideError,this),this.errorElement.addEventListener("click",this.onErrorElementClick.bind(this))}onErrorElementClick(e){"reload-page"===e.target.className&&this.reloadPage()}onErrorServiceBlock(){this.blocked=!0}onErrorServiceUnblock(){this.blocked=!1}processPlayerErrorEvent(e){if(this.blocked)return;let t=P[e&&e.target&&e.target.error&&e.target.error.code];if(!t){this.checkPosterError();return}this.processErrorType(t)}processErrorType(e,t){let i=w[e];if(R.set("error",!0),C.log(`${C.TYPES.PLAYER_ERROR}-${e}`,"PlayerErrorService",i,{sourceCore:this.core.sourceController.getSourceUrl(),sourceVideo:this.core.videoElement.src,quality:this.core.sourceController.getCurrentQuality(),settings:this.core.settings,currentTimeCore:R.get("currentTime"),currentTimeVideo:this.core.videoElement.currentTime,readyStateVideo:this.core.videoElement.readyState}),e!==O.ABORTED){if(e===O.DECODER){this.processDecoderError();return}if(e===O.SOURCE&&!t){this.processSourceError();return}this.showError(i)}}processDecoderError(){if("hls"===this.core.sourceController.type&&"auto"===this.core.sourceController.getCurrentQuality()){this.core.emit(f.Z.PLAYER_FALLBACK_SOURCE);return}let e=R.get("currentTime");C.send("decoder",{quality:this.core.sourceController.getCurrentQuality(),currentTime:e,videoId:this.core.options.videoId}),this.core.emit(f.Z.PAUSE_ACTION_BLOCK),this.core.emit(f.Z.PLAYER_ON_DECODER_ERROR),this.core.setVideoSource(),this.core.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{this.core.emit(f.Z.PAUSE_ACTION_UNBLOCK),this.core.emit(f.Z.PLAYER_SET_CURRENT_TIME,e+5),this.core.once(f.Z.PLAYER_ON_SEEKED,()=>{this.core.emit(f.Z.PLAYER_PLAY)})})}processSourceError(){C.send("source",{sourceUrl:this.core.sourceController.getSourceUrl()}),this.core.emit(f.Z.PLAYER_FALLBACK_SOURCE)}checkPosterError(){let e=this.core.options.poster;if(!e){C.log(`${C.TYPES.PLAYER_ERROR}-POSTER`,"PlayerErrorService","no poster passed",{posterURL:e,videoId:this.core.options.videoId});return}this.checkImageAvailable(e)}checkImageAvailable(e){let t=new Image;t.onload=this.processUndefinedError.bind(this),t.onerror=this.processPosterNotAvailable.bind(this,e),t.src=e}processUndefinedError(){C.log(`${C.TYPES.PLAYER_ERROR}-UNDEFINED`,"PlayerErrorService","error code undefined",{source:this.core&&this.core.videoElement&&this.core.videoElement.src||null,currentTime:this.core&&R.get("currentTime")||null,settings:this.core&&this.core.settings||null,readyStateVideo:this.core&&this.core.videoElement&&this.core.videoElement.readyState||null})}processPosterNotAvailable(e){C.log(`${C.TYPES.PLAYER_ERROR}-POSTER`,"PlayerErrorService","poster not available",{posterURL:e,videoId:this.core.options.videoId})}reloadPage(){let e=-1===window.location.href.indexOf("?")?"?":"&",t=d.OFFSET_REGEX.test(window.location.href)?window.location.href.replace(d.OFFSET_REGEX,"$10.1"):`${window.location.href+e}t=0.1`;window.location.href=t}showError(e){let t=`<div class="error-wrapper">
                    <span class="error-message">${e}</span><br><span class="reload-page">Reload</span>
                </div>`;this.errorElement.innerHTML=t,c.removeClass(this.errorElement,I),c.addClass(this.core.element,N),this.core.emit(f.Z.USER_ACTION)}hideError(){R.set("error",!1),c.addClass(this.errorElement,I),c.removeClass(this.core.element,N)}hasError(){return R.get("error")}constructor(e){this.core=e,R.set("error",!1),this.blocked=!1,this.init()}},U=class{defaultOptions(){return{fallbackImageClass:"xplayer-fallback-image"}}init(){this.core&&this.core.on(f.Z.FALLBACK_TO_IMAGE,this.showFallbackImage,this)}showFallbackImage(){let e=document.getElementsByClassName(this.options.fallbackImageClass)[0];if(this.removePlayerElement(),this.destroyPlayerCore(),!e){C.log(C.TYPES.FALLBACK_ERROR,"FallbackService","FALLBACK_TO_IMAGE_ERROR",{fallbackImageClass:this.options.fallbackImageClass});return}c.removeClass(e,"xh-helper-hidden")}removePlayerElement(){this.core&&this.core.element&&this.core.element.parentNode&&this.core.element.parentNode.removeChild(this.core.element)}destroyPlayerCore(){this.core&&this.core.offAllEvents(),this.core=null}fallbackImage(){this.showFallbackImage()}constructor(e,t,i){this.core=t,this.options=(0,m._)({},this.defaultOptions(),i||{}),this.init()}};let M={hls:function(e,t){var i;return!t.safari&&!!t.hlsJs&&((null==e?void 0:e.av1)&&!t.av1&&delete e.av1,(null==e?void 0:e.h264)&&!t.h264&&delete e.h264,!!(null===(i=Object.keys(e))||void 0===i?void 0:i.length))},dash:function(e,t){return!t.safari&&!!t.dashJs&&!!e&&(e.url=[],e.vp9&&t.dashJsVp9&&e.url.push(e.vp9),e.h264&&e.url.push(e.h264),!!e.url.length)},standard:function(e,t){for(let i in e){if(!e.hasOwnProperty(i))continue;if(!t[i]||"[object Array]"!==Object.prototype.toString.call(e[i])){delete e[i];continue}let n=[];e[i]=e[i].filter(e=>"[object Object]"===Object.prototype.toString.call(e)&&!!e.url&&!!e.quality&&-1===n.indexOf(e.quality)&&("auto"!==e.quality||!!t.hls)&&(n.push(e.quality),e.label||(e.label=`${e.quality}`),!0)),e[i].length||delete e[i]}return!!Object.keys(e).length}};var Y=function(e,t){if(!e||"object"!=typeof e)return null;let i=(0,m._)({},e);for(let e in i)if(i.hasOwnProperty(e)){if(!M.hasOwnProperty(e)){delete i[e];continue}M[e](i[e],t)||delete i[e]}return Object.keys(i).length?i:null},x=i(11010);function Z(e){return -1!==e.indexOf("cdn13")?"zil":-1!==e.indexOf("lvlt")||-1!==e.indexOf("lmn")||-1!==e.indexOf("lmo")?"l3":-1!==e.indexOf("xhcdn")||-1!==e.indexOf("ahcdn")?"adv":"undefined"}var B=class{getDefaultOptions(){return{initialVideoQuality:!1,getSourceAfterRedirect:!1,disableSourceFallback:!1}}init(){console.error("SourceController abstract method")}getCurrentQuality(){console.error("SourceController abstract method")}getQualities(){console.error("SourceController abstract method")}getLabelFromQuality(){console.error("SourceController abstract method")}getSourceUrl(){console.error("SourceController abstract method")}getCDN(){console.error("SourceController abstract method")}getType(){console.error("SourceController abstract method")}prepareTimeupdate(){console.error("SourceController abstract method")}changeQuality(){console.error("SourceController abstract method")}attachSource(){console.error("SourceController abstract method")}fallbackSource(){console.error("SourceController abstract method")}destroy(){console.error("SourceController abstract method")}constructor(e,t){this.options=(0,m._)({},this.getDefaultOptions(),t)}};class G extends B{getCurrentQuality(){return this.currentQuality}getQualities(){return this.qualities}getChromecastUrl(){return this.getSourceUrl()}getLabelFromQuality(e=this.currentQuality){return this.getSourceFromQuality(e).label}getHasAv1Source(){return!1}getSource(){return this.getSourceFromQuality(this.currentQuality)}getSourceUrl(e=this.currentQuality){return this.getSourceFromQuality(e).url&&this.getSourceFromQuality(e).url[0]||(C.log(C.TYPES.SOURCE_ERROR,"SourceService",`No url ${this.currentQuality} quality found`,{options:this.options,sources:this.sources,quality:this.currentQuality,qualities:this.qualities}),null)}getCDN(){return Z(this.getSourceUrl())}getType(e=this.currentQuality){return this.getSourceFromQuality(e).type||""}init(){var e=this;return(0,x._)(function*(){e.sources=yield e.getSources(e.sources),e.qualities=e.getLevelsQualities(),e.setQuality(e.options.initialVideoQuality),e.ready=!0,y.emit(f.Z.SOURCE_CONTROLLER_READY)})()}getSources(e){return new Promise(t=>{let i={},n=[];for(let t in e)e[t].forEach(e=>{i[e.quality]||(i[e.quality]=e),this.options.getSourceAfterRedirect?n.push(this.fillSourceUrlsAfterRedirect(i,e)):this.fillSourceUrls(i,e)});0!==n.length?Promise.all(n).then(()=>t(i)):t(i)})}fillSourceUrls(e,t){Array.isArray(e[t.quality].url)?e[t.quality].url.push(t.url):e[t.quality].url=[t.url],t.fallback&&e[t.quality].url.push(t.fallback)}fillSourceUrlsAfterRedirect(e,t){return new Promise(i=>{G.getSourceAfterRedirect(t.url).then(i=>{Array.isArray(e[t.quality].url)?e[t.quality].url.push(i):e[t.quality].url=[i]}).catch(()=>{e[t.quality].url=[]}).then(()=>t.fallback?G.getSourceAfterRedirect(t.fallback):null).then(i=>{i&&e[t.quality].url.push(i)}).then(i).catch(i)})}getLevelsQualities(){let e=Object.keys(this.sources).sort((e,t)=>"auto"===e?-1:parseInt(t,10)-parseInt(e,10));return e.length||C.log(C.TYPES.SOURCE_ERROR,"SourceService","No quality provided",{options:this.options,sources:this.sources,quality:this.currentQuality,qualities:this.qualities}),e}setQuality(e){return e||(e=this.currentQuality),0>this.qualities.indexOf(e)&&(e=this.qualities[0]),this.currentQuality=e,this.currentQuality}getSourceFromQuality(e){return this.sources[e]||{}}attachSource(e){e.src=this.getSourceUrl(),e.load(),R.set("sourceLoaded",!0)}changeQuality(e,t,i){return this.ready?(y.emit(f.Z.PLAYER_BEFORE_SET_SOURCE),t=this.setQuality(t),i||this.attachSource(e),t):(y.once(f.Z.SOURCE_CONTROLLER_READY,this.changeQuality,this,e,t,i),null)}prepareTimeupdate(e,t=!1,i=!1){let n=!1===t?R.get("currentTime"):t;y.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{y.emit(f.Z.PLAYER_SET_CURRENT_TIME,n),y.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{!1===e?(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE)):!0===e||R.get("playing")||R.get("error")?(y.emit(f.Z.PLAYER_PLAY,i),i&&(y.emit(f.Z.PLAYER_ON_SEEKED),y.emit(f.Z.PLAYER_SET_CURRENT_TIME,n))):(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE))})})}fallbackSource(){if(this.options.disableSourceFallback)return this.destroy(),!1;let e=this.getSourceFromQuality(this.currentQuality);return e.url.splice(0,1),!!e.url.length||((this.qualities.splice(this.qualities.indexOf(this.currentQuality),1),this.qualities.length)?(this.setQuality(),!0):(this.destroy(),!1))}destroy(){this.destroyed=!0,this.ready=!1,R.set("sourceLoaded",!1)}static getSourceAfterRedirect(e){return new Promise((t,i)=>{A.getHeadRedirect(e).then(e=>{if(!e.responseURL){i();return}t(e.responseURL)}).catch(()=>i())})}constructor(e,t={}){if(super(e,t),!e||!e.standard){this.destroy();return}this.sources=e.standard,this.qualities=null,this.currentQuality=null,this.type="standard",this.ready=!1}}var V=class{init(e){"session"===e&&this.checkSessionStorage(),"cookie"!==e&&this.checkLocalStorage(),this.checkCookie()}checkLocalStorage(){try{window.localStorage.setItem("check",1),window.localStorage.getItem("check"),window.localStorage.removeItem("check"),this.localStorageAvailable=!0}catch(e){}}checkSessionStorage(){try{window.sessionStorage.setItem("check",1),window.sessionStorage.getItem("check"),window.sessionStorage.removeItem("check"),this.sessionStorageAvailable=!0}catch(e){}}checkCookie(){try{let e=` ${document.cookie}`;this.cookieAvailable=!!e}catch(e){}}getCookie(e){let t=` ${document.cookie}`,i=` ${e}=`,n=null,s=0,r=0;return t.length>0&&-1!==(s=t.indexOf(i))&&(s+=i.length,-1===(r=t.indexOf(";",s))&&(r=t.length),n=unescape(t.substring(s,r))),n}setCookie(e,t,i){let n;let s=new Date;if(s.setTime(s.getTime()+6e4*i),n=`${e}=${t}; expires=${s.toGMTString()}; path=/;`,document.domain.length){let e=document.domain.replace(/^(www\.)/,"").split(".");for(;e.length>2;)e.shift();n+=`domain=${e.join(".").replace(/(^\.*)|(\.*$)/g,"")};`}document.cookie=n}setItem(e,t,i=8760){return this.sessionStorageAvailable?window.sessionStorage.setItem(e,t):this.localStorageAvailable?window.localStorage.setItem(e,t):(this.cookieAvailable&&this.setCookie(e,t,i),null)}getItem(e){return this.sessionStorageAvailable?window.sessionStorage.getItem(e):this.localStorageAvailable?window.localStorage.getItem(e):this.cookieAvailable?this.getCookie(e):null}constructor(e){this.localStorageAvailable=!1,this.cookieAvailable=!1,this.sessionStorageAvailable=!1,this.init(e)}};let H="auto";var F=class extends B{getChromecastUrl(){return this.chromecastSource}getHasAv1Source(){return this.hasAv1Source}getCurrentQuality(){return!!this.ready&&(this.hls.autoLevelEnabled?"auto":this.getQuality(this.hls.currentLevel))}getQualities(){return this.qualities}getLabelFromQuality(e=this.getCurrentQuality()){return e}getSourceUrl(){let e;if(!this.attached)return this.hlsSource;try{e=this.hls.streamController.levels[this.hls.streamController.level].url[0]}catch(t){e=this.hls.url}return e}getCDN(){return Z(this.getSourceUrl())}getType(e=this.getCurrentQuality()){let t;return"auto"===e&&(e=this.getQuality(-1)),parseInt(e,10)>2e3?t="FK":parseInt(e,10)>719&&(t="HD"),t}init(){this.destroyed||(this.storage=new V("session"),c.getScript(this.config.libSrc).then(()=>{if(!window.Hls){y.emit(f.Z.PLAYER_FALLBACK_SOURCE,!0),this.destroy();return}y.emit(f.Z.HLS_LOADED),this.loaded=!0,this.initHLS(),this.attachEvents(),this.getHlsQualities()}).catch(()=>{y.emit(f.Z.PLAYER_FALLBACK_SOURCE,!0),this.destroy()}))}initHLS(){this.config=(0,m._)({},window.Hls.DefaultConfig,this.getStartLevelConfig(),this.config||{}),this.hls=new window.Hls(this.config)}getStartLevelConfig(){var e;let t=null!==(e=this.storage.getItem("x-player-previous-auto-level"))&&void 0!==e?e:0;return{startLevel:t,testBandwidth:!t}}attachEvents(){this.hls.on(window.Hls.Events.ERROR,(e,t)=>{y.emit(f.Z.SOURCE_CONTROLLER_ON_ERROR,this.type,t),t.fatal&&y.emit(f.Z.PLAYER_FALLBACK_SOURCE)}),this.hls.on(window.Hls.Events.MEDIA_ATTACHED,()=>{this.attached=!0}),this.hls.on(window.Hls.Events.LEVEL_SWITCHED,(e,t)=>{y.emit(f.Z.SOURCE_TYPE_CHANGE),y.emit(f.Z.SETTINGS_RENDER_QUALITY),this.getHlsPreviousAutoLevel(t)})}getHlsPreviousAutoLevel(e){if(!this.hls.autoLevelEnabled)return;let{level:t}=e;try{t=JSON.stringify(t),this.storage.setItem("x-player-previous-auto-level",t)}catch(e){console.error(e)}}getHlsQualities(){this.hls.loadSource(this.hlsSource),this.hls.on(window.Hls.Events.MANIFEST_PARSED,(e,t)=>{if(this.qualities=this.getLevelsQualities(t.levels),!this.qualities||this.qualities.length<2){y.emit(f.Z.PLAYER_FALLBACK_SOURCE,!0);return}this.ready=!0,this.setQuality(this.options.initialVideoQuality),y.emit(f.Z.SOURCE_CONTROLLER_READY),y.emit(f.Z.SOURCE_TYPE_CHANGE)})}getQualityName(e){return e&&e.height?e.height>e.width?`${e.width}p`:`${e.height}p`:H}getLevelsQualities(e){let t=null;try{t=(t=["auto"]).concat(e.map(e=>this.getQualityName(e)).sort((e,t)=>parseInt(t,10)-parseInt(e,10)))}catch(e){}return t}setQuality(e){if(!this.loaded){y.once(f.Z.HLS_LOADED,this.setQuality.bind(this,e));return}if(!this.ready){this.hls.on(window.Hls.Events.MANIFEST_PARSED,()=>{this.setQuality(e),this.ready=!0,y.emit(f.Z.SOURCE_CONTROLLER_READY)});return}if(e||(e=this.getCurrentQuality()),e===H){this.hls.loadLevel=-1;return}this.hls.levels.forEach((t,i)=>{this.getQualityName(t)===e&&(this.hls.currentLevel=i,this.attached&&y.emit(f.Z.SHOW_LOADER))})}attachSource(e){if(!this.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.attachSource.bind(this,e));return}this.hls.attachMedia(e),R.set("sourceLoaded",!0)}changeQuality(e,t,i){!R.get("ads_playing")&&R.get("sourceLoaded")||i||this.attachSource(e),y.emit(f.Z.PAUSE_ACTION_BLOCK),this.setQuality(t),this.playAfterSet&&(y.emit(f.Z.PLAYER_PLAY),this.playAfterSet=!1),y.once(f.Z.PLAYER_ON_PLAYING,()=>y.emit(f.Z.PAUSE_ACTION_UNBLOCK))}getQuality(e){return -1===e&&(e=this.hls.loadLevel),this.getQualityName(this.hls.levels[e])}prepareTimeupdate(e,t=!1){this.playAfterSet=e&&!R.get("playing");let i=!1===t?R.get("currentTime"):t;y.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{y.emit(f.Z.PLAYER_SET_CURRENT_TIME,i),y.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{!1===e?(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE)):!0===e||R.get("playing")||R.get("error")?y.emit(f.Z.PLAYER_PLAY):(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_PAUSE))})})}fallbackSource(){return this.destroy(),!1}destroy(){this.hls&&this.hls.destroy(),this.ready=!1,this.destroyed=!0,R.set("sourceLoaded",!1)}constructor(e,t={}){var i,n,s,r,o,a,l,h,c,u;super(e,t),this.options=t,this.config=(0,m._)({},t.hlsConfig||{}),this.chromecastSource=null==e?void 0:null===(n=e.hls)||void 0===n?void 0:null===(i=n.h264)||void 0===i?void 0:i.url;let d=null===(r=this.options)||void 0===r?void 0:null===(s=r.userSettings)||void 0===s?void 0:s.useAv1;if(this.hasAv1Source=!!(null==e?void 0:null===(a=e.hls)||void 0===a?void 0:null===(o=a.av1)||void 0===o?void 0:o.url),(null==e?void 0:null===(h=e.hls)||void 0===h?void 0:null===(l=h.av1)||void 0===l?void 0:l.url)&&(d||void 0===d)?(this.hlsSource=e.hls.av1.url,delete e.hls.av1):(null==e?void 0:null===(u=e.hls)||void 0===u?void 0:null===(c=u.h264)||void 0===c?void 0:c.url)&&(this.hlsSource=e.hls.h264.url,delete e.hls.h264),this.type="hls",this.ready=!1,this.loaded=!1,this.destroyed=!1,this.attached=!1,this.playAfterSet=!1,this.qualities=null,this.storage=null,this.options.hlsSupport&&this.hlsSource&&this.options.hlsConfig&&this.options.hlsConfig.libSrc)return;this.destroy()}},$=class{createNext(e={}){if(this.sourceControllerIndex>this.sourcesControllerQueue.length-1)return new this.ControllerAbstractClass;this.options=(0,m._)({},this.options,e);let t=new this.sourcesControllerQueue[this.sourceControllerIndex](this.sources,this.options);return(this.sourceControllerIndex++,t.destroyed)?this.createNext(e):t}addControllerToQueue(e){return!!e&&e.prototype instanceof this.ControllerAbstractClass&&(this.sourcesControllerQueue.push(e),!0)}isAbstract(e){return!!e&&e.constructor===this.ControllerAbstractClass}constructor(e,t={}){this.sources=e,this.options=t,this.sourcesControllerQueue=[F,F,G],this.ControllerAbstractClass=B,this.sourceControllerIndex=0}};let W={autoplay:!1,volume:1,muted:!1,quality:"auto",preview:!0,lefty:!1,doubleTapMode:"top-down",useAv1:!0,subtitlesPrefLang:null,subtitlesStateByButton:null};var K=class{getSettings(){return this.settings}getDefaultSettings(){return this.options.default?(0,m._)({},W,this.options.default):W}init(e){this.storage=new V,this.settings=this.loadSettings(),e&&(this.settings=(0,m._)({},this.settings,e)),this.attachEvents()}attachEvents(){y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.changeSetting.bind(this,"volume")),y.on(f.Z.PLAYER_SET_QUALITY,this.changeSetting.bind(this,"quality")),y.on(f.Z.PLAYER_SET_AUTOPLAY,this.changeSetting.bind(this,"autoplay")),y.on(f.Z.PLAYER_SET_PREVIEW,this.changeSetting.bind(this,"preview")),y.on(f.Z.PLAYER_SET_LEFTY,this.changeSetting.bind(this,"lefty")),y.on(f.Z.PLAYER_SET_DOUBLE_TAP_MODE,this.changeSetting.bind(this,"doubleTapMode")),y.on(f.Z.PLAYER_SET_AV1_OPTION,this.changeSetting.bind(this,"useAv1")),y.on(f.Z.PLAYER_SET_AV1_OPTION,this.reloadAfterAv1Set),y.on(f.Z.SUBTITLES_SAVE_LANG,this.changeSetting.bind(this,"subtitlesPrefLang")),y.on(f.Z.SUBTITLES_STATE_BY_BUTTON,this.changeSetting.bind(this,"subtitlesStateByButton"))}reloadAfterAv1Set(){setTimeout(()=>{window.location.reload()},200)}changeSetting(e,t){"volume"===e&&(this.changeSetting("muted",t.target.muted),t=t.target.volume),null!==t&&(this.settings[e]=t,this.saveSettings())}saveSettings(){try{let e=JSON.stringify(this.settings);this.storage.setItem(this.settingsStoreName,e)}catch(e){C.log(C.TYPES.IO_ERROR,"UserSettingsController","Сan't save settings",{settings:this.settings})}}loadSettings(){let e=this.loadSavedSettings();return(0,m._)({},this.getDefaultSettings(),e)}loadSavedSettings(){let e=this.storage.getItem(this.settingsStoreName);try{e=JSON.parse(e)}catch(t){e={},C.log(C.TYPES.IO_ERROR,"UserSettingsController","Can't parse settings",{settings:this.settings})}return e}constructor(e,t){this.core=e,this.options=t||{},this.settingsStoreName=(null==t?void 0:t.settingsStoreName)||"x-player-settings",this.settings={},this.storage=null,this.init(t)}},j={canplay:f.Z.PLAYER_ON_CAN_PLAY,canplaythrough:f.Z.PLAYER_ON_CAN_PLAY_THROUGH,durationchange:f.Z.PLAYER_ON_DURATION_CHANGE,ended:f.Z.PLAYER_ON_ENDED,error:f.Z.PLAYER_ON_ERROR,loadeddata:f.Z.PLAYER_ON_LOADED_DATA,loadedmetadata:f.Z.PLAYER_ON_LOAD_META_DATA,loadstart:f.Z.PLAYER_ON_LOAD_START,pause:f.Z.PLAYER_ON_PAUSE,play:f.Z.PLAYER_ON_PLAY,playing:f.Z.PLAYER_ON_PLAYING,progress:f.Z.PLAYER_ON_PROGRESS,ratechange:f.Z.PLAYER_ON_RATECHANGE,seeked:f.Z.PLAYER_ON_SEEKED,seeking:f.Z.PLAYER_ON_SEEKING,stalled:f.Z.PLAYER_ON_STALLED,timeupdate:f.Z.PLAYER_ON_TIMEUPDATE,volumechange:f.Z.PLAYER_ON_VOLUME_CHANGE,waiting:f.Z.PLAYER_ON_WAITING};let q="xplayer-paused",Q="xplayer-no-scroll",z="fullscreen-ie",X="xp-fullscreen";var J=class{init(){if(this.initDispatcher(),this.capabilitiesService=new T(this),this.capabilities=this.capabilitiesService.capabilities,this.fallbackService=new U(this.elementId,this,this.options),this.options.sources=Y(this.options.sources,this.capabilities),!this.options.sources){this.fallbackPlayer();return}this.addXplayerDataRole(),this.initXPlayer()}addXplayerDataRole(){this.element.setAttribute("data-role","xplayer")}fallbackPlayer(){this.type="none",this.fallbackService.fallbackImage()}initDispatcher(){y.debug=this.options.debug,this.dispatcher=y,this.on=(e,t,i=this,n=null,s=!1)=>this.dispatcher.on(e,t,i,n,s),this.once=(e,t,i=this,n=null)=>this.dispatcher.once(e,t,i,n),this.off=(e,t)=>this.dispatcher.off(e,t),this.offAllEvents=()=>this.dispatcher.offAllEvents(),this.emit=(e,...t)=>this.dispatcher.emit(e,...t)}initXPlayer(){if(this.videoElement=this.createVideoElement(),this.videoElement.id=this.videoElementExternalId||"xplayer__video",this.initVideoElementMutationObserver(),this.options.duration?R.set("duration",this.options.duration):C.log(C.TYPES.INIT_ERROR,"Core","No duration passed",{options:this.options}),this.initPlayerEvents(),this.initPlayingEvents(),this.initGlobalEvents(),this.states=R,this.playerErrorController=new D(this),this.createSettings(),this.options.dashConfig=(0,p._)((0,m._)({},this.options.dashConfig),{autoplay:this.options.preventFirstPlay,debug:this.options.debug}),this.createSourceControllerFactory(),!this.sourceController||this.sourceController.destroyed){this.fallbackPlayer();return}this.sourceController.init(),this.airplayController=new S(this),this.preloadActivate()}createSettings(){this.userSettingsController=new K(this,this.options.userSettings),this.settings=this.userSettingsController.getSettings()}createSourceControllerFactory(){this.sourceControllerFactory=new $(this.options.sources,{initialVideoQuality:this.settings.quality,disableSourceFallback:this.options.disableSourceFallback,getSourceAfterRedirect:this.options.getSourceAfterRedirect,hlsSupport:this.capabilities.hlsJs,hlsConfig:this.options.hlsConfig,dashConfig:this.options.dashConfig,dashSupport:this.capabilities.dashJs,videoElement:this.videoElement,userSettings:this.settings}),this.sourceController=this.sourceControllerFactory.createNext()}initVideoElementMutationObserver(){if(!window.MutationObserver)return;let e=0,t=new MutationObserver((function(i){i.forEach(i=>{if("attributes"===i.type&&"none"===this.videoElement.style.display){if(e>3){t.disconnect();return}e++,this.videoElement.style.display="block"}})}).bind(this));t.observe(this.videoElement,{attributes:!0})}render(){throw Error("Xplayer - no render method")}createVideoElement(){return document.createElement("video")}preloadActivate(){("plain"===this.options.version||!this.options.preventFirstPlay&&Array.isArray(this.options.preload)&&-1!==this.options.preload.indexOf(this.sourceController.type))&&(this.preload=!0,setTimeout(()=>this.sourceController.attachSource(this.videoElement),0))}initPlayerEvents(){for(let e in j){if(!j.hasOwnProperty(e))return;this.videoElement.addEventListener(e,t=>this.emit(j[e],t))}this.on(f.Z.PLAYER_PLAY,this.playerPlay,this),this.on(f.Z.PLAYER_PAUSE,this.playerPause,this)}playerPlay(e=!1){if(R.get("chromecast")||(this.preload=!1,this.options.preventFirstPlay&&!this.capabilities.safari&&!this.capabilities.mobile&&"hls"===this.sourceController.type))return;if(!this.sourceController.ready){this.capabilities.safari&&this.videoElement.load(),y.once(f.Z.SOURCE_CONTROLLER_READY,this.playerPlay.bind(this,e));return}if(R.get("sourceLoaded")&&!e||((this.capabilities.safari||this.capabilities.mobile&&!this.options.preventFirstPlay)&&this.videoElement.load(),this.options.preventFirstPlay||this.sourceController.attachSource(this.videoElement)),!(this.capabilities.safari&&!this.capabilities.mobile&&"hls"===this.sourceController.type)&&this.videoElement.readyState<2){this.videoElement.play(),this.requestedPlayLoaded||this.requestedPlayCanPlay||(this.requestedPlayLoaded=this.on(f.Z.PLAYER_ON_LOADED_DATA,()=>{this.emit(f.Z.PLAYER_PLAY)}),this.requestedPlayCanPlay=this.on(f.Z.PLAYER_ON_CAN_PLAY,()=>{this.emit(f.Z.PLAYER_PLAY)}));return}if(this.options.preventFirstPlay&&"plain"!==this.options.version&&!0!==e)return;this.clearPlayRequests();let t=this.videoElement.play();if(!(t instanceof window.Promise)){y.emit(f.Z.PLAYER_PLAY_VIDEO_PROMISE_NOT_SUPPORTED);return}t.then(()=>{y.emit(f.Z.PLAYER_PLAY_SUCCESS)}),t.catch(e=>{y.emit(f.Z.PLAYER_PLAY_FAILED,e),y.emit(f.Z.PLAYER_PLAY_FAIL,e)})}onPlayerPlay(){c.removeClass(this.element,q)}playerPause(){R.get("chromecast")||(R.get("swiping")||c.addClass(this.element,q),this.clearPlayRequests(),this.videoElement.pause(),this.emit(f.Z.PLAYER_PAUSED))}isVideoVertical(){let{videoWidth:e,videoHeight:t}=this.videoElement||{};return t>e}clearPlayRequests(){this.off(f.Z.PLAYER_ON_LOADED_DATA,this.requestedPlayLoaded),this.off(f.Z.PLAYER_ON_CAN_PLAY,this.requestedPlayCanPlay),this.requestedPlayLoaded=null,this.requestedPlayCanPlay=null}initPlayingEvents(){var e;this.on(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK,this.onPlayerPreventPlayUnblock,this),this.on(f.Z.PLAYER_SET_SOURCE,this.changeQuality,this),this.on(f.Z.PLAYER_SET_VIDEO_SOURCE,this.setVideoSource,this),this.on(f.Z.PLAYER_FALLBACK_SOURCE,this.fallbackSource,this),this.on(f.Z.PLAYER_SET_CURRENT_TIME,this.setCurrentTime,this),this.on(f.Z.PLAYER_SET_VOLUME,this.setVolume,this),this.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.setPlayBackRate,this),this.on(f.Z.PLAYER_ON_PLAY,this.onPlayerPlay,this),this.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.toggleFullscreen.bind(this)),this.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PROGRESS_BAR_RESIZE,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PLAYER_TOGGLE_LARGEMODE,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PLAYER_ON_CHANGE_ORIENTATION,this.sendAccumulatedResize.bind(this)),this.on(f.Z.PLAYER_FULLSCREEN_FAILED,this.removeFullscreenClass.bind(this)),this.deviceUsesFullscreenClass()&&this.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.onFullscreenChange.bind(this)),(null===(e=this.pluginOptions.fallbackOnStalled)||void 0===e?void 0:e.group)&&(this.on(f.Z.PLAYER_ON_TIMEUPDATE,this.setStalledTimer.bind(this)),this.on(f.Z.PLAYER_ON_PAUSE,this.clearStalledTimer.bind(this)))}clearStalledTimer(){clearTimeout(this.stalledTimer),this.stalledTimer=null}setStalledTimer(){this.clearStalledTimer(),R.get("playing")&&(this.stalledTimer=setTimeout(this.playerOnStalled.bind(this),15e3))}playerOnStalled(){var e;switch(null===(e=this.pluginOptions.fallbackOnStalled)||void 0===e?void 0:e.group){case"b":this.setCurrentTime(R.get("currentTime")+1);break;case"c":this.playerPause();break;case"d":this.fallbackSource()}this.playerPlay(),this.setCurrentTime(R.get("currentTime"))}initGlobalEvents(){let e=e=>this.emit(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,e);this.capabilities.fullscreen?(document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("fullscreenchange",e),document.addEventListener("MSFullscreenChange",e),this.capabilities.idevice&&(this.videoElement.addEventListener("webkitbeginfullscreen",e,!1),this.videoElement.addEventListener("webkitendfullscreen",e,!1))):this.capabilities.idevice?(this.videoElement.addEventListener("webkitbeginfullscreen",e,!1),this.videoElement.addEventListener("webkitendfullscreen",e,!1)):this.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,e)}setVolume(e){let t=e;t<0&&(t=0),t>1&&(t=1),this.videoElement.volume=t,this.videoElement.muted=!t}onPlayerPreventPlayUnblock(){this.options.preventFirstPlay=!1,this.clearPlayRequests()}sendAccumulatedResize(){y.emit(f.Z.PLAYER_ON_RESIZE)}setPlayBackRate(e,t){if(!(e>2)&&!(e<.25)){if(!t){if(R.get("ads_playing")){y.once(f.Z.ADS_ENDED,this.setPlayBackRate.bind(this,e));return}if(this.videoElement.readyState<2){y.once(f.Z.PLAYER_ON_PLAY,this.setPlayBackRate.bind(this,e)),this.capabilities.safari||this.emit(f.Z.PLAYER_PLAY);return}}this.videoElement.playbackRate=e,t||this.emit(f.Z.PLAYER_PLAY)}}changeQuality(e,t,i=!1,n=!1){this.capabilities.samsung&&R.get("ads_playing")&&(i=null),this.capabilities.safari&&!R.get("sourceLoaded")&&this.videoElement.load(),e||(e=this.settings.quality),this.sourceController.prepareTimeupdate(t,i,n),this.sourceController.changeQuality(this.videoElement,e,this.options.preventFirstPlay),this.options.preventFirstPlay&&this.emit(f.Z.PLAYER_PLAY),this.emit(f.Z.SOURCE_TYPE_CHANGE),this.setPlayBackRate(R.get("playbackRate"),!t)}setVideoSource(e){this.videoElement.src=e,this.videoElement.load(),R.set("sourceLoaded",!0)}fallbackSource(e=!1){if(!this.sourceController.fallbackSource()){if(this.sourceController=this.sourceControllerFactory.createNext(),this.sourceControllerFactory.isAbstract(this.sourceController)){this.emit(f.Z.PLAYER_FALLBACK_SOURCE_FAIL);return}this.sourceController.init()}this.emit(f.Z.SOURCE_TYPE_CHANGE),!e&&(this.sourceController.changeQuality(this.videoElement),R.get("currentTime")&&(this.setCurrentTime(R.get("currentTime")),this.emit(f.Z.PLAYER_PLAY)))}setCurrentTime(e){if(!R.get("sourceLoaded")){if(R.set("currentTime",e),this.options.preventFirstPlay)return;if(!this.sourceController.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.setCurrentTime,this,e);return}this.sourceController.attachSource(this.videoElement),this.once(f.Z.PLAYER_ON_LOAD_META_DATA,()=>{this.setCurrentTime(e)});return}if(this.capabilities.safari&&this.videoElement.readyState<2){this.currentTime=e,this.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{this.setCurrentTime(e)});return}if(!(R.get("ads_playing")||!e&&0!==e||R.get("ended")&&e>=this.videoElement.currentTime)&&(e>=this.videoElement.duration?e=this.videoElement.duration:e<0&&(e=0),R.set("currentTime",e),!(this.capabilities.ie&&Number.isNaN(this.videoElement.duration))))try{this.videoElement.currentTime=R.get("currentTime"),R.get("ended")&&this.emit(f.Z.PLAYER_PLAY)}catch(e){}}addFullscreenClass(){c.addClass(this.element,X)}removeFullscreenClass(){c.removeClass(this.element,X)}isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||R.get("fullscreen"))}deviceUsesFullscreenClass(){let{safari:e,console:t}=this.capabilities;return e||t}onFullscreenChange(){this.deviceUsesFullscreenClass()&&(this.isFullscreen()?this.addFullscreenClass():c.hasClass(this.element,X)&&this.removeFullscreenClass())}toggleFullscreen(){if(!this.capabilities.fullscreen){this.toggleFullscreenIE();return}if(this.isFullscreen())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():this.videoElement.webkitExitFullscreen&&this.videoElement.webkitExitFullscreen();else{var e,t,i,n,s,r,o;if(this.capabilities.iphone&&this.videoElement.webkitEnterFullScreen){null===(e=this.videoElement.webkitEnterFullScreen())||void 0===e||e.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)});return}this.element.requestFullscreen?null===(t=this.element.requestFullscreen())||void 0===t||t.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.msRequestFullscreen?null===(i=this.element.msRequestFullscreen())||void 0===i||i.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.mozRequestFullScreen?null===(n=this.element.mozRequestFullScreen())||void 0===n||n.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.webkitRequestFullscreen?null===(s=this.element.webkitRequestFullscreen())||void 0===s||s.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.element.webkitRequestFullScreen?null===(r=this.element.webkitRequestFullScreen())||void 0===r||r.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}):this.videoElement.webkitEnterFullScreen&&(null===(o=this.videoElement.webkitEnterFullScreen())||void 0===o||o.catch(()=>{y.emit(f.Z.PLAYER_FULLSCREEN_FAILED)}))}}toggleFullscreenIE(){let e={type:null};c.hasClass(this.element,z)?(c.removeClass(document.getElementsByTagName("html")[0],Q),c.removeClass(this.element,z)):(c.addClass(this.element,z),c.addClass(document.getElementsByTagName("html")[0],Q),e.type="webkitbeginfullscreen"),y.emit(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,e)}constructor(e,t,i,n=null){this.elementId=e,this.element=document.getElementById(e),this.options=t,this.pluginOptions=i||{},this.settings=null,this.autoplay=!1,this.poster=t.poster,this.type="xplayer",this.requestedPlayLoaded=null,this.requestedPlayCanPlay=null,this.stalledTimer=null,this.videoElementExternalId=n,this.preload=!1,this.init()}};let ee="no-user-action";var et=class{init(){this.core.on(f.Z.USER_ACTION,this.onUserAction,this),this.core.on(f.Z.NO_USER_ACTION,this.onNoUserAction,this),this.core.on(f.Z.USER_ACTION_PAUSE,this.onUserActionPause,this),this.core.on(f.Z.USER_ACTION_UNPAUSE,this.onUserActionUnpause,this),this.core.on(f.Z.USER_ACTION_BLOCK,this.onUserActionBlock,this),this.core.on(f.Z.USER_ACTION_UNBLOCK,this.onUserActionUnblock,this),this.options.noPlayPauseUserAction||(this.core.on(f.Z.PLAYER_ON_PLAY,this.onPlayerPlay,this),this.core.on(f.Z.PLAYER_ON_PAUSE,this.onPlayerPause,this),this.core.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this)),this.emitNoUserAction=this.core.emit.bind(this,f.Z.NO_USER_ACTION)}onUserAction(e){c.hasClass(this.core.element,ee)&&(c.removeClass(this.core.element,ee),this.hasNoUserAction=!1),this.clearUserActionTimeout(),this.userActionBlocked||this.userActionPaused||(this.core.options.isNonNativeAndroidFullscreen&&(this.core.videoElement.setAttribute("controls",!0),this.core.videoElement.focus()),e&&(e=Number.isInteger(e)?e:3e3,this.userActionTimeout=setTimeout(this.emitNoUserAction,e)))}onUserActionBlock(e=!1){this.userActionBlocked=!0,e&&(this.userActionForceBlock=!0),this.clearUserActionTimeout()}onUserActionUnblock(e=!1){(!this.userActionForceBlock||e)&&(this.userActionForceBlock=!1,this.userActionBlocked=!1,this.core.capabilities.mobile&&this.core.options.hasDSA?this.core.emit(f.Z.USER_ACTION,500):this.core.emit(f.Z.USER_ACTION,!0))}onUserActionPause(){this.userActionPaused=!0,this.clearUserActionTimeout()}onUserActionUnpause(){this.userActionPaused=!1}onNoUserAction(){c.addClass(this.core.element,ee),this.hasNoUserAction=!0,this.core.options.isNonNativeAndroidFullscreen&&this.core.videoElement.removeAttribute("controls")}clearUserActionTimeout(){null!==this.userActionTimeout&&(clearTimeout(this.userActionTimeout),this.userActionTimeout=null)}onPlayerPlay(){this.core.emit(f.Z.USER_ACTION,!0)}onPlayerPause(){this.core.emit(f.Z.USER_ACTION,!0)}onPlayerEnded(){this.core.emit(f.Z.USER_ACTION_BLOCK),this.core.once(f.Z.PLAYER_ON_PLAYING,()=>{this.core.emit(f.Z.USER_ACTION_UNBLOCK)})}getHasNoUserAction(){return this.hasNoUserAction}constructor(e,t){this.core=e,this.options=t||{},this.userActionTimeout=null,this.userActionPaused=!1,this.userActionBlocked=!1,this.hasNoUserAction=!1,this.userActionForceBlock=!1,this.init()}};let ei="xplayer-loading";var en=class extends J{initXPlayer(){super.initXPlayer(),this.userActionController=new et(this),this.autoplay="plain"!==this.options.version&&(!0===this.settings.autoplay||"true"===this.settings.autoplay)&&window.self===window.top,this.render(),this.setVolume(this.settings.volume),!this.setTimeOffset()&&this.autoplay&&(this.emit(f.Z.PLAYER_PLAY),this.emit(f.Z.PLAYER_PLAY_AUTOPLAY))}render(){this.videoElement.setAttribute("preload","auto"),this.videoElement.controls="plain"===this.options.version,c.addClass(this.element,"xplayer"),c.addClass(this.element,"notranslate"),"plain"===this.options.version&&c.addClass(this.element,"x-plain"),this.autoplay&&c.addClass(this.element,ei),this.element.appendChild(this.videoElement)}initPlayingEvents(){super.initPlayingEvents(),this.once(f.Z.PLAYER_ON_LOAD_META_DATA,this.onPlayerLoaded,this)}onPlayerLoaded(){"plain"!==this.options.version&&this.videoElement.removeAttribute("poster"),c.removeClass(this.element,ei)}setTimeOffset(){let e=d.parseTimeOffset();return!!e&&(this.options.preventFirstPlay?(this.autoplay=!0,!1):(this.emit(f.Z.PLAYER_SET_CURRENT_TIME,e),this.once(f.Z.PLAYER_ON_SEEKED,()=>{this.emit(f.Z.PLAYER_PLAY)}),!0))}constructor(e,t,i){super(e,t,i),this.noAutoplay=t.userSettings&&t.userSettings.override&&!1===t.userSettings.override.autoplay}};function es(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var er=function(e){return!e||Array.isArray(e)&&(null==e?void 0:e.every(function(e){return!e}))};document.location.hostname;var eo={getCollectorUrl:function(e=""){if(window.getCollectorUrl)return window.getCollectorUrl(e);let t=window.location.hostname.split(/\./).slice(-2).join(".");return`https://collector.${t}/${e.replace(/^\//,"")}`}},ea=class{init(){this.attachAdaptiveEvents()}attachAdaptiveEvents(){this.videoElement.addEventListener("timeupdate",this.playerOnTimeupdate.bind(this)),this.videoElement.addEventListener("seeking",this.playerOnSeekingAdaptive.bind(this)),this.videoElement.addEventListener("seeked",this.playerOnSeekedAdaptive.bind(this)),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE,this.onPlayerFallbackSource,this)}playerOnTimeupdate(e){if(!R.get("ads_playing")){if("auto"!==this.core.sourceController.getCurrentQuality()||"standard"===this.core.sourceController.type||e.target.seeking){this.lastTime=this.videoElement.currentTime;return}this.watched+=this.videoElement.currentTime-this.lastTime,this.lastTime=this.videoElement.currentTime,this.watched>this.threshold&&(this.watched=0,this.bufferingStats("adaptive",null,null,0,0))}}playerOnSeekedAdaptive(){R.get("ads_playing")||(this.lastTime=this.videoElement.currentTime)}playerOnSeekingAdaptive(){R.get("ads_playing")||(this.lastTime=this.videoElement.currentTime)}onPlayerFallbackSource(){this.isFallback=1}bufferingStats(e,t,i,n,s=0){let r={log:"cdn",source:"html5",bufferingDuration:Math.round(i)||0,videoPosition:Math.round(n),bufferingEvent:t,userEvent:e,isBounce:s,videoFile:this.core.sourceController.getSourceUrl(),player:"xplayer",version:7,sourceType:this.core.sourceController.type,sourceQuality:this.core.sourceController.getCurrentQuality(),sourceURL:this.core.sourceController.getSourceUrl(),settingsSaved:this.core.settings.quality!==this.core.userSettingsController.getDefaultSettings().quality,fallback:this.isFallback};if(this.options.addFields&&(r=(0,m._)({},r,this.options.addFields)),"adaptive"===e&&(r.adaptiveQuality=this.core.sourceController.getQuality(-1)),this.debug){console.warn("buffStats:",r);return}A.ajax("GET",eo.getCollectorUrl(),r)}reset(){this.lastTime=0,this.watched=0,this.isFallback=0}constructor(e,t,i,n){var s,r;this.core=e,this.videoElement=t,this.options=i||{},this.debug=n,this.lastTime=0,this.watched=0,this.threshold=(null===(r=this.options)||void 0===r?void 0:null===(s=r.adaptiveStats)||void 0===s?void 0:s.threshold)||10,this.isFallback=0,this.init()}},el=class{init(){this.core.on(f.Z.PLAYER_PLAY,this.playerOnPlay,this),this.attachOnceEvents(),this.core.on(f.Z.SPRITE_LOAD,this.onSpriteLoad.bind(this)),this.core.on(f.Z.SPRITE_LOAD_SUCCESS,this.onSpriteLoadSuccess.bind(this)),this.core.on(f.Z.SPRITE_LOAD_ERROR,this.onSpriteLoadError.bind(this)),this.videoElement.addEventListener("loadstart",this.playerOnLoadStart.bind(this)),this.videoElement.addEventListener("loadeddata",this.playerOnLoadedData.bind(this)),this.videoElement.addEventListener("waiting",this.playerOnWaiting.bind(this)),this.videoElement.addEventListener("canplay",this.playerOnCanPlay.bind(this)),this.videoElement.addEventListener("playing",this.playerOnCanPlay.bind(this)),this.videoElement.addEventListener("timeupdate",this.playerOnBuffTimeupdate.bind(this)),this.videoElement.addEventListener("seeking",this.playerOnSeeking.bind(this)),this.videoElement.addEventListener("seeked",this.playerOnSeeked.bind(this));let e=this.core.capabilities.ios?"pagehide":"beforeunload";window.addEventListener(e,this.bufferingOnUnload.bind(this),!1)}attachOnceEvents(){this.bufferingVars.playerOnSwipeStartEventId=this.core.once(f.Z.PLAYER_ON_SWIPE_START,()=>{this.bufferingVars.hasSwiping=!0}),this.bufferingVars.viewSuccessEventId=this.core.once(f.Z.VIEW_SUCCESS,this.onViewSuccess.bind(this)),this.bufferingVars.fallbackSourceEventId=this.core.once(f.Z.PLAYER_FALLBACK_SOURCE,this.onPlayerFallbackSource,this)}offOnceEvents(){this.core.off(f.Z.PLAYER_ON_SWIPE_START,this.bufferingVars.playerOnSwipeStartEventId),this.core.off(f.Z.VIEW_SUCCESS,this.bufferingVars.viewSuccessEventId),this.core.off(f.Z.PLAYER_FALLBACK_SOURCE,this.bufferingVars.fallbackSourceEventId)}getBufferingVars(){return{player:"xplayer",isInBufferedZone:!1,countBuffering:0,sourceLoaded:!1,loadstartTime:0,waitingTime:0,seekingTime:0,seeking:!1,seekingEvent:!1,hasPlay:!1,hasCorePlay:!1,loaded:!1,lastWaitingTs:[],playDurationSent:!1,hasSwiping:!1,fallback:0,version:7,playerOnSwipeStartEventId:null,viewSuccessEventId:null,fallbackSourceEventId:null}}playerOnLoadStart(){this.bufferingVars.loadstartTime>0||(this.bufferingVars.loadstartTime=Date.now())}playerOnLoadedData(){this.bufferingVars.loadstartTime>0&&(this.bufferingVars.sourceLoaded?this.bufferingStats("play","change",Date.now()-this.bufferingVars.loadstartTime,this.videoElement.currentTime,0):this.bufferingVars.hasCorePlay&&(this.bufferingStats("play","end",Date.now()-this.bufferingVars.loadstartTime,this.bufferingVars.playDurationSent?1:0,0),this.bufferingVars.sourceLoaded=!0,this.bufferingVars.playDurationSent=!0),this.currentSrc=this.videoElement.src,this.bufferingVars.loaded=!0,this.bufferingVars.loadstartTime=0,this.bufferingVars.waitingTime=0)}playerOnPlay(){this.bufferingVars.hasPlay||(this.bufferingStats("play","start",0,0,0),this.bufferingVars.hasPlay=!0),this.bufferingVars.loaded||this.bufferingVars.hasCorePlay||(this.bufferingVars.loadstartTime=Date.now(),this.bufferingVars.hasCorePlay=!0)}playerOnWaiting(){0===this.bufferingVars.seekingTime&&0===this.bufferingVars.loadstartTime&&this.bufferingVars.hasPlay&&!this.bufferingVars.seekingEvent&&(this.bufferingVars.waitingTime=Date.now())}playerOnCanPlay(){this.bufferingVars.waitingTime>0&&this.bufferingVars.hasPlay&&this.sendWatchBufferingEvent("canplay")}playerOnBuffTimeupdate(){if(this.bufferingVars.waitingTime>0&&this.bufferingVars.hasPlay){if(this.bufferingVars.lastWaitingTs.length<2){this.bufferingVars.lastWaitingTs.push(this.videoElement.currentTime);return}if(-1!==this.bufferingVars.lastWaitingTs.indexOf(this.videoElement.currentTime)){this.bufferingVars.lastWaitingTs.shift(),this.bufferingVars.lastWaitingTs.push(this.videoElement.currentTime);return}this.sendWatchBufferingEvent("timeupdate")}}playerOnSeeking(){!this.bufferingVars.seeking&&(this.bufferingVars.seekingEvent=!0,this.bufferingVars.hasPlay&&(this.bufferingVars.isInBufferedZone=this.isInBufferedZone(this.videoElement.currentTime),this.bufferingVars.isInBufferedZone||(this.bufferingVars.seeking=!0,this.bufferingVars.seekingTime=Date.now())))}playerOnSeeked(){if(this.bufferingVars.seekingTime>0){let e=Date.now()-this.bufferingVars.seekingTime;this.bufferingVars.seeking=!1,this.bufferingVars.seekingEvent=!1,this.bufferingVars.hasPlay&&this.currentSrc===this.videoElement.src&&!this.bufferingVars.isInBufferedZone&&this.bufferingStats("rewind","end",e,this.videoElement.currentTime,0),this.bufferingVars.seekingTime=0}}onPlayerFallbackSource(){this.bufferingVars.fallback=1}bufferingOnUnload(){this.bufferingVars.hasPlay&&(this.bufferingVars.loadstartTime>0&&(this.bufferingVars.sourceLoaded?this.bufferingStats("play","change",Date.now()-this.bufferingVars.loadstartTime,this.videoElement.currentTime,1):this.bufferingStats("play","end",Date.now()-this.bufferingVars.loadstartTime,0,1),this.bufferingVars.loadstartTime=0),this.bufferingVars.seekingTime>0&&(this.bufferingStats("rewind","end",Date.now()-this.bufferingVars.seekingTime,this.videoElement.currentTime,1),this.bufferingVars.seekingTime=0),this.bufferingVars.waitingTime>0&&(this.bufferingStats("play","end",Date.now()-this.bufferingVars.waitingTime,this.videoElement.currentTime+1,1),this.bufferingVars.waitingTime=0))}sendWatchBufferingEvent(){this.bufferingStats("play","end",Date.now()-this.bufferingVars.waitingTime,this.videoElement.currentTime+1,0),this.bufferingVars.waitingTime=0,this.bufferingVars.lastWaitingTs=[]}isInBufferedZone(e){let t=this.videoElement.buffered;if("object"!=typeof t){if(null===this.videoElement)return!1;t=this.videoElement.buffered}let i=t.length;for(;i--;)if(e>=t.start(i)&&e<t.end(i))return!0;return!1}onViewSuccess(){this.bufferingStats("play","success",1e3*this.videoElement.currentTime,this.videoElement.currentTime)}onSpriteLoad(e){this.bufferingStats("sprite","load",0,this.videoElement.currentTime,0,{"int.spriteNumber":e})}onSpriteLoadSuccess(e,t){this.bufferingStats("sprite","success",e,this.videoElement.currentTime,0,{"int.spriteNumber":t})}onSpriteLoadError(e,t){this.bufferingStats("sprite","error",e,this.videoElement.currentTime,0,{"int.spriteNumber":t})}bufferingStats(e,t,i,n,s=0,r=null){if("start"!==t&&"success"!==t&&"sprite"!==e&&i<50)return;let o={log:"cdn",source:"html5",bufferingDuration:Math.round(i)||0,videoPosition:Math.round(n),bufferingEvent:t,userEvent:e,isBounce:s,videoFile:this.core.sourceController.getSourceUrl(),player:this.bufferingVars.player,version:this.bufferingVars.version,sourceType:this.core.sourceController.type,sourceQuality:this.core.sourceController.getCurrentQuality(),sourceURL:this.core.sourceController.getSourceUrl(),settingsSaved:this.core.settings.quality!==this.core.userSettingsController.getDefaultSettings().quality,fallback:this.bufferingVars.fallback,hasAds:this.options.hasAds,"str.hasSwiping":this.bufferingVars.hasSwiping,"str.av1Supported":this.core.capabilities.av1,"str.h265Supported":this.core.capabilities.h265};if(r&&(o=(0,m._)({},o,r)),this.options.addFields&&(o=(0,m._)({},o,this.options.addFields)),"adaptive"===e&&(o.adaptiveQuality=this.core.sourceController.getQuality(-1)),this.debug){console.warn("buffStats:",o,e,t,s);return}A.ajax("GET",eo.getCollectorUrl(),o)}reset(){this.offOnceEvents(),this.bufferingVars=this.getBufferingVars(),this.attachOnceEvents()}constructor(e,t,i,n){this.core=e,this.videoElement=t,this.options=i||{},this.debug=n,this.bufferingVars=this.getBufferingVars(),this.init()}},eh=class{init(){this.attachGeneralEvents(),this.attachPlayerEvents(),this.attachAdsEvents(),this.attachAdaptiveEvents(),this.attachErrorEvents(),this.attachFallbackEvents()}attachGeneralEvents(){var e;this.core.on(f.Z.PLAYER_ON_INIT,this.sendPlayerInit,this),e=this.sendPlainEvent.bind(this,"page_exit"),window.addEventListener("pagehide",function(t){e(t)},!0)}sendPlayerInit(){var e,t,i;this.send("page_init",null===(i=window)||void 0===i?void 0:null===(t=i.performance)||void 0===t?void 0:null===(e=t.timing)||void 0===e?void 0:e.fetchStart),this.send("player_init")}attachPlayerEvents(){this.core.on(f.Z.PLAYER_PLAY,this.sendPlainEvent.bind(this,"play")),this.core.once(f.Z.VIEW_SUCCESS,this.sendPlainEvent.bind(this,"view_success")),this.videoElement.addEventListener("abort",this.sendPlainEvent.bind(this,"abort")),this.videoElement.addEventListener("canplay",this.sendPlainEvent.bind(this,"canplay")),this.videoElement.addEventListener("canplaythrough",this.sendPlainEvent.bind(this,"canplaythrough")),this.videoElement.addEventListener("complete",this.sendPlainEvent.bind(this,"complete")),this.videoElement.addEventListener("durationchange",this.sendPlainEvent.bind(this,"durationchange")),this.videoElement.addEventListener("emptied",this.sendPlainEvent.bind(this,"emptied")),this.videoElement.addEventListener("ended",this.sendPlainEvent.bind(this,"ended")),this.videoElement.addEventListener("loadeddata",this.sendPlainEvent.bind(this,"loadeddata")),this.videoElement.addEventListener("loadedmetadata",this.sendPlainEvent.bind(this,"loadedmetadata")),this.videoElement.addEventListener("loadstart",this.sendPlainEvent.bind(this,"loadstart")),this.videoElement.addEventListener("pause",this.sendPlainEvent.bind(this,"pause")),this.videoElement.addEventListener("play",this.sendPlainEvent.bind(this,"play")),this.videoElement.addEventListener("playing",this.sendPlainEvent.bind(this,"playing")),this.videoElement.addEventListener("progress",this.sendDelayedEvent.bind(this,"progress",5)),this.videoElement.addEventListener("ratechange",this.sendPlainEvent.bind(this,"ratechange")),this.videoElement.addEventListener("seeked",this.sendPlainEvent.bind(this,"seeked")),this.videoElement.addEventListener("seeking",this.sendDelayedEvent.bind(this,"seeking",.3)),this.videoElement.addEventListener("stalled",this.sendPlainEvent.bind(this,"stalled")),this.videoElement.addEventListener("suspend",this.sendPlainEvent.bind(this,"suspend")),this.videoElement.addEventListener("volumechange",this.sendPlainEvent.bind(this,"volumechange")),this.videoElement.addEventListener("waiting",this.sendPlainEvent.bind(this,"waiting")),this.videoElement.addEventListener("timeupdate",this.sendDelayedEvent.bind(this,"timeupdate",10))}sendPlainEvent(e){this.send(e)}sendDelayedEvent(e,t,i=null){this.delayedEvents[e]||(this.send(e,null,i),this.delayedEvents[e]=!0,setTimeout(()=>{this.delayedEvents[e]=!1},1e3*t))}attachAdsEvents(){this.core.on(f.Z.ADS_STARTED,this.sendPlainEvent.bind(this,"ads_start")),this.core.on(f.Z.ADS_ENDED,this.sendPlainEvent.bind(this,"ads_end"))}attachAdaptiveEvents(){}attachErrorEvents(){this.videoElement.addEventListener("error",e=>{var t,i;let n=(null==e?void 0:null===(i=e.target)||void 0===i?void 0:null===(t=i.error)||void 0===t?void 0:t.message)||"";this.sendError(n,!1)}),this.core.on(f.Z.SOURCE_CONTROLLER_ON_ERROR,(e,t)=>{let i=(null==t?void 0:t.details)||(null==t?void 0:t.type)||"";this.sendError(i,!1)}),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE_FAIL,this.sendError.bind(this,"player_fallback_source_fail",!0))}sendError(e="",t=!1){this.send("error",null,{message:e,is_fatal:t})}attachFallbackEvents(){this.core.on(f.Z.PLAYER_FALLBACK_SOURCE,this.sendPlainEvent.bind(this,"fallback"))}send(e,t=null,i=null){let n={log:"xplayer-analytics",event:e,ts:t||Date.now(),watchId:"UNKNOWN",video_position:Math.round(this.videoElement.currentTime),source_url:this.core.sourceController.getSourceUrl()||"UNKNOWN",source_type:this.core.sourceController.type||"UNKNOWN",source_quality:this.core.sourceController.getCurrentQuality()||"UNKNOWN",session_started_at:"UNKNOWN",session_token:"UNKNOWN",player:"UNKNOWN",videoId:"UNKNOWN",maxQuality:"UNKNOWN",message:""};if(R.get("swiping")&&(n.message="swiping"),this.options.addFields&&(n=(0,m._)({},n,this.options.addFields)),i&&(n=(0,m._)({},n,i)),this.debug){console.warn("buffStats2:",n);return}A.sendBeacon(eo.getCollectorUrl(`?log=${n.log}`),n)}constructor(e,t,i,n){this.core=e,this.videoElement=t,this.options=i||{},this.debug=n,this.delayedEvents={},this.init()}},ec=class{init(){this.videoElement.addEventListener("error",this.playerOnError.bind(this)),this.core.on(f.Z.SOURCE_CONTROLLER_ON_ERROR,this.sourceControllerOnError,this),this.core.on(f.Z.PLAYER_FALLBACK_SOURCE_FAIL,this.setHasFatalError.bind(this,!0),this)}setHasFatalError(e){this.hasFatalError=e}sourceControllerOnError(e,t){if(R.get("ads_playing"))return;let{message:i,errorMessage:n}=this.parseSourceControllerErrorMessage(e,t);if(!i)return;let s=this.core.sourceController.getSourceUrl();if(!s){this.errorsStats(i,{errorMessage:"empty",cdnStatusText:"empty",cdnUrl:"empty",cdnStatus:"empty",videoFile:s});return}this.errorCheckCdn(i,s,n)}parseSourceControllerErrorMessage(e,t){let i={message:null,errorMessage:null};return"dash"===e&&(i=this.parseDASHErrorMessage(t)),"hls"===e&&(i=this.parseHLSErrorMessage(t)),i}parseHLSErrorMessage(e){let t=e&&e.details,i=e&&e.fatal,n=e&&e.type,s="UNKNOWN_ERROR";if("mediaError"===n&&("manifestIncompatibleCodecsError"===t&&(n="sourceError"),"bufferNudgeOnStall"===t||"bufferStalledError"===t))return{message:null,errorMessage:t};switch(n){case"networkError":s="MEDIA_ERR_NETWORK";break;case"mediaError":s="MEDIA_ERR_DECODE";break;case"sourceError":s="MEDIA_ERR_SRC_NOT_SUPPORTED"}return i&&this.setHasFatalError(!0),{message:s,errorMessage:t}}parseDASHErrorMessage(e){let t="UNKNOWN_ERROR",i=e&&e.error;switch(this.setHasFatalError(!0),i){case"download":t="MEDIA_ERR_NETWORK";break;case"key_session":case"key_message":t="MEDIA_ERR_DECODE";break;case"capability":case"manifestError":case"mediasource":t="MEDIA_ERR_SRC_NOT_SUPPORTED"}return{message:t,errorMessage:i}}playerOnError(e){if(R.get("ads_playing"))return;let t=e&&e.target&&e.target.error&&e.target.error.code,i=e&&e.target&&e.target.error&&e.target.error.message,n="UNKNOWN_ERROR";switch(t){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE";break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED"}if("MEDIA_ERR_DECODE"===n){if(this.wasDecoderError)return;this.wasDecoderError=!0}this.errorCheckCdn(n,this.videoElement.src,i)}errorCheckCdn(e,t,i){let n=new XMLHttpRequest,s=this.core.sourceController.type,r=this.core.sourceController.getCurrentQuality()||"undefined",o=this.core.sourceController.getSourceUrl();n.onreadystatechange=(function(){4===n.readyState&&this.errorsStats(e,{errorMessage:i||"empty",cdnStatusText:n.statusText||"empty",cdnUrl:n.responseURL||"empty",cdnStatus:n.status||"empty",videoFile:t,sourceType:s,sourceQuality:r,sourceURL:o})}).bind(this),n.open("HEAD",t,!0),n.send()}errorsStats(e,t={}){let i={log:"cdn",source:"html5",videoPosition:Math.round(this.videoElement.currentTime),bufferingEvent:"error",userEvent:e,videoFile:t.videoFile,player:"xplayer",cdnUrl:t.cdnUrl,cdnStatus:t.cdnStatus,cdnStatusText:t.cdnStatusText,errorMessage:t.errorMessage,sourceType:t.sourceType||this.core.sourceController.type,sourceQuality:t.sourceQuality||this.core.sourceController.getCurrentQuality(),sourceURL:t.sourceURL||this.core.sourceController.getSourceUrl(),isFatal:this.hasFatalError};if(this.setHasFatalError(!1),this.options.addFields&&(i=(0,m._)({},i,this.options.addFields)),this.debug){console.log(i);return}A.ajax("GET",eo.getCollectorUrl(),i)}reset(){this.wasDecoderError=!1,this.hasFatalError=!1}constructor(e,t,i,n){this.core=e,this.videoElement=t,this.options=i||{},this.debug=n,this.wasDecoderError=!1,this.hasFatalError=!1,this.init()}},eu={player_init:"player_init",video_end:"video_end",share_open:"share_open",share_click:"share_click",related_open:"related_open",related_click:"related_click",related_refresh:"related_refresh",top_rated_open:"top_rated_open",top_rated_click:"top_rated_click",from_user_open:"from_user_open",from_user_click:"from_user_click",live_sex_click:"live_sex_click",fullscreen_in:"fullscreen_in",fullscreen_out:"fullscreen_out",fullscreen_failed:"fulscreen_failed",large_mode_in:"large_mode_in",large_mode_out:"large_mode_out",settings_open:"settings_open",settings_quality:"settings_quality",settings_speed:"settings_speed",settings_preview:"settings_preview",settings_autoplay:"settings_autoplay",subscribe_init:"subscribe_init",subscribe_show:"subscribe_show",subscribe_click_logo:"subscribe_click_logo",subscribe_click_subscribe:"subscribe_click_subscribe",subscribe_click_unsubscribe:"subscribe_click_unsubscribe",preview:"preview",downloads:"downloads",favorite:"favorite",report_click:"report_click",download_click:"download_click",more_videos_click:"more_videos_click",join_now_click:"join_now_click",title_click:"title_click",producer_click:"producer_click",join_click:"join_click",logo_click:"logo_click",related_more_click:"related_more_click",fullscreen_click:"fullscreen_click",link_click:"watch_hd_click",cta_start_screen_click:"cta_start_screen_click",related_click_small:"related_click_small",download_click_small:"download_click_small",more_videos_click_small:"more_videos_click_small",live_sex_click_small:"live_sex_click_small",share_click_small:"share_click_small",full_video_get_link_click:"full_video_get_link_click",fullscreen_in_by_orientation:"fullscreen_in_by_orientation",fullscreen_out_by_orientation:"fullscreen_out_by_orientation",fullscreen_in_by_button:"fullscreen_in_by_button",fullscreen_out_by_button:"fullscreen_out_by_button",fullscreen_out_by_swipe:"fullscreen_out_by_swipe",seeking_by_tap:"seeking_by_tap",seeking_by_dragging:"seeking_by_dragging",seeking_by_swipe:"seeking_by_swipe",seeking_by_keyboard_press:"seeking_by_keyboard_press",seeking_by_keyboard_hold:"seeking_by_keyboard_hold",seeking_by_keyboard_number_keys:"seeking_by_keyboard_number_keys",seeking_by_progress_bar_dragging:"seeking_by_progress_bar_dragging",seeking_by_progress_bar_clicking:"seeking_by_progress_bar_clicking",seeking_by_double_tap_forward:"seeking_by_double_tap_forward",seeking_by_double_tap_backward:"seeking_by_double_tap_backward",seeking_double_tap_change_right_left:"seeking_double_tap_change_right_left",seeking_double_tap_change_top_down:"seeking_double_tap_change_top_down",mute_on:"mute_on",mute_off:"mute_off",mute_by_button_on:"mute_by_button_on",mute_by_button_off:"mute_by_button_off",player_play:"player_play",player_play_autoplay:"player_play_autoplay",player_play_failed:"player_play_failed",player_play_video_promise_not_supported:"player_play_video_promise_not_supported",player_play_by_poster:"player_play_by_poster",player_play_by_small_button:"player_play_by_small_button",player_play_by_center_button:"player_play_by_center_button",player_play_by_center_hidden_button:"player_play_by_center_hidden_button",play_success:"play_success",play_fail:"play_fail",player_pause:"player_pause",player_pause_by_small_button:"player_pause_by_small_button",player_pause_by_center_hidden_button:"player_pause_by_center_hidden_button",swap_hands_by_button_right:"swap_hands_by_button_right",swap_hands_by_button_left:"swap_hands_by_button_left",change_orientation_landscape:"change_orientation_landscape",change_orientation_portrait:"change_orientation_portrait",vr_mode_on:"vr_mode_on",chromecast_button_shown:"chromecast_button_shown",chromecast_button_click:"chromecast_button_click",chromecast_libs_load_success:"chromecast_libs_load_success",chromecast_libs_load_error:"chromecast_libs_load_error",chromecast_framework_lib_load_error:"chromecast_framework_lib_load_error",chromecast_play_success:"chromecast_play_success",chromecast_play_error:"chromecast_play_error",airplay_off:"airplay_off",airplay_on:"airplay_on",settings_av1_on:"settings_av1_on",settings_av1_off:"settings_av1_off",link_sponsored_shown:"link_sponsored_shown",link_sponsored_click:"link_sponsored_click",subtitles_load_success:"subtitles_load_success",subtitles_load_failed:"subtitles_load_failed",subtitles_shown:"subtitles_shown",subtitles_by_button_on:"subtitles_by_button_on",subtitles_by_button_off:"subtitles_by_button_off",settings_subtitles_off:"settings_subtitles_off",settings_subtitles_on:"settings_subtitles_on"},ed=class{init(){this.core.on(f.Z.PLAYER_ON_INIT,this.uiStats.bind(this,eu.player_init)),this.core.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this),this.core.on(f.Z.OVERLAY_MENU_TAB_OPEN,this.onOverlayMenuTabOpen,this),this.core.on(f.Z.SHARE_MENU_OPEN,this.uiStats.bind(this,eu.share_open)),this.core.on(f.Z.OVERLAY_ELEMENT_CLICK,this.onOverlayElementClick,this),this.core.on(f.Z.HOVER_ELEMENT_CLICK,this.onHoverElementClick,this),this.core.on(f.Z.RELATED_REFRESH_CLICK,this.uiStats.bind(this,eu.related_refresh)),this.core.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.onFullscreenChange.bind(this)),this.core.on(f.Z.PLAYER_TOGGLE_LARGEMODE,this.onLargeModeToggle,this),this.core.on(f.Z.CONTROLS_PREVIEW_CLICK,this.uiStats.bind(this,eu.preview)),this.core.on(f.Z.CONTROLS_DOWNLOAD_CLICK,this.uiStats.bind(this,eu.downloads)),this.core.on(f.Z.CONTROLS_FAVORITE_CLICK,this.uiStats.bind(this,eu.favorite)),this.core.on(f.Z.REPORT_ISSUE_CLICK,this.uiStats.bind(this,eu.report_click)),this.core.on(f.Z.SETTINGS_MENU_OPEN,this.uiStats.bind(this,eu.settings_open)),this.core.on(f.Z.SETTINGS_MENU_TOGGLED,this.onSettingsMenuToggled,this),this.core.on(f.Z.PLAYER_SET_AUTOPLAY,this.uiStats.bind(this,eu.settings_autoplay)),this.core.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.uiStats.bind(this,eu.settings_speed)),this.core.on(f.Z.PLAYER_SET_PREVIEW,this.uiStats.bind(this,eu.settings_preview)),this.core.on(f.Z.PLAYER_SET_QUALITY,this.uiStats.bind(this,eu.settings_quality)),this.core.on(f.Z.SUBSCRIBE_INIT,this.uiStats.bind(this,eu.subscribe_init)),this.core.on(f.Z.SUBSCRIBE_SHOW,this.uiStats.bind(this,eu.subscribe_show)),this.core.on(f.Z.SUBSCRIBE_CLICK_LOGO,this.uiStats.bind(this,eu.subscribe_click_logo)),this.core.on(f.Z.SUBSCRIBE_CLICK_SUBSCRIBE,this.uiStats.bind(this,eu.subscribe_click_subscribe)),this.core.on(f.Z.SUBSCRIBE_CLICK_UNSUBSCRIBE,this.uiStats.bind(this,eu.subscribe_click_unsubscribe)),this.core.on(f.Z.DOWNLOAD_BUTTON_CLICK,this.uiStats.bind(this,eu.download_click)),this.core.on(f.Z.LINK_CLICK,this.uiStats.bind(this,eu.link_click)),this.core.on(f.Z.CONTROLS_FULLSCREEN_CLICK,this.uiStats.bind(this,eu.fullscreen_click)),this.core.on(f.Z.PLAYER_ON_SWIPE_START,this.uiStats.bind(this,eu.seeking_by_swipe)),this.core.on(f.Z.VR_MODE_ENABLE,this.uiStats.bind(this,eu.vr_mode_on)),this.core.on(f.Z.PLAYER_ORIENTATION_SET_FULLSCREEN,e=>{"in"===e?this.uiStats(eu.fullscreen_in_by_orientation):"out"===e&&this.uiStats(eu.fullscreen_out_by_orientation)}),this.core.on(f.Z.PLAYER_FULLSCREEN_FAILED,this.uiStats.bind(this,eu.fullscreen_failed)),this.core.on(f.Z.FULLSCREEN_BUTTON_CLICK,e=>{"in"===e?this.uiStats(eu.fullscreen_in_by_button):"out"===e&&this.uiStats(eu.fullscreen_out_by_button)}),this.core.on(f.Z.MUTE_CLICK,e=>{"on"===e?this.uiStats(eu.mute_by_button_on):"off"===e&&this.uiStats(eu.mute_by_button_off)}),this.core.on(f.Z.DOUBLE_TAP,e=>{"forward"===e?this.uiStats(eu.seeking_by_double_tap_forward):"backward"===e&&this.uiStats(eu.seeking_by_double_tap_backward),this.seekedByDoubleTap=!0}),this.core.on(f.Z.FULLSCREEN_SWIPE,this.uiStats.bind(this,eu.fullscreen_out_by_swipe)),this.core.on(f.Z.PLAYER_ON_PAUSE,this.uiStats.bind(this,eu.player_pause)),this.core.on(f.Z.POSTER_CLICK,this.uiStats.bind(this,eu.player_play_by_poster)),this.core.on(f.Z.PLAY_SMALL_BUTTON_CLICK,e=>{"play"===e?this.uiStats(eu.player_play_by_small_button):"pause"===e&&this.uiStats(eu.player_pause_by_small_button)}),this.core.on(f.Z.PLAY_CENTER_BUTTON_CLICK,e=>{"play"===e?this.uiStats(eu.player_play_by_center_button):"play-hidden"===e?this.uiStats(eu.player_play_by_center_hidden_button):"pause-hidden"===e&&this.uiStats(eu.player_pause_by_center_hidden_button)}),this.core.on(f.Z.SWAP_HANDS_BUTTON_CLICK,e=>{"right"===e?this.uiStats(eu.swap_hands_by_button_right):"left"===e&&this.uiStats(eu.swap_hands_by_button_left)}),this.core.on(f.Z.PLAYER_ON_CHANGE_ORIENTATION,e=>{"landscape"===e?this.uiStats(eu.change_orientation_landscape):"portrait"===e&&this.uiStats(eu.change_orientation_portrait)}),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,e=>{e.target.muted||e.target.volume<.02?this.uiStats(eu.mute_on):this.uiStats(eu.mute_off)}),y.on(f.Z.PLAYER_ON_SEEKING,()=>{!R.get("ads")&&this.seekingTimes++}),y.on(f.Z.PLAYER_ON_SEEKED,()=>{this.core.capabilities.idevice&&(this.seekingTimes>1?this.uiStats(eu.seeking_by_dragging):this.seekedByDoubleTap||this.uiStats(eu.seeking_by_tap),this.seekedByDoubleTap=!1,this.seekingTimes=0)}),this.core.once(f.Z.PLAYER_PLAY,()=>{this.uiStats(eu.player_play),this.core.on(f.Z.PLAYER_ON_PLAY,()=>{this.uiStats(eu.player_play),!this.core.capabilities.idevice&&this.seekingTimes>0&&(this.seekingTimes>1?this.uiStats(eu.seeking_by_dragging):this.seekedByDoubleTap||this.uiStats(eu.seeking_by_tap),this.seekingTimes=0,this.seekedByDoubleTap=!1)})}),this.core.on(f.Z.PLAYER_ON_PLAYING,()=>{!this.core.capabilities.idevice&&this.seekingTimes>0&&(this.seekingTimes>1?this.uiStats(eu.seeking_by_dragging):this.seekedByDoubleTap||this.uiStats(eu.seeking_by_tap),this.seekingTimes=0,this.seekedByDoubleTap=!1)}),this.core.on(f.Z.STATISTICS_UI,this.uiStats.bind(this));let e=y.on(f.Z.PLAYER_PLAY_FAIL,e=>{this.uiStats(eu.player_play_failed,{"str.message":e})});y.once(f.Z.PLAYER_PLAY_AUTOPLAY,()=>{this.uiStats(eu.player_play_autoplay),y.off(f.Z.PLAYER_PLAY_FAIL,e);let t=y.once(f.Z.PLAYER_PLAY_FAILED,e=>{let t=`${e}`;t.includes("play() failed")?this.uiStats(eu.player_play_failed,{"str.message":"noUserInteraction"}):this.uiStats(eu.player_play_failed,{"str.message":t})});y.once(f.Z.PLAYER_PLAY_SUCCESS,()=>{y.off(f.Z.PLAYER_PLAY_FAILED,t)})}),y.once(f.Z.PLAYER_PLAY_VIDEO_PROMISE_NOT_SUPPORTED,()=>{this.uiStats(eu.player_play_video_promise_not_supported)}),y.on(f.Z.PLAYER_WIRELESS_CHANGED,()=>{var e;let t=(null===(e=this.core.videoElement)||void 0===e?void 0:e.webkitCurrentPlaybackTargetIsWireless)?eu.airplay_on:eu.airplay_off;this.uiStats(t)}),y.on(f.Z.PLAYER_SET_DOUBLE_TAP_MODE,e=>{let{seeking_double_tap_change_top_down:t,seeking_double_tap_change_right_left:i}=eu;this.uiStats("top-down"===e?t:i)}),y.on(f.Z.PLAYER_PLAY_SUCCESS,()=>{this.uiStats(eu.play_success)}),y.on(f.Z.PLAYER_SET_AV1_OPTION,e=>{e?this.uiStats(eu.settings_av1_on):this.uiStats(eu.settings_av1_off)}),y.on(f.Z.PLAYER_LINK_SPONSORED_SHOWN,()=>{this.uiStats(eu.link_sponsored_shown)}),y.on(f.Z.PLAYER_LINK_SPONSORED_CLICK,()=>{this.uiStats(eu.link_sponsored_click)})}onPlayerEnded(){R.get("ads_playing")||this.uiStats(eu.video_end)}onOverlayMenuTabOpen(e){let t=null;switch(e){case"xplayer-related":t=eu.related_open;break;case"top-rated":t=eu.top_rated_open;break;case"more-from-user":t=eu.from_user_open;break;case"share":t=eu.share_open}t&&this.uiStats(t)}onOverlayElementClick(e){let t=null;switch(e){case"xplayer-related":t=eu.related_click;break;case"top-rated":t=eu.top_rated_click;break;case"live-sex":t=eu.live_sex_click;break;case"more-from-user":t=eu.from_user_click;break;case"share":t=eu.share_click;break;case"join":t=eu.join_now_click;break;case"download":t=eu.download_click;break;case"more-videos":t=eu.more_videos_click;break;case"related-more":t=eu.related_more_click;break;case"related-small":t=eu.related_click_small;break;case"download-small":t=eu.download_click_small;break;case"share-small":t=eu.share_click_small;break;case"live-sex-small":t=eu.live_sex_click_small;break;case"more-videos-small":t=eu.more_videos_click_small}t&&this.uiStats(t)}onHoverElementClick(e){let t=null;switch(e){case"logo":t=eu.logo_click;break;case"title":t=eu.title_click;break;case"join":t=eu.join_click;break;case"producer":t=eu.producer_click}t&&this.uiStats(t)}onFullscreenChange(e){let t;t=this.core.capabilities.idevice?"webkitbeginfullscreen"===e.type?eu.fullscreen_in:eu.fullscreen_out:document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?eu.fullscreen_in:eu.fullscreen_out,this.uiStats(t)}onLargeModeToggle(e){this.uiStats(e?eu.large_mode_in:eu.large_mode_out)}onSettingsMenuToggled(e){e&&this.uiStats(eu.settings_open)}getOrientation(){return void 0===window.orientation?null:180===window.orientation||0===window.orientation?"portrait":"landscape"}getScreenSize(){return"landscape"===this.getOrientation()?`${window.screen.height}x${window.screen.width}`:`${window.screen.width}x${window.screen.height}`}uiStats(e,t=null){var i,n,s,r;let o={log:"xplayer_ui",event:e,"str.orientation":this.getOrientation(),"str.screen_size":this.getScreenSize(),"str.firstEvent":this.sentEvents[e]?"false":"true","str.fullscreen":R.get("fullscreen"),"str.doubleTapSeekMode":this.core.settings.doubleTapMode,"str.muted":this.core.videoElement.muted||this.core.videoElement.volume<.02?"true":"false","str.has_ads":this.options.hasAds,"str.lefty_controls":this.core.settings.lefty,"str.hasSubtitles":(null===(r=this.core)||void 0===r?void 0:null===(s=r.pluginOptions)||void 0===s?void 0:null===(n=s.subtitles)||void 0===n?void 0:null===(i=n.tracks)||void 0===i?void 0:i.length)>0?"true":"false"};if(this.sentEvents[e]=e,this.options.addFields&&(o=(0,m._)({},o,this.options.addFields)),(null==t?void 0:t["str.message"])&&(o=(0,m._)({},o,t)),null==t?void 0:t.fromMain){let{fromMain:e}=t;o=(0,m._)({},o,function(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}(t,["fromMain"]))}if(this.debug){console.warn(o);return}A.ajax("GET",eo.getCollectorUrl(),o)}reset(){this.sentEvents={},this.seekingTimes=0,this.seekedByDoubleTap=!1}constructor(e,t,i,n){this.core=e,this.videoElement=t,this.options=i||{},this.debug=n,this.sentEvents={},this.seekingTimes=0,this.seekedByDoubleTap=!1,this.init()}},em=class{init(){this.videoElement.addEventListener("timeupdate",this.onTimeUpdateBind)}onTimeUpdate(){if(R.get("ads")||(this.threshold||(this.threshold=this.videoElement.duration<=69?Math.floor(this.videoElement.duration):(.35*Math.log(this.videoElement.duration/60-.15)+1.15)*60),this.currentPosition=parseInt(this.videoElement.currentTime,10),this.lastPosition===this.currentPosition))return;let e=this.currentPosition-this.lastPosition;if(this.watchTime+=e<=0||e>1?0:e,this.lastPosition=this.currentPosition,this.watchTime>this.threshold){if(this.eventSent)return;this.eventSent=!0,y.emit(f.Z.VIEW_SUCCESS),this.videoElement.removeEventListener("timeupdate",this.onTimeUpdateBind)}}reset(){this.currentPosition=0,this.lastPosition=0,this.watchTime=0,this.eventSent=!1,this.threshold=null}constructor(e,t,i,n){this.core=e,this.videoElement=t,this.options=i||{},this.debug=n,this.currentPosition=0,this.lastPosition=0,this.watchTime=0,this.eventSent=!1,this.threshold=null,this.onTimeUpdateBind=this.onTimeUpdate.bind(this),this.init()}},ep=class{init(){this.options.adaptiveStats&&(this.adaptiveStats=new ea(this.core,this.videoElement,this.options,this.debug)),(this.options.buffStats||this.options.buffStats2)&&(this.viewSuccessStats=new em(this.core,this.videoElement,this.options,this.debug)),this.options.buffStats&&(this.bufferingStats=new el(this.core,this.videoElement,this.options,this.debug)),this.options.buffStats2&&new eh(this.core,this.videoElement,this.options,this.debug),this.options.errorStats&&(this.errorStats=new ec(this.core,this.videoElement,this.options,this.debug)),this.options.uiStats&&(this.uiStats=new ed(this.core,this.videoElement,this.options,this.debug))}reset(){this.adaptiveStats&&this.adaptiveStats.reset(),this.viewSuccessStats&&this.viewSuccessStats.reset(),this.bufferingStats&&this.bufferingStats.reset(),this.errorStats&&this.errorStats.reset(),this.uiStats&&this.uiStats.reset()}constructor(e,t,i,n){var s;this.core=e,this.videoElement=t,this.options=(null==i?void 0:i.statistics)||{},this.debug=n,this.options=Object.assign(this.options,{hasAds:!er(null===(s=i.ads)||void 0===s?void 0:s.vastUrls)}),this.init()}},eE=class extends en{createVideoElement(){let e=super.createVideoElement();return new ep(this,e,this.pluginOptions,this.options.debug),e}};let e_="overlay-menu-opened",ev="xplayer-aftershot-fullscreen";var ef=class{init(){var e;this.render(),this.overlayMenuToggleEventId=y.on(f.Z.OVERLAY_MENU_TOGGLE,this.toggle,this),this.playerOnPlayEventId=y.on(f.Z.PLAYER_ON_PLAY,this.onPlayerPlay,this),this.playerOnEndedEventId=y.on(f.Z.PLAYER_ON_ENDED,this.toggle,this),y.once(f.Z.AFTERSHOT_DESTROY,this.destroy,this),y.on(f.Z.AFTERSHOT_RENDERED,this.toggleCompanion.bind(this)),y.on(f.Z.AFTERSHOT_CLOSE,this.toggleCompanion.bind(this)),this.isNewMobileDesign2&&y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.addAftershotFullscreenClass.bind(this)),(null===(e=this.options)||void 0===e?void 0:e.exitFullscreenOnAftershot)&&y.on(f.Z.PLAYER_ON_ENDED,()=>{R.get("fullscreen")&&y.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN)})}removeAllChildNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}toggleCompanion(){var e,t,i;if(!(null===(t=this.core)||void 0===t?void 0:null===(e=t.capabilites)||void 0===e?void 0:e.idevice)){if(this.aftershotContainer||(this.aftershotContainer=document.querySelector("#xplayer-aftershot-companion")),this.companion||(this.companion=document.querySelector(".xplayer-ads-block-companion")),this.companionContainer||(this.companionContainer=null===(i=this.companion)||void 0===i?void 0:i.parentNode),!this.aftershotContainer||!this.companion)return;this.core.isFullscreen()&&!this.companionMovedToAftershot?(this.companionMovedToAftershot=!0,this.aftershotContainer.appendChild(this.companion),c.addClass(this.companion,"aftershot-inner-companion"),this.fullscreenChangeEventId=y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.toggleCompanion.bind(this))):this.companionMovedToAftershot&&(this.companionContainer.appendChild(this.companion),c.removeClass(this.companion,"aftershot-inner-companion"),y.off(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.fullscreenChangeEventId),this.companionMovedToAftershot=!1)}}addAftershotFullscreenClass(){this.core.isFullscreen()?c.addClass(this.core.element,ev):c.removeClass(this.core.element,ev)}onPlayerPlay(){this.shown&&this.core.emit(f.Z.OVERLAY_MENU_TOGGLE)}toggle(){if(R.get("ads")&&y.once(f.Z.ADS_STARTED,this.hide,this),!(R.get("ads_playing")||R.get("swiping"))){if(this.element||this.render(),this.shown){this.core.emit(f.Z.USER_ACTION_UNBLOCK),this.hide();return}this.core.emit(f.Z.USER_ACTION_BLOCK),this.show()}}render(){this.element=document.createElement("div"),this.element.className="xp-aftershot",this.core.element.appendChild(this.element)}show(){this.shown=!0,this.core.emit(f.Z.PLAYER_PAUSE),c.addClass(this.core.element,e_)}hide(){this.shown&&(this.shown=!1,c.removeClass(this.core.element,e_),y.emit(f.Z.AFTERSHOT_SEND_UI_CLOSE))}destroy(){y.off(f.Z.OVERLAY_MENU_TOGGLE,this.overlayMenuToggleEventId),y.off(f.Z.PLAYER_ON_PLAY,this.playerOnPlayEventId),y.off(f.Z.PLAYER_ON_ENDED,this.playerOnEndedEventId),c.removeElement(this.element),c.removeClass(this.core.element,e_)}constructor(e,t){var i;this.core=e,this.options=(null==t?void 0:t.aftershot)||{},this.isNewMobileDesign2=null==t?void 0:null===(i=t.newMobileDesign2)||void 0===i?void 0:i.enabled,this.shown=!1,this.overlayMenuToggleEventId=null,this.playerOnPlayEventId=null,this.playerOnEndedEventId=null,this.companionMovedToAftershot=!1,this.companionContainer=null,this.companion=null,this.aftershotContainer=null,this.fullscreenChangeEventId=null,this.init()}},eg=class{init(){this.render()}render(){this.options.top&&(this.topElement=document.createElement("div"),this.topElement.className="xplayer-background-top",this.core.element.appendChild(this.topElement)),this.bottomElement=document.createElement("div"),this.bottomElement.className="xplayer-background-bottom",this.core.element.appendChild(this.bottomElement)}constructor(e,t){this.core=e,this.options=t.background||{},this.init()}},ey=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("a"),this.element.className="play",this.element.innerHTML="<div class='play-inner'></div>"}attachEvents(){this.element.addEventListener("click",this.onPlayClick.bind(this)),y.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this),y.on(f.Z.PLAYER_ON_PLAYING,this.togglePlayButton,this),y.on(f.Z.PLAYER_ON_PAUSE,this.togglePlayButton,this),y.on(f.Z.CONTROLS_RESET,this.setButtonToPlay,this),y.on(f.Z.REMOTE_PLAYER_STATE_CHANGED,this.togglePlayButton,this)}onPlayClick(e){R.get("playing")?(e.preventDefault(),y.emit(f.Z.PLAYER_PAUSE)):this.gotoPageUrlOnReplay||(e.preventDefault(),y.emit(f.Z.USER_SEEK_SET_CURRENT_TIME,R.get("currentTime")),y.emit(f.Z.PLAYER_PLAY))}onPlayerEnded(){R.get("ads_playing")||this.setButtonToReplay()}togglePlayButton(){R.get("playing")?this.setButtonToPause():this.setButtonToPlay()}setButtonToPause(){this.element.className="play pause",this.setReplayButton(!1)}setButtonToPlay(){this.element.className="play",this.setReplayButton(!1)}setButtonToReplay(){this.element.className="play replay",this.setReplayButton(!0)}setReplayButton(e){this.replay=e,this.gotoPageUrlOnReplay?(this.element.setAttribute("href",this.options.pageURL),this.element.setAttribute("target","_blank")):(this.element.setAttribute("href","#"),this.element.removeAttribute("target"))}get gotoPageUrlOnReplay(){return this.replay&&this.options.gotoPageUrlOnReplay&&this.options.pageURL}constructor(e,t={}){return this.core=e,this.options=t,this.replay=!1,this.init(),this.element}};let eS="toggled";var eb=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="volume-controls",this.element.innerHTML=`<div href="#" class="volume"></div><span class="volume-bar"><span class="bar">
    <span class="filler" style="width: 100%;"></span><span class="handle" style="left: 100%;"></span></span></span>`,this.volumeElement=this.element.getElementsByClassName("volume")[0],this.volumeBarElement=this.element.getElementsByClassName("volume-bar")[0],this.fillerElement=this.element.getElementsByClassName("filler")[0],this.handleElement=this.element.getElementsByClassName("handle")[0];let e=this.core.capabilities.mobile?!this.core.settings.muted:this.core.settings.volume;this.setVolumeElementVolume(e),this.setVolumeBarVolume(this.core.settings.volume),this.setVolumeTooltip(this.core.settings.volume)}attachEvents(){this.core.capabilities.mobile?this.attachTouchEvents():this.attachMouseEvents(),this.core.on(f.Z.PLAYER_SET_VOLUME,this.onPlayerVolumeChange,this)}attachMouseEvents(){this.element.addEventListener("mouseenter",this.onElementMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.volumeElement.addEventListener("click",this.onVolumeElementClick.bind(this)),this.volumeBarElement.addEventListener("mousedown",this.onVolumeBarElementMouseDown.bind(this)),this.core.element.addEventListener("mousemove",this.onCoreElementMouseMove.bind(this)),this.core.element.addEventListener("mouseup",this.onCoreElementMouseUp.bind(this)),this.core.element.addEventListener("mouseleave",this.onCoreElementMouseUp.bind(this))}attachTouchEvents(){this.volumeElement.addEventListener("touchstart",this.onVolumeElementTouchStart.bind(this))}onElementMouseEnter(){this.blockMouseEvents||this.showVolumeBar()}onElementMouseLeave(){this.seeking||this.seeked||this.hideVolumeBar()}onVolumeElementTouchStart(){this.core.videoElement.muted=!this.core.videoElement.muted,this.core.videoElement.volume=!this.core.videoElement.muted,this.setVolumeElementVolume(!this.core.videoElement.muted)}onVolumeElementClick(e){let t;this.blockMouseEvents||(e.preventDefault(),0===e.button&&(this.core.videoElement.volume<.02||this.core.videoElement.muted?t=this.savedVolume||1:(this.savedVolume=this.core.videoElement.volume,t=0),this.core.emit(f.Z.PLAYER_SET_VOLUME,t)))}onVolumeBarElementMouseDown(e){e.preventDefault(),0===e.button&&(this.seeking=!0,this.seeked=!0,this.setVolumeBarEventVolume(e))}onCoreElementMouseMove(e){this.seeking&&this.setVolumeBarEventVolume(e)}onCoreElementMouseUp(e){if(!this.seeking){this.checkIfVolumeBarNeedsHide(e)&&(this.seeked=!1,this.hideVolumeBar());return}this.seeking=!1}setVolumeBarEventVolume(e){let t=((e.clientX-c.findElPosition(this.volumeBarElement).left)/this.volumeBarElement.offsetWidth).toFixed(2);this.core.emit(f.Z.PLAYER_SET_VOLUME,t)}showVolumeBar(){c.addClass(this.element,eS)}hideVolumeBar(){c.removeClass(this.element,eS)}checkIfVolumeBarNeedsHide(e){return!(e.target===this.handleElement||e.target===this.volumeBarElement||e.target===this.volumeElement||e.target===this.fillerElement||e.target===this.element)}onPlayerVolumeChange(e){let t;if(this.blockMouseEvents){this.blockMouseEvents=!1;return}t=e<0?0:e>1?1:e,this.setVolumeElementVolume(t),this.setVolumeBarVolume(t),this.setVolumeTooltip(t),this.showVolumeBar()}setVolumeElementVolume(e){e<.02?this.volumeElement.className="volume mute":e<.25?this.volumeElement.className="volume quarter":e<.5?this.volumeElement.className="volume half":e<.75?this.volumeElement.className="volume third":this.volumeElement.className="volume"}setVolumeBarVolume(e){this.handleElement.style.left=`${100*e}%`,this.fillerElement.style.width=`${100*e}%`}setVolumeTooltip(e){let t=e>0?"Disable sound":"Enable sound";this.volumeElement.setAttribute("data-xp-tooltip",t),this.core.emit(f.Z.TOOLTIP_UPDATE,t)}constructor(e){return this.core=e,this.seeking=!1,this.seeked=!1,this.savedVolume=1,this.blockMouseEvents=!1,this.init(),this.element}},eT=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="timing",this.element.innerHTML='<span class="played">00:00</span><span class="separator">/</span><span class="eta">00:00</span>',this.playedElement=this.element.getElementsByClassName("played")[0],this.etaElement=this.element.getElementsByClassName("eta")[0],this.etaElement.childNodes[0].nodeValue=d.parseTime(R.get("duration"),R.get("duration")>=3600)}attachEvents(){y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.onPlayerTimeUpdate,this),y.on(f.Z.PLAYER_SET_CURRENT_TIME,this.onPlayerSetCurrentTime,this),y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.onPlayerDurationChange,this),y.on(f.Z.PROGRESS_BAR_HANDLER_MOVE,this.setCurrentTime,this),y.on(f.Z.PLAYER_SET_SOURCE,this.onPlayerSetSource,this),y.on(f.Z.PLAYER_ON_LOAD_META_DATA,this.onPlayerLoadMetaData,this),y.once(f.Z.NO_USER_ACTION,this.onNoUserAction,this),y.on(f.Z.CONTROLS_RESET,this.onControlsReset,this),y.once(f.Z.PLAYER_PLAY,this.unblockTiming,this)}onPlayerTimeUpdate(e){if(R.get("chromecast")){if(R.get("remoteSourceLoading"))return;this.playedElement.textContent=d.parseTime(e.target.currentTime,e.target.duration>=3600);return}if(!0===this.blockTimeUpdate||!0===this.timingHidden)return;let t=d.parseTime(e.target.currentTime,e.target.duration>=3600);t!==this.lastValue&&(this.lastValue=t,this.playedElement.textContent=t)}onPlayerSetCurrentTime(e){let t;t=e<0?0:e>this.core.videoElement.duration?this.core.videoElement.duration:e,this.setCurrentTime(t)}onPlayerDurationChange(e){this.isTimingBlocked||this.setDuration(e.target.duration)}setDuration(e){this.etaElement.childNodes[0].nodeValue=d.parseTime(e,R.get("duration")>=3600)}unblockTiming(){this.isTimingBlocked=!1}setCurrentTime(e){this.playedElement.childNodes[0].nodeValue=d.parseTime(e,R.get("duration")>=3600)}onPlayerSetSource(){"standard"===this.core.sourceController.type&&(this.blockTimeUpdate=!0)}onPlayerLoadMetaData(){this.blockTimeUpdate=!1}onUserAction(){this.timingHidden=!1,this.core.once(f.Z.NO_USER_ACTION,this.onNoUserAction.bind(this))}onNoUserAction(){this.timingHidden=!0,this.core.once(f.Z.USER_ACTION,this.onUserAction.bind(this))}onControlsReset(e){this.setDuration(this.core.options.duration),this.setCurrentTime(e)}constructor(e){return this.core=e,this.lastValue=0,this.isTimingBlocked=!0,this.init(),this.element}},eA=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="fullscreen-button",this.element.setAttribute("data-xp-tooltip","Fullscreen"),y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.toggleTooltip.bind(this))}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(){this.core.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN)}toggleTooltip(){let e="Fullscreen"===this.element.getAttribute("data-xp-tooltip")?"Exit Fullscreen":"Fullscreen";this.core.emit(f.Z.TOOLTIP_UPDATE,e),this.element.setAttribute("data-xp-tooltip",e)}constructor(e,t){return this.core=e,this.options=t||{},this.init(),this.element}};let eL="xplayer-large-mode";var ek=class{init(){this.render(),this.largeModeEnabled&&this.toggleLargeModeClass(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="large-mode",this.element.setAttribute("data-xp-tooltip",this.largeModeEnabled?"Exit Large mode":"Large mode")}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(){this.toggleLargeModeClass(),"function"==typeof this.options.callback&&this.options.callback(),this.core.emit(f.Z.PLAYER_TOGGLE_LARGEMODE,this.enabled),this.core.emit(f.Z.PROGRESS_BAR_RESIZE)}toggleLargeModeClass(){c.hasClass(this.core.element,eL)?(this.element.setAttribute("data-xp-tooltip","Enter large mode"),c.removeClass(this.core.element,eL),this.enabled=!1):(this.element.setAttribute("data-xp-tooltip","Exit large mode"),c.addClass(this.core.element,eL),this.enabled=!0)}constructor(e,t){if(this.options=t.largeMode||null,!this.options)return null;return this.core=e,this.largeModeEnabled=this.options.enabled||!1,this.enabled=!1,this.init(),this.element}};let eC="settings";var eR=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=eC,this.element.innerHTML="<div class='settings-inner'></div>",this.element.setAttribute("data-xp-tooltip","Settings"),this.core.sourceController.ready?c.addClass(this.element,this.core.sourceController.getType(this.core.sourceController.getCurrentQuality())):y.once(f.Z.SOURCE_CONTROLLER_READY,()=>{c.addClass(this.element,this.core.sourceController.getType(this.core.sourceController.getCurrentQuality()))},this),this.core.on(f.Z.SETTINGS_MENU_TOGGLED,this.toggleTooltip,this)}attachEvents(){this.element.addEventListener("click",this.elementOnClick.bind(this)),this.core.on(f.Z.SOURCE_TYPE_CHANGE,this.onSourceTypeChange,this)}elementOnClick(){this.core.emit(f.Z.SETTINGS_MENU_TOGGLE)}toggleTooltip(e){let t=e?"":"Settings";this.core.emit(f.Z.TOOLTIP_UPDATE,t),this.element.setAttribute("data-xp-tooltip",t)}onSourceTypeChange(){let e=this.core.sourceController.getType(this.core.sourceController.getCurrentQuality());this.element.className=eC,e&&c.addClass(this.element,e)}constructor(e){return this.core=e,this.init(),this.element}};let eO="xh-helper-hidden";var eP=class{init(){window.WebKitPlaybackTargetAvailabilityEvent&&!this.options.disable&&(this.render(),this.attachEvents())}onAirplayAvailabilityChanged(e){this.available="available"===e.availability,this.available?this.showElement():this.hideElement()}render(){this.element=document.createElement("div"),this.element.className=`airplay-button ${eO}`}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this)),this.core.videoElement.addEventListener("webkitplaybacktargetavailabilitychanged",this.onAirplayAvailabilityChanged.bind(this))}onElementClick(){if(!R.get("sourceLoaded")){y.once(f.Z.PLAYER_ON_LOADED_DATA,this.onElementClick,this),y.emit(f.Z.PLAYER_PLAY);return}this.core.videoElement.webkitShowPlaybackTargetPicker()}hideElement(){c.addClass(this.element,eO)}showElement(){c.removeClass(this.element,eO)}constructor(e,t){return this.core=e,this.options=t.airplay||{},this.available=null,this.init(),this.element}},ew=()=>'<span class="playback-rate-inner"></span>',eN=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="playback-rate",this.element.innerHTML=ew(),this.rateElement=this.element.getElementsByClassName("playback-rate-inner")[0],this.setRate()}attachEvents(){y.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.setRate,this),this.element.addEventListener("click",()=>y.emit(f.Z.PLAYBACK_RATE_LIST_TOGGLE))}setRate(){"1"!==R.get("playbackRate")?this.rateElement.textContent=`${R.get("playbackRate")}x`:this.rateElement.textContent=""}constructor(e){return this.core=e,this.init(),this.element}},eI="xh-helper-hidden",eD=o(function e(){s(this,e),this.init()},[{key:"init",value:function(){this.element=document.createElement("div"),this.castImage=document.createElement("div"),this.element.className="xplayer-chromecast-button ".concat(eI),this.castImage.className="xplayer-chromecast-button__cast-image",this.element.appendChild(this.castImage),this.attachEvents()}},{key:"chromecastUserRequest",value:function(){y.emit(f.Z.REMOTE_PLAYER_USER_REQUEST),y.emit(f.Z.STATISTICS_UI,eu.chromecast_button_click)}},{key:"switchButtonToReal",value:function(){this.element.removeEventListener("click",this.chromecastUserRequest),this.element.className+=" google-chromecast-image",this.element.innerHTML='<google-cast-launcher id="xplayer-cast-launcher"></google-cast-launcher>'}},{key:"showCastButton",value:function(){c.removeClass(this.element,eI),y.emit(f.Z.STATISTICS_UI,eu.chromecast_button_shown)}},{key:"attachEvents",value:function(){this.element.addEventListener("click",this.chromecastUserRequest),y.once(f.Z.REMOTE_PLAYER_CHROMECAST_LOADED,this.switchButtonToReal.bind(this)),y.once(f.Z.REMOTE_PLAYER_DEVICE_AVAILABLE,this.showCastButton,this)}},{key:"getElement",value:function(){return this.element}}]),eU="subtitles-button",eM="".concat(eU,"--enabled"),eY="".concat(eU,"--disabled"),ex="data-xp-tooltip",eZ="Show subtitles",eB="Hide subtitles",eG="xh-helper-hidden",eV=o(function e(t,i){s(this,e),this.core=t,this.options=i,this.init()},[{key:"init",value:function(){var e=this;this.render(),y.once(f.Z.SUBTITLES_READY,function(t){if(t){e.element.classList.remove(eG);var i=e.core.settings.subtitlesStateByButton,n="off"!==t.lang;("on"===i||!i)&&n&&e.on(),e.unblock(),e.attachEvents()}})}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className=eU,this.element.classList.add(eG),this.element.classList.add(eY),this.element.setAttribute(ex,eZ)}},{key:"attachEvents",value:function(){this.element.addEventListener("click",this.onElementClick.bind(this)),y.on(f.Z.SUBTITLES_SET_LANG,this.onSetTrack.bind(this)),y.on(f.Z.SUBTITLES_NO_AVAILABLE_TRACKS,this.hideButton.bind(this))}},{key:"unblock",value:function(){this.element.classList.remove(eY)}},{key:"onSetTrack",value:function(e){"off"===e.lang?this.off():this.on()}},{key:"off",value:function(){c.removeClass(this.element,eM),this.element.setAttribute(ex,eZ),y.emit(f.Z.TOOLTIP_UPDATE,eZ)}},{key:"on",value:function(){c.addClass(this.element,eM),this.element.setAttribute(ex,eB),y.emit(f.Z.TOOLTIP_UPDATE,eB)}},{key:"hideButton",value:function(){this.element.classList.add(eG)}},{key:"onElementClick",value:function(){c.hasClass(this.element,eY)||(c.hasClass(this.element,eM)?(y.emit(f.Z.SUBTITLES_HIDE_BUTTON_CLICK),y.emit(f.Z.SUBTITLES_STATE_BY_BUTTON,"off"),y.emit(f.Z.STATISTICS_UI,eu.subtitles_by_button_off),this.off()):(y.emit(f.Z.SUBTITLES_SHOW_BUTTON_CLICK),y.emit(f.Z.SUBTITLES_STATE_BY_BUTTON,"on"),y.emit(f.Z.STATISTICS_UI,eu.subtitles_by_button_on),this.on()))}},{key:"getElement",value:function(){return this.element}}]),eH="left-block",eF=o(function e(t,i){s(this,e),this.core=t,this.options=i.controlBar||{},this.blockMouseEnter=!1,this.init()},[{key:"init",value:function(){this.render(this.loadControls()),this.attachEvents()}},{key:"loadControls",value:function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.className=eH;var i=document.createElement("div");i.className="right-block",e.appendChild(new ey(this.core)),t.appendChild(new eT(this.core)),t.appendChild(new eb(this.core));var n=new eV(this.core,this.options).getElement();i.appendChild(n);var s=new eP(this.core,this.options);s instanceof Node&&i.appendChild(s);var r=new eD().getElement();i.appendChild(r),i.appendChild(new eN(this.core)),i.appendChild(new eR(this.core));var o=new ek(this.core,this.options);return o instanceof Node&&(i.appendChild(o),i.className+=" ".concat("right-block__large")),i.appendChild(new eA(this.core)),e.appendChild(t),e.appendChild(i),e}},{key:"render",value:function(e){this.element=document.createElement("div"),this.element.className="control-bar",this.element.appendChild(e),this.core.element.appendChild(this.element)}},{key:"attachEvents",value:function(){this.element.addEventListener("mouseenter",this.onElementMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.element.addEventListener("touchend",this.onTouchEnd.bind(this))}},{key:"onElementMouseEnter",value:function(){if(this.blockMouseEnter){this.blockMouseEnter=!1;return}this.core.emit(f.Z.USER_ACTION_PAUSE)}},{key:"onElementMouseLeave",value:function(){this.core.emit(f.Z.USER_ACTION_UNPAUSE)}},{key:"onTouchEnd",value:function(){this.blockMouseEnter=!0,this.onElementMouseLeave()}},{key:"getLeftBlockElement",value:function(){var e=this.element.getElementsByClassName("left-block")[0];return e||((e=document.createElement("div")).className=eH,this.element.appendChild(e)),e}}]);let e$="xh-helper-hidden";var eW=class{init(){this.render(),this.attachEvents()}render(){this.loaderElement=document.createElement("span"),this.loaderElement.className="xplayer-loader",this.loaderElement.innerHTML=`<span class="xplayer-dots-loader">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </span>`,c.addClass(this.loaderElement,e$),this.core.element.appendChild(this.loaderElement)}attachEvents(){y.on(f.Z.PLAYER_ON_SEEKING,this.showLoader,this),y.on(f.Z.PLAYER_ON_WAITING,this.showLoader,this),y.on(f.Z.PLAYER_ON_LOAD_START,this.showLoader,this),y.on(f.Z.SHOW_LOADER,this.showLoader,this),y.on(f.Z.PLAYER_PLAY,this.unblockLoader,this),y.on(f.Z.PLAYER_ON_PLAYING,this.hideLoader,this),y.on(f.Z.PLAYER_ON_SEEKED,this.hideLoader,this),y.on(f.Z.PLAYER_ON_CAN_PLAY,this.hideLoader,this),y.on(f.Z.PLAYER_ON_ERROR,this.hideLoader,this),y.on(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE,this.blockLoader,this),y.on(f.Z.REMOTE_PLAYER_LOADING_START,()=>{this.toggleShown(!0)},this),y.on(f.Z.REMOTE_PLAYER_LOADING_END,()=>{this.toggleShown(!1)},this)}blockLoader(){this.isLoaderBlocked=!0}unblockLoader(){R.get("chromecast")||(this.isLoaderBlocked=!1)}showLoader(){this.shown||this.core.preload||this.isLoaderBlocked||R.get("chromecast")||(this.shown=!0,this.toggleShown(!0))}hideLoader(){if(this.core.capabilities.safari&&!this.timeupdateRequested){this.timeupdateRequested=y.on(f.Z.PLAYER_ON_TIMEUPDATE,()=>{if(this.timeupdateCount<2){this.timeupdateCount++;return}y.off(f.Z.PLAYER_ON_TIMEUPDATE,this.timeupdateRequested),this.toggleShown(!1),this.timeupdateRequested=null});return}this.timeupdateRequested||this.toggleShown(!1)}toggleShown(e){this.shown=e,this.shown?c.removeClass(this.loaderElement,e$):c.addClass(this.loaderElement,e$)}constructor(e){this.core=e,this.shown=!1,this.timeupdateRequested=null,this.timeupdateCount=0,this.isLoaderBlocked=!0,this.init()}};let eK=["xplayer-background-top","xplayer-background-bottom","player-add-ov","tab-content","xplayer-related","top-rated","more-from-user"];var ej=class{init(){this.attachEvents()}attachEvents(){this.core.element.addEventListener("click",this.onVideoElementClick.bind(this)),this.core.element.addEventListener("touchstart",this.onElementTouchStart.bind(this)),this.core.element.addEventListener("mousemove",this.onElementMouseMove.bind(this)),this.core.element.addEventListener("mousedown",this.onElementMouseDown.bind(this)),this.core.element.addEventListener("mouseup",this.onElementMouseUp.bind(this)),this.core.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.core.element.addEventListener("wheel",this.onElementMouseWheel.bind(this)),this.globalClickCallback=this.onGlobalClick.bind(this),document.addEventListener("click",this.globalClickCallback),this.onElementMouseMoveEventbind=this.onElementMouseMoveEvent.bind(this)}onElementTouchStart(){this.blockClick=this.core.userActionController.getHasNoUserAction()}onElementMouseMove(){this.scheduledMouseMove||(this.scheduledMouseMove=!0,this.timeoutMouseMove=setTimeout(this.onElementMouseMoveEventbind,150))}onElementMouseMoveEvent(){this.scheduledMouseMove=!1,this.core.emit(f.Z.USER_ACTION,!this.leftButtonClicked)}onElementMouseDown(e){1===e.which&&(this.leftButtonClicked=!0,this.core.emit(f.Z.USER_ACTION))}onElementMouseUp(e){1===e.which&&(this.leftButtonClicked=!1,this.core.emit(f.Z.USER_ACTION,!0))}onElementMouseLeave(e){this.core.capabilities.safari&&e.relatedTarget&&c.hasParent(e.relatedTarget,this.core.element)||(this.leftButtonClicked=!1,clearTimeout(this.timeoutMouseMove),this.scheduledMouseMove=!1,this.core.emit(f.Z.USER_ACTION,30))}onElementMouseWheel(e){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement&&!c.hasClass(this.core.element,"fullscreen-ie"))return;e.preventDefault();let t=e.deltaY<0?1:-1;this.core.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume+.05*t),this.core.emit(f.Z.USER_ACTION)}checkIfClickTargetIgnored(e){return!("xplayer__video"===e.id||eK.some(t=>c.hasClass(e,t)))}onGlobalClick(e){this.core.emit(f.Z.MOUSE_CLICK_GLOBAL,e)}onVideoElementClick(e){if(this.core.element.focus(),!this.checkIfClickTargetIgnored(e.target)){if(this.timeoutClick){clearTimeout(this.timeoutClick),this.timeoutClick=null,this.onVideoElementDoubleClick();return}this.timeoutClick=setTimeout(this.onVideoElementSingleClick.bind(this),250)}}onVideoElementSingleClick(){this.timeoutClick=null,this.blockClick||(R.get("playing")?this.core.emit(f.Z.PLAYER_PAUSE):this.core.emit(f.Z.PLAYER_PLAY))}onVideoElementDoubleClick(){this.core.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN)}destroy(){document.removeEventListener("click",this.globalClickCallback)}constructor(e){this.core=e,this.timeoutClick=null,this.timeoutMouseMove=null,this.scheduledMouseMove=!1,this.globalClickCallback=!1,this.init()}};let eq=`
    <div class="xp-context-menu__item" data-action="url">Copy video URL</div>
    <div class="xp-context-menu__item" data-action="url-time">Copy video URL at current time</div>
    <div class="xp-context-menu__item" data-action="help">Help</div>
    <div class="xp-context-menu__item" data-action="report">Report streaming issue</div>
    <textarea class="xp-context-menu__text"></textarea>
`,eQ="xh-helper-hidden";var ez=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-context-menu ${eQ}`,this.element.innerHTML=eq,this.textArea=this.element.getElementsByClassName("xp-context-menu__text")[0],document.getElementsByTagName("body")[0].appendChild(this.element)}attachEvents(){this.core.element.addEventListener("contextmenu",this.onContextMenu.bind(this)),this.core.on(f.Z.MOUSE_CLICK_GLOBAL,this.onMouseGlobalClick,this),this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(e){if(!e.target.hasAttribute("data-action"))return;let t=e.target.getAttribute("data-action");this.processAction(t)}onMouseGlobalClick(e){2!==e.button&&this.hideMenu()}onContextMenu(e){if(e.stopPropagation(),this.shown){this.hideMenu();return}e.preventDefault(),this.setMenuCoords(e),this.showMenu()}setMenuCoords(e){this.element.style.top=`${e.clientY+3}px`,this.element.style.left=`${e.clientX+3}px`}processAction(e){switch(e){case"url":this.copyToClipboard(this.options.pageURL);break;case"url-time":this.copyToClipboard(`${this.options.pageURL}?t=${R.get("currentTime").toFixed(2)}`);break;case"help":this.core.emit(f.Z.HELP_MENU_TOGGLE);break;case"report":this.core.emit(f.Z.PLAYER_PAUSE),this.core.emit(f.Z.REPORT_ISSUE_CLICK)}}copyToClipboard(e){try{this.textArea.textContent=e,this.textArea.select(),document.execCommand("copy")}catch(t){window.prompt("Copy to clipboard: Ctrl+C, Enter",e)}}showMenu(){this.shown=!0,c.removeClass(this.element,eQ)}hideMenu(){this.shown&&(this.shown=!1,c.addClass(this.element,eQ))}constructor(e,t){this.core=e,this.options=t&&t.context||{},this.shown=!1,this.init()}},eX=class{init(){this.core.settings.autoplay&&window.self===window.top||(this.render(),this.attachEvents(),y.emit(f.Z.USER_ACTION_BLOCK))}render(){this.element=document.createElement("div"),this.element.className="xplayer-start-button",this.core.element.appendChild(this.element)}attachEvents(){y.once(f.Z.PLAYER_PLAY,this.destroyButtonAndUnblockUserAction,this),y.once(f.Z.OVERLAY_MENU_TOGGLE,this.destroyButton,this),y.once(f.Z.REMOTE_PLAYER_LOADING_START,this.destroyButtonAndUnblockUserAction,this),this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(){y.emit(f.Z.PLAYER_PLAY),y.emit(f.Z.SHOW_LOADER)}destroyButtonAndUnblockUserAction(){y.emit(f.Z.USER_ACTION_UNBLOCK),this.destroyButton()}destroyButton(){this.exist&&(this.exist=!1,this.core.element.removeChild(this.element),this.element=null)}constructor(e){this.core=e,this.exist=!0,this.init()}};let eJ="xh-helper-hidden";var e0=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("canvas"),this.element.className=`xplayer-screenshot ${eJ}`,this.context=this.element.getContext("2d"),this.core.element.appendChild(this.element)}attachEvents(){this.core.on(f.Z.PLAYER_BEFORE_SET_SOURCE,this.showScreenshotBeforeChangeSource,this),this.core.on(f.Z.PLAYER_ON_DECODER_ERROR,this.showScreenshotOnDecoderError,this)}getScreenshotSize(){let e,t;let i=this.core.videoElement.videoWidth,n=this.core.videoElement.videoHeight,s=Math.floor(this.core.videoElement.clientWidth),r=Math.floor(this.core.videoElement.clientHeight);return i>=n?t=Math.floor((e=s)*n/i):e=Math.floor((t=r)*i/n),t>r&&(e=Math.floor((t=r)*i/n)),{vWidth:s,vHeight:r,width:e,height:t}}drawScreenshot(){let e=this.getScreenshotSize();this.element.width=e.vWidth,this.element.height=e.vHeight,this.context.clearRect(0,0,e.vWidth,e.vHeight),this.context.drawImage(this.core.videoElement,e.vWidth/2-e.width/2,e.vHeight/2-e.height/2,e.width,e.height)}showScreenshotBeforeChangeSource(){c.hasClass(this.element,eJ)&&(this.core.once(f.Z.PLAYER_ON_PLAYING,this.hide,this),this.core.once(f.Z.PLAYER_ON_SEEKED,this.hide,this),this.show())}showScreenshotOnDecoderError(){c.hasClass(this.element,eJ)&&(this.core.once(f.Z.PLAYER_ON_PLAYING,this.hide,this),this.show())}show(){this.drawScreenshot(),c.removeClass(this.element,eJ)}hide(){c.addClass(this.element,eJ)}constructor(e){this.core=e,this.init()}};let e1=`
    <div class="xp-help-list">
    <div class="xp-help-list__block">
    <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    &#9650;
                </div>
                <div class="xp-help-button">
                    +
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Volume up
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    &#9660;
                </div>
                <div class="xp-help-button">
                    -
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Volume down
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    &#9664;
                </div>
                <div class="xp-help-button">
                    &#9654;
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Leap 10 sec. Shift pressed - 20 sec
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button xp-help-button--twice xp-help-button--mini">
                    space
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Play / Pause
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button xp-help-button--twice xp-help-button--mini">
                    Shift + S
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                On / Off slowmo
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons ">
                <div class="xp-help-button">
                    0
                </div>
                <div class="xp-help-button">
                    9
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Go from 0% to 90% length of video
            </div>
        </div>
    </div>    
    <div class="xp-help-list__block xp-help-list__block--right">
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    O
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Show / Hide overlay menu
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    M
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Mute / Unmute
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button xp-help-button--mini">
                    Home
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                To the start of video
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button xp-help-button--mini">
                    End
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                To the end of video
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    B
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Open google in new tab (Boss mode)
            </div>
        </div>
        <div class="xp-help-list__item xp-help-rule">
            <div class="xp-help-rule__buttons">
                <div class="xp-help-button">
                    F
                </div>
            </div>
            
            <div class="xp-help-rule__text">
                Fullscreen
            </div>
        </div>
    </div>
    </div>
`,e2="xh-helper-hidden";var e3=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-help ${e2}`,this.element.innerHTML=e1,this.core.element.appendChild(this.element)}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this)),this.core.on(f.Z.HELP_MENU_TOGGLE,this.onHelpMenuToggle,this),this.core.on(f.Z.PLAYER_ON_PLAYING,this.hideHelpMenu,this)}onElementClick(){this.hideHelpMenu()}onHelpMenuToggle(){if(c.hasClass(this.element,e2)){R.get("playing")&&this.core.emit(f.Z.PLAYER_PAUSE),this.showHelpMenu();return}this.hideHelpMenu()}showHelpMenu(){c.removeClass(this.element,e2)}hideHelpMenu(){c.addClass(this.element,e2)}constructor(e){this.core=e,this.init()}},e5=class{init(){this.show&&(this.render(),this.attachEvents())}render(){this.element=document.createElement("div"),this.element.className=`${this.BANNER_DEFAULT_CLASS} xh-helper-hidden`,this.core.element.appendChild(this.element)}renderBanner(){var e,t;this.element.innerHTML=(e=this.bannerHtml,t=this.classNames,`<div class="${t.overlay} ${t.close}">
        <div class="${t.centered}">
            <button class="${t.close}"><i class="xp-icon pause-spot-close-icon"></i></button>
            ${e}
        </div>
    </div>`),this.isHidden=!1,this.core.emit(f.Z.BANNER_RENDERED)}attachEvents(){this.element.addEventListener("click",this.onElementClick.bind(this)),this.core.on(f.Z.PLAYER_ON_PLAY,this.hideBannerAndUnblockUserAction,this),this.core.on(f.Z.PLAYER_PAUSED,this.showBanner,this),this.core.on(f.Z.OVERLAY_MENU_TOGGLE,this.onOverlayMenuToggle,this),this.core.on(f.Z.PLAYER_ON_ENDED,this.onOverlayMenuToggle,this),this.core.on(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE,this.hideBanner,this),this.core.on(f.Z.SHARE_MENU_OPEN,this.hideBanner,this),this.core.on(f.Z.PAUSE_ACTION_BLOCK,this.onBannerBlock,this),this.core.on(f.Z.PAUSE_ACTION_UNBLOCK,this.onBannerUnblock,this),this.core.on(f.Z.PLAYER_ON_SWIPE_START,this.hideBanner,this)}onElementClick(e){this.core.element.focus(),(c.hasClass(e.target,this.BANNER_CLOSE_CLASS)||c.hasClass(e.target,this.BANNER_CLOSE_ICON_CLASS))&&this.hideBannerAndUnblockUserAction()}onOverlayMenuToggle(){!R.get("ads_playing")&&(this.overlayMenuOpened=!this.overlayMenuOpened,this.overlayMenuOpened&&this.hideBanner())}onBannerBlock(){this.bannerBlocked=!0}onBannerUnblock(){this.bannerBlocked=!1}hideBannerAndUnblockUserAction(){this.core.emit(f.Z.USER_ACTION_UNBLOCK),this.hideBanner()}hideBanner(){this.isHidden=!0,c.addClass(this.element,"xh-helper-hidden")}showBanner(){R.get("swiping")||!this.isHidden||this.overlayMenuOpened||this.bannerBlocked||R.get("ads_playing")||(this.core.emit(f.Z.USER_ACTION_BLOCK),this.renderBanner(),c.removeClass(this.element,"xh-helper-hidden"))}constructor(e,t){var i,n;this.core=e,this.options=t,this.classNames=t.bannerPauseSpotClassNames,this.BANNER_DEFAULT_CLASS=null===(i=this.classNames)||void 0===i?void 0:i.pauseSpotContainer,this.BANNER_CLOSE_CLASS=null===(n=this.classNames)||void 0===n?void 0:n.close,this.BANNER_CLOSE_ICON_CLASS="pause-spot-close-icon",this.bannerHtml=this.options.banner&&this.options.banner.bannerHtml||!1,this.isHidden=!0,this.show=this.options.banner&&this.bannerHtml&&this.options.banner.show||!1,this.overlayMenuOpened=!1,this.bannerBlocked=!1,this.core.cssModules||(this.core.cssModules={}),this.core.cssModules.pauseBanner=this.classNames,this.init()}},e6=(e,t)=>`
    <div class="${t.bWrapper}${e.fullWidth?` ${t.fullWidth}`:""}">
      <span class="${t.close}"></span>
      <a href="${e.bannerUrl}" target="_blank">
        <img src="${e.bannerImage}" alt="${e.banner}">
      </a>
      ${e.tooltip}
    </div>
    <span class="${t.bWrapperShow}"></span>`,e4=(e,t)=>`
    <div class="${t.bWrapper}${e.fullWidth?` ${t.fullWidth}`:""}">
      <span class="${t.close}"></span>
      ${e.html}
    </div>
    <span class="${t.bWrapperShow}"></span>`,e9={bWrapper:"_08264-bWrapper",fullWidth:"_08264-fullWidth",bWrapperShow:"_08264-bWrapperShow",xplayer:"xplayer","no-user-action":"no-user-action",containerBottomSpot:"_08264-containerBottomSpot",close:"_08264-close",closed:"_08264-closed",embed:"embed"};let e8=e9.containerBottomSpot,e7=e9.bWrapperShow,te=e9.close,tt=e9.closed;var ti=class{init(){this.show&&(this.template=this.isBannerHTML?e4:e6,this.render(),y.once(f.Z.PLAYER_ON_PLAY,this.startShowingBanner,this),y.once(f.Z.ADS_UNBLOCK_BOTTOM_BANNER,this.unblockBanner.bind(this)),this.core.cssModules||(this.core.cssModules={},this.core.cssModules.bannerBottom=e9))}render(){this.element=document.createElement("div"),this.element.className=`${e8} xh-helper-hidden`,this.core.element.appendChild(this.element)}renderInner(){this.element.innerHTML=this.template(this.options,e9),this.closeElement=this.element.querySelector(`.${te}`),this.showElement=this.element.querySelector(`.${e7}`)}attachEvents(){this.closeElement.addEventListener("click",this.hideBanner.bind(this)),this.showElement.addEventListener("click",this.showBanner.bind(this)),this.element.addEventListener("click",()=>{y.emit(f.Z.BANNER_BOTTOM_CLICK)})}unblockBanner(){this.isBlocked=!1}hideBanner(){c.addClass(this.element,tt),y.emit(f.Z.BANNER_BOTTOM_HIDE)}showBanner(){this.isBlocked||(c.removeClass(this.element,tt),y.emit(f.Z.BANNER_BOTTOM_SHOW))}enable(){this.enabled=!0}startShowingBanner(){if(R.get("ads_playing")){y.once(f.Z.PLAYER_ON_CAN_PLAY,this.startShowingBanner,this);return}document.querySelector(`.${e9.show}`)||this.isBlocked||setTimeout(()=>{this.renderInner(),this.attachEvents(),c.removeClass(this.element,"xh-helper-hidden"),y.emit(f.Z.BANNER_BOTTOM_SHOW)},this.showTimeout)}constructor(e,t,i=!1){this.core=e,this.options=t.bannerBottom||{},this.bannerUrl=this.options.bannerUrl||!1,this.isBannerHTML=this.options.html||!1,this.showTimeout=this.options.showTimeout||2e3,this.show=this.bannerUrl||this.isBannerHTML||!1,this.enabled=this.options.enabled||!1,this.isBlocked=!i,this.template=null,this.init()}};let tn="xp-tooltip";var ts=class{init(){this.render(),document.addEventListener("mouseover",this.isTooltip.bind(this,this.updateTooltipFromMouse)),document.addEventListener("mouseout",this.isTooltip.bind(this,this.hideTooltip)),document.addEventListener("touchend",this.onTouchEnd.bind(this)),this.core.on(f.Z.TOOLTIP_UPDATE,this.updateTooltipText,this)}render(){this.element=document.createElement("div"),this.element.className="xp-tooltip",this.core.element.appendChild(this.element)}isTooltip(e,t){let i=c.hasParentByData(t.target,tn);i&&e.call(this,t,i)}onTouchEnd(){this.blockTooltipUpdate=!0}hideTooltip(){this.visible&&(c.css(this.element,{opacity:0,top:-12e3,left:-12e3}),this.visible=!1)}updateTooltipFromMouse(e,t){e.stopPropagation(),this.updateTooltip(t)}updateTooltip(e){if(this.blockTooltipUpdate){this.blockTooltipUpdate=!1;return}let t=e.getAttribute(`data-${tn}`);if(!t)return;let i=this.calcElementBox(e);this.visible&&this.hideTooltip(),this.updateTooltipText(t),this.showTooltip(i)}updateTooltipText(e){this.element.innerHTML=e}calcElementBox(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,bottom:t.top+window.pageYOffset+e.offsetHeight,left:t.left+window.pageXOffset,right:t.left+t.width+window.pageXOffset,center:t.left+window.pageXOffset+e.offsetWidth/2}}calcTooltipBox(e){return{width:e.offsetWidth,height:e.offsetHeight}}showTooltip(e){let t=this.calcTooltipBox(this.element),i=this.calcElementBox(this.core.element),n=e.top-i.top,s=e.bottom-i.top,r=n>t.height+10,o=r?n-t.height-12:s+6,a=e.center-t.width/2-i.left,l=i.right-i.left,h=a+t.width>l?l-t.width-5:a;r?c.removeClass(this.element,"below"):c.addClass(this.element,"below"),c.css(this.element,{top:o,left:h,opacity:1}),this.visible=!0}constructor(e){this.core=e,this.visible=!1,this.blockTooltipUpdate=!1,this.init()}},tr=class{init(){if(this.element=this.core.element.querySelector(".xp-preload-image"),this.element&&this.shouldRemovePoster){this.destroy();return}!this.element&&this.options.url&&this.render(),this.element&&this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className="xp-poster",this.element.style.backgroundImage=`url('${this.options.url}')`,this.core.element.appendChild(this.element)}attachEvents(){y.once(f.Z.PLAYER_ON_PLAYING,this.destroy,this),y.once(f.Z.REMOTE_PLAYER_PLAYING,this.destroy,this),this.element.addEventListener("click",this.onClick.bind(this))}onClick(){y.emit(f.Z.PLAYER_PLAY),y.emit(f.Z.POSTER_CLICK)}destroy(){this.element&&(this.core.element.removeChild(this.element),this.element=null)}constructor(e,t){this.core=e,this.options=t.poster||{},this.shouldRemovePoster=this.options.shouldRemovePoster||!1,this.init()}},to=e=>{var t;let i,n;return`<div class="xp-subscribe__button-wrapper xh-helper-hidden">
    <div class="xp-subscribe__title">${e.title}</div>
    <div class="xp-subscribe__button${e.subscribed?" xp-subscribe__button--subscribed":""}">
        <span class="xp-subscribe__button-text">
            ${e.subscribed?"Subscribed":"Subscribe"}
        </span>${e.subscribers?`<span class="xp-subscribe__button-subscribers">
        ${i=Math.abs(t=e.subscribers),n="",i>=1e12?(n+="T",t/=1e12):i<1e12&&i>=1e9?(n+="B",t/=1e9):i<1e9&&i>=1e6?(n+="M",t/=1e6):i<1e6&&i>=1e3&&(n+="K",t/=1e3),n?Math.round(10*t)/10+n:t}</span>`:""}
    </div>
</div><a target="_blank" href="${e.link}" class="xp-subscribe__logo">${e.logo?`<img src="${e.logo}" alt="Channel Logo" >`:""}</a>`};let ta="xp-subscribe__button",tl="xp-subscribe__button--disabled",th="xh-helper-hidden";var tc=class{defaultOptions(){return{id:null,title:"",subscribed:!1,subscribers:0,logo:"",link:""}}init(){this.options.id&&(this.isOn=!0,this.render(),this.attachEvents(),y.emit(f.Z.SUBSCRIBE_INIT))}render(){this.element=document.createElement("div"),this.element.className="xp-subscribe",this.element.innerHTML=to(this.options),this.buttonWrapper=this.element.querySelector(".xp-subscribe__button-wrapper"),this.button=this.element.querySelector(`.${ta}`),this.logo=this.element.querySelector(".xp-subscribe__logo"),this.core.element.appendChild(this.element)}attachEvents(){this.element.addEventListener("mouseenter",this.onMouseEnter.bind(this)),this.element.addEventListener("mouseleave",this.onMouseLeave.bind(this)),y.on(f.Z.NO_USER_ACTION,this.hideSubscribeButton,this),this.button.addEventListener("click",this.onButtonClick.bind(this)),this.logo.addEventListener("click",this.onLogoClick.bind(this))}onMouseEnter(){this.options.callback&&"function"==typeof this.options.callback&&!this.shown&&(this.shown=!0,y.emit(f.Z.SUBSCRIBE_SHOW),clearTimeout(this.subscribeHideTimeout),c.removeClass(this.buttonWrapper,th))}onMouseLeave(){this.shown=!1,this.subscribeHideTimeout=setTimeout(()=>this.hideSubscribeButton(),1e3)}hideSubscribeButton(){c.addClass(this.buttonWrapper,th)}onButtonClick(){this.disabled||(this.options.subscribed?y.emit(f.Z.SUBSCRIBE_CLICK_UNSUBSCRIBE):y.emit(f.Z.SUBSCRIBE_CLICK_SUBSCRIBE),this.options.callback(this))}onLogoClick(){y.emit(f.Z.SUBSCRIBE_CLICK_LOGO)}disable(){this.disabled=!0,c.addClass(this.button,tl)}enable(){this.disabled=!1,c.removeClass(this.button,tl)}renderButton(){let e=document.createElement("div");e.innerHTML=to(this.options),c.removeElement(this.button),this.button=e.querySelector(`.${ta}`),this.buttonWrapper.appendChild(this.button),this.button.addEventListener("click",this.onButtonClick.bind(this))}constructor(e,t={}){this.core=e,this.options=(0,m._)({},this.defaultOptions(),t.subscribe),this.disabled=!1,this.shown=!1,this.isOn=!1,this.subscribeHideTimeout=null,this.init()}};let tu=["quality"];var td=class{init(){this.initControllers(this.controllersList),this.render(),this.attachEvents()}initControllers(e){this.controllers=e.map(e=>new e(this.core,this.options))}render(){this.element=document.createElement("div"),this.element.className="settings-menu xh-helper-hidden",this.renderControllers(),this.core.element.appendChild(this.element)}renderControllers(){this.controllers.map(e=>e.element&&this.element.appendChild(e.element))}renderReport(){this.reportElement=document.createElement("p"),this.reportElement.className="report",this.reportElement.innerText="Report issue",this.element.appendChild(this.reportElement)}reattachControllers(){this.element.innerHTML="",this.initControllers(this.controllersList),this.renderControllers()}attachEvents(){y.on(f.Z.VR_CONTROLS_ADDED,this.reattachControllers,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.onSettingsMenuToggle,this),y.on(f.Z.PLAYER_ON_PLAY,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hideSettingsMenu,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hideSettingsMenu,this),y.on(f.Z.NO_USER_ACTION,this.hideSettingsMenu,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hideSettingsMenu,this),y.on(f.Z.QUALITY_LIST_OPEN,this.hideSettingsMenu,this),y.on(f.Z.PLAYBACK_RATE_LIST_TOGGLE,this.hideSettingsMenu,this),y.on(f.Z.SUBTITLES_LIST_TOGGLE,this.hideSettingsMenu,this),y.on(f.Z.VR_CONTROLS_LIST_OPEN,this.hideSettingsMenu,this),y.on(f.Z.REPORT_ISSUE_CLICK,this.hideSettingsMenu,this),y.on(f.Z.REMOTE_PLAYER_SESSION_START,this.hideRemoteUnsupportedOptions,this),y.on(f.Z.REMOTE_PLAYER_SESSION_END,this.showRemoteUnsupportedOptions,this)}onSettingsMenuToggle(){this.shown?this.hideSettingsMenu():this.showSettingsMenu()}hideSettingsMenu(){this.shown&&(this.shown=!1,c.addClass(this.element,"xh-helper-hidden"),this.core.emit(f.Z.SETTINGS_MENU_TOGGLED,!1))}showRemoteUnsupportedOptions(){this.controllers.forEach(e=>{var t,i;let n=null===(i=e.element.querySelector(".label"))||void 0===i?void 0:null===(t=i.textContent)||void 0===t?void 0:t.toLowerCase();tu.includes(n)||c.removeClass(e.element,"xh-helper-hidden")})}hideRemoteUnsupportedOptions(){this.controllers.forEach(e=>{var t,i;let n=null===(i=e.element.querySelector(".label"))||void 0===i?void 0:null===(t=i.textContent)||void 0===t?void 0:t.toLowerCase();tu.includes(n)||c.addClass(e.element,"xh-helper-hidden")})}showSettingsMenu(){this.shown=!0,c.removeClass(this.element,"xh-helper-hidden"),this.core.emit(f.Z.SETTINGS_MENU_TOGGLED,!0)}constructor(e,t=[],i={}){this.core=e,this.options=i,this.element=null,this.controllers=null,this.controllersList=t,this.init()}},tm=class{getTemplate(){throw Error("BasicSettingController - template not defined")}getTemplateOptions(){throw Error("BasicSettingController - template options not defined")}init(){this.element=document.createElement("span"),this.element.className="setting",this.render(),this.attachEvents()}render(){this.element.innerHTML=this.getTemplate()(this.getTemplateOptions())}attachEvents(){throw Error("BasicSettingController - events not defined")}constructor(e,t){this.core=e,this.options=t,this.element=null,this.init()}},tp=function(e){var t=e.id,i=e.label,n=e.checked;return'\n            <span class="label">'.concat(i,'</span>\n            <label for="').concat(t,'" class="toggle-control switcher">\n                <input id="').concat(t,'" class="').concat(t,'" ').concat(n?"checked":"",' type="checkbox">\n                <div class="toggler-container">\n                    <div class="toggler"></div>\n                </div>\n            </label>\n    ')},tE=class extends tm{getTemplate(){return tp}getTemplateOptions(){return{id:"autoplay_toggler",label:"Autostart",checked:!!this.core.settings.autoplay}}init(){this.core.noAutoplay||super.init()}attachEvents(){this.element.addEventListener("change",e=>this.core.emit(f.Z.PLAYER_SET_AUTOPLAY,e.target.checked))}};function t_(e){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tv(e,t){return t&&("object"===t_(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tf(e){return(tf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tg(e,t){return(tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ty(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tg(e,t)}var tS=function(e){var t=e.id,i=e.label,n=e.checked;return'\n        <label for="'.concat(t,'" class="toggle-control switcher">\n            <div class="xplayer-settings-av1__label">').concat(i,'</div>\n            <div>\n                <input id="').concat(t,'" class="').concat(t,'" ').concat(n?"checked":"",' type="checkbox">\n                <div class="toggler-container">\n                    <div class="toggler"></div>\n                </div>\n            </div>\n        </label>\n        <div class="xplayer-settings-av1__tip">Turn off if you see the green screen</div>\n    ')};function tb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tb=function(){return!!e})()}var tT=function(e){function t(){var e,i;return s(this,t),e=t,i=arguments,e=tf(e),tv(this,tb()?Reflect.construct(e,i||[],tf(this).constructor):e.apply(this,i))}return ty(t,e),o(t,[{key:"getTemplate",value:function(){return tS}},{key:"getTemplateOptions",value:function(){return{id:"av1_toggler",label:"Faster streaming (Recommended)",checked:this.core.settings.useAv1}}},{key:"init",value:function(){this.element=document.createElement("span"),this.element.className="setting with-av1",this.render(),this.attachEvents()}},{key:"attachEvents",value:function(){var e=this;this.element.addEventListener("change",function(t){return e.core.emit(f.Z.PLAYER_SET_AV1_OPTION,t.target.checked)})}}])}(tm),tA=class extends tm{getTemplate(){return tp}getTemplateOptions(){return{id:"preview_toggler",label:"Image preview",checked:!!this.core.settings.preview}}attachEvents(){this.element.addEventListener("change",e=>this.core.emit(f.Z.PLAYER_SET_PREVIEW,e.target.checked))}},tL=({label:e,typeClass:t,labelInSettings:i,labelCss:n})=>`
            <span class="label ${t}">${e}</span>
            <span class="chooser-control ${t}">
                <span class="${n||""}">${i}</span>
            </span>
    `,tk=class extends tm{getTemplate(){return tL}getTemplateOptions(){return{label:"Quality",typeClass:"quality",labelInSettings:this.core.sourceController.getCurrentQuality(),labelCss:this.core.sourceController.getType(this.core.sourceController.getCurrentQuality())}}init(){this.element=document.createElement("span"),this.element.className="setting with-menu",this.render(),this.attachEvents()}attachEvents(){this.element.addEventListener("click",()=>y.emit(f.Z.QUALITY_LIST_OPEN)),y.on(f.Z.SOURCE_CONTROLLER_READY,this.render,this),y.on(f.Z.PLAYER_FALLBACK_SOURCE,this.render,this),y.on(f.Z.PLAYER_SET_SOURCE,this.render,this),y.on(f.Z.SETTINGS_RENDER_QUALITY,this.render,this)}},tC=class extends tm{getTemplate(){return tL}getTemplateOptions(){return{label:"Speed",typeClass:"playbackRate",labelInSettings:"1"===R.get("playbackRate")?"Normal":`${R.get("playbackRate")}x`}}init(){this.element=document.createElement("span"),this.element.className="setting with-menu",this.render(),this.attachEvents()}attachEvents(){this.element.addEventListener("click",()=>y.emit(f.Z.PLAYBACK_RATE_LIST_TOGGLE)),this.core.on(f.Z.PLAYER_SET_PLAYBACK_RATE,this.render,this)}},tR=class extends tm{init(){this.element=document.createElement("p"),this.element.className="report",this.element.innerText="Report issue",this.attachEvents()}attachEvents(){this.element.addEventListener("click",this.onReportClick.bind(this))}onReportClick(){this.core.emit(f.Z.REPORT_ISSUE_CLICK),R.get("playing")&&this.core.emit(f.Z.PLAYER_PAUSE)}};function tO(e,t,i){return(tO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tf(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(i):s.value}})(e,t,i||e)}var tP=function(e){var t=e.label,i=e.labelClass,n=e.labelInSettings,s=e.labelInSettingsClass;return'\n            <span class="label '.concat(i,'">').concat(t,'</span>\n            <span class="chooser-control ').concat(i,'">\n                <span class="').concat(s||"",'">').concat(n,"</span>\n            </span>\n    ")};function tw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tw=function(){return!!e})()}var tN="disabled",tI=function(e){function t(){var e,i;return s(this,t),e=t,i=arguments,e=tf(e),tv(this,tw()?Reflect.construct(e,i||[],tf(this).constructor):e.apply(this,i))}return ty(t,e),o(t,[{key:"getTemplate",value:function(){return tP}},{key:"getTemplateOptions",value:function(){return{label:"Subtitles",labelClass:"subtitles",labelInSettings:"Unavailable",labelInSettingsClass:"subtitles-selected-track"}}},{key:"init",value:function(){var e=this;this.element=document.createElement("span"),this.element.className="setting with-menu",this.element.classList.add(tN),this.render(),y.once(f.Z.SUBTITLES_READY,function(t){var i="Off";t.label&&"off"!==e.core.settings.subtitlesStateByButton&&(i=t.label),e.selectedTrackElement.textContent=i,e.element.classList.remove(tN),e.attachEvents()})}},{key:"render",value:function(){var e,i,n;(e="render",i=this,n=tO(tf(0?t:t.prototype),e,i),0?n:function(e){return n.apply(i,e)})([]),this.selectedTrackElement=this.element.querySelector(".subtitles-selected-track")}},{key:"attachEvents",value:function(){y.on(f.Z.SUBTITLES_SHOW,this.setLangLabel,this),y.on(f.Z.SUBTITLES_SET_DEFAULT_LANG,this.setLangLabel,this),y.on(f.Z.SUBTITLES_HIDE,this.setLangLabel.bind(this,{label:"Off"})),y.on(f.Z.SUBTITLES_NO_AVAILABLE_TRACKS,this.disable.bind(this)),this.element.addEventListener("click",function(){return y.emit(f.Z.SUBTITLES_LIST_TOGGLE)})}},{key:"disable",value:function(){this.selectedTrackElement.textContent="Unavailable",this.element.classList.add(tN)}},{key:"setLangLabel",value:function(e){var t=e.label;this.selectedTrackElement.textContent=t}}])}(tm),tD="xh-helper-hidden",tU="data-value",tM="chosen",tY=o(function e(t,i){s(this,e),this.core=t,this.options=null==i?void 0:i.subtitles,this.element=null,this.backElement=null,this.innerElement=null,this.shouldSaveTrackToSettings=!0,this.init()},[{key:"init",value:function(){this.render(),this.attachEvents()}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.innerHTML='\n    <span class="setting xp-settings-inner-list-back">\n        <span class="label">Back</span>\n            </span>\n            <span class="setting">\n        <span class="subtitles-setting chooser-control xp-settings-inner-list-inner"></span>\n    </span>\n',this.element.className="".concat("xp-settings-inner-list settings-menu"," ").concat(tD),this.backElement=this.element.querySelector(".".concat("xp-settings-inner-list-back")),this.innerElement=this.element.querySelector(".".concat("xp-settings-inner-list-inner")),this.renderSettings(),this.core.element.appendChild(this.element)}},{key:"renderSettings",value:function(){var e,t=this.core.settings.subtitlesPrefLang,i="off"!==this.core.settings.subtitlesStateByButton,n="";n=i&&t&&"off"!==t.lang?'<span data-value="off">Off</span>':'<span data-value="off" class="chosen">Off</span>',null===(e=this.options.tracks)||void 0===e||e.forEach(function(e){var s=i&&(null==t?void 0:t.lang)===e.lang;n+="\n                <span data-value='".concat(e.lang,"' class=\"").concat(s?"chosen":"",'">\n                    ').concat(e.label,"\n                </span>\n            ")}),this.innerElement.innerHTML=n}},{key:"attachEvents",value:function(){y.on(f.Z.SUBTITLES_LIST_TOGGLE,this.toggle,this),y.on(f.Z.PLAYER_ON_PLAY,this.hide,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hide,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hide,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hide,this),y.on(f.Z.NO_USER_ACTION,this.hide,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hide,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.hide,this),y.on(f.Z.SUBTITLES_SET_DEFAULT_LANG,this.setChosenLang.bind(this)),y.on(f.Z.SUBTITLES_HIDE,this.setChosenLang.bind(this,{lang:"off"})),y.on(f.Z.SUBTITLES_SHOW,this.setChosenLang.bind(this)),"off"!==this.core.settings.subtitlesStateByButton&&y.on(f.Z.SUBTITLES_READY,this.setChosenLang.bind(this)),y.once(f.Z.SUBTITLES_LOADED,this.renderSettings.bind(this)),this.backElement.addEventListener("click",function(){return y.emit(f.Z.SETTINGS_MENU_TOGGLE)}),this.innerElement.addEventListener("click",this.onElementClick.bind(this))}},{key:"setChosenLang",value:function(e){var t=e.lang,i=this.innerElement.querySelector("span[data-value='".concat(t,"']"));this.hide(),this.toggleActiveElement(i)}},{key:"onElementClick",value:function(e){var t=null==e?void 0:e.target;if(!(!(null!=t&&t.hasAttribute(tU))||c.hasClass(t,tM))){var i=null==t?void 0:t.getAttribute(tU),n={lang:i,label:null==t?void 0:t.textContent},s="off"===n.lang;y.emit(f.Z.SUBTITLES_SET_LANG,n),y.emit(f.Z.SUBTITLES_SAVE_LANG,n),y.emit(f.Z.SUBTITLES_STATE_BY_BUTTON,"off"===i?"off":"on"),s?y.emit(f.Z.STATISTICS_UI,eu.settings_subtitles_off):y.emit(f.Z.STATISTICS_UI,eu.settings_subtitles_on),this.hide(),this.toggleActiveElement(t)}}},{key:"toggleActiveElement",value:function(e){var t=e.parentNode.getElementsByClassName(tM)[0];t&&c.removeClass(t,tM),c.addClass(e,tM)}},{key:"toggle",value:function(){c.hasClass(this.element,tD)?this.show():this.hide()}},{key:"show",value:function(){c.removeClass(this.element,tD)}},{key:"hide",value:function(){c.addClass(this.element,tD)}}]),tx=()=>`
        <span class="setting xp-settings-inner-list-back">
            <span class="label">Back</span>
        </span>
        <span class="setting">
            <span class="quality chooser-control xp-settings-inner-list-inner"></span>
        </span>
    `;let tZ="auto-chosen",tB="xh-helper-hidden",tG="data-value",tV="chosen";var tH=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-settings-inner-list settings-menu ${tB}`,this.element.innerHTML=tx(),this.backElement=this.element.querySelector(".xp-settings-inner-list-back"),this.innerElement=this.element.querySelector(".xp-settings-inner-list-inner"),this.renderQualitySettings(),this.core.element.appendChild(this.element)}renderQualitySettings(){if(!this.core.sourceController.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.renderQualitySettings,this);return}let e=this.core.sourceController.getQualities(),t=this.core.sourceController.getCurrentQuality(),i,n=[],s="";"auto"===t&&this.core.sourceController.getQuality&&(i=this.core.sourceController.getQuality(-1)),e.forEach(e=>{("auto"!==e||this.core.capabilities.hls||this.core.capabilities.hlsJs&&"hls"===this.core.sourceController.type||this.core.capabilities.dashJs&&"dash"===this.core.sourceController.type)&&(e===t&&n.push("chosen"),n.push(this.core.sourceController.getType(e)),i===e&&n.push(tZ),s+=`<span data-value='${e}' class='${n.join(" ")}'>
                ${this.core.sourceController.getLabelFromQuality(e)}
            </span>`,n=[])}),this.innerElement.innerHTML=s}attachEvents(){y.on(f.Z.QUALITY_LIST_OPEN,this.show,this),y.on(f.Z.PLAYER_ON_PLAY,this.hide,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hide,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hide,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hide,this),y.on(f.Z.NO_USER_ACTION,this.hide,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hide,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_FALLBACK_SOURCE,this.renderQualitySettings,this),y.on(f.Z.SETTINGS_RENDER_QUALITY,this.renderQualitySettings,this),this.backElement.addEventListener("click",()=>y.emit(f.Z.SETTINGS_MENU_TOGGLE)),this.innerElement.addEventListener("click",this.onQualityElementClick.bind(this))}onQualityElementClick(e){if(!e.target.hasAttribute(tG)||c.hasClass(e.target,tV))return;let t=e.target,i=t.getAttribute(tG);this.core.emit(f.Z.PLAYER_SET_SOURCE,i,!0),this.hide(),this.toggleActiveElement(t),"auto"===i&&this.chooseAutoqualityLevel(),y.emit(f.Z.PLAYER_SET_QUALITY,i)}chooseAutoqualityLevel(){if(!this.core.sourceController.getQuality)return;let e=this.core.sourceController.getQuality(-1);c.addClass(this.innerElement.querySelector(`[data-value='${e}']`),tZ)}toggleActiveElement(e){let t=e.parentNode,i=t.getElementsByClassName(tV)[0],n=t.getElementsByClassName(tZ)[0];i&&c.removeClass(i,tV),n&&c.removeClass(n,tZ),c.addClass(e,tV)}show(){c.removeClass(this.element,tB)}hide(){c.addClass(this.element,tB)}constructor(e){this.core=e,this.element=null,this.backElement=null,this.innerElement=null,this.init()}},tF=()=>`
        <span class="setting xp-settings-inner-list-back">
            <span class="label">Back</span>
        </span>
        <span class="setting">
            <span class="playback-speed-setting chooser-control xp-settings-inner-list-inner"></span>
        </span>
    `;let t$="xh-helper-hidden",tW="data-value",tK="chosen",tj=[.25,.5,.75,1,1.25,1.5,1.75,2];var tq=class{init(){this.render(),this.attachEvents()}render(){this.element=document.createElement("div"),this.element.className=`xp-settings-inner-list settings-menu ${t$}`,this.element.innerHTML=tF(),this.backElement=this.element.querySelector(".xp-settings-inner-list-back"),this.innerElement=this.element.querySelector(".xp-settings-inner-list-inner"),this.renderSettings(),this.core.element.appendChild(this.element)}renderSettings(){let e="";tj.forEach(t=>{1===t?e+=`<span data-value='${t}' class='${tK}'>Normal</span>`:e+=`<span data-value='${t}'>${t}x</span>`}),this.innerElement.innerHTML=e}attachEvents(){y.on(f.Z.PLAYBACK_RATE_LIST_TOGGLE,this.toggle,this),y.on(f.Z.PLAYER_ON_PLAY,this.hide,this),y.on(f.Z.PLAYER_ON_PAUSE,this.hide,this),y.on(f.Z.OVERLAY_MENU_TOGGLE,this.hide,this),y.on(f.Z.PLAYER_ON_VOLUME_CHANGE,this.hide,this),y.on(f.Z.PLAYER_SET_SOURCE,this.hide,this),y.on(f.Z.NO_USER_ACTION,this.hide,this),y.on(f.Z.PLAYER_TOGGLE_FULLSCREEN,this.hide,this),y.on(f.Z.SETTINGS_MENU_TOGGLE,this.hide,this),this.backElement.addEventListener("click",()=>y.emit(f.Z.SETTINGS_MENU_TOGGLE)),this.innerElement.addEventListener("click",this.onElementClick.bind(this))}onElementClick(e){if(!e.target.hasAttribute(tW)||c.hasClass(e.target,tK))return;let t=e.target,i=t.getAttribute(tW);this.core.emit(f.Z.PLAYER_SET_PLAYBACK_RATE,i),this.hide(),this.toggleActiveElement(t)}toggleActiveElement(e){let t=e.parentNode.getElementsByClassName(tK)[0];t&&c.removeClass(t,tK),c.addClass(e,tK)}toggle(){c.hasClass(this.element,t$)?this.show():this.hide()}show(){c.removeClass(this.element,t$)}hide(){c.addClass(this.element,t$)}constructor(e){this.core=e,this.element=null,this.backElement=null,this.innerElement=null,this.init()}},tQ={play:"play",request:"request",response:"response",parsed:"parsed",shown:"shown",viewToSkip:"viewToSkip",viewToEnd:"viewToEnd",skip:"skip",click:"click"},tz={completed:"Completed",video:"Video",linkAfterEnd:"LinkAfterEnd",link:"Link",cta:"CTA",companionAfterEnd:"CompanionAfterEnd",companion:"Companion"},tX={progress:"progress",clickTracking:"clickTracking",resume:"resume",complete:"complete",pause:"pause",mute:"mute",unmute:"unmute",start:"start",firstQuartile:"firstQuartile",midpoint:"midpoint",thirdQuartile:"thirdQuartile",skip:"skip"},tJ={preroll_shown_error_prefix:"preroll_shown_error",preroll_play:"preroll_play",preroll_ok:"preroll_ok",preroll_shown:"preroll_shown",preroll_timeout_shown:"preroll_timeout_shown",preroll_link_completed:"preroll_link_completed",preroll_link_video:"preroll_link_video",preroll_link_cta:"preroll_link_cta",preroll_ended:"preroll_ended",preroll_skip:"preroll_skip",preroll_impression:"preroll_impression",preroll_click:"preroll_click",preroll_shown_5s:"preroll_shown_5s",preroll_empty:"preroll_empty",preroll_error:"preroll_error",preroll_link_companion_empty:"preroll_link_companion_empty",preroll_link_companion_empty_ended:"preroll_link_companion_empty_ended",preroll_link_companion:"preroll_link_companion",preroll_link_companion_ended:"preroll_link_companion_ended",preroll_link_label:"preroll_link_label",preroll_link_label_ended:"preroll_link_label_ended",preroll_link_returned_to_xh_ms:"preroll_link_returned_to_xh_ms"},t0={start:!1,firstQuartile:!1,midpoint:!1,thirdQuartile:!1},t1={xml_parsing:100,wrapper_general:300,wrapper_connection:301,linear_general:400,video_not_found:401,video_file_timeout:402,video_format_not_supported:403,video_play_error:405,unknown:900},t2={ADS_ROOT_ELEMENT_CLASS:"xplayer-ads",ADS_ROOT_ELEMENT_MOBILE_CLASS:"xplayer-ads-mobile",ADS_COMPLETED_ROOT_ELEMENT_CLASS:"xplayer-ads-completed",ADS_ELEMENT_CLASS:"xplayer-ads-block",ADS_PRELOAD_CLASS:"xplayer-ads-preload",ADS_BLOCK_CLASS:"xplayer-ads-block__skip--blocked",ADS_ALLOWED_SKIP_SELECTOR:".xplayer-ads-block__skip--allowed-skip",ADS_SKIP_WITH_TIMING_SELECTOR:".xplayer-ads-block__skip--with-timing",ADS_LOADING_CLASS:"xplayer-ads-loading",ROOT_ELEMENT_PAUSED_CLASS:"xplayer-paused",ROOT_ELEMENT_ANIMATE_CLASS:"xplayer-rotate--animate",ROOT_ELEMENT_ROTATE_SELECTOR:".xplayer-rotate",HIDDEN_CLASS:"xh-helper-hidden"},t3={skip:".xplayer-ads-block__skip",link:".xplayer-ads-block__link",callToAction:".xplayer-ads-block__cta",video:".xplayer-ads-block__video",label:".xplayer-ads-block-label",durationTiming:".xplayer-ads-block__info-new--timing",skipTiming:".xplayer-ads-block__skip--timing",companion:".xplayer-ads-block-companion",completed:".xplayer-ads-block-companion-completed",footer:".xplayer-ads-block__footer",footerCompleted:".xplayer-ads-block__footer-completed",pauseButton:".xplayer-ads-block__pause-button"};function t5(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function t6(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?t5(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t5(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var t4=o(function e(t){var i=t.parser,n=t.options;s(this,e),this.parser=i,this.options=void 0===n?{}:n,this.trackingFunction=null,this.trackGaFunction=null,this.abortServerTimeout=null,this.wrapperDepth=0},[{key:"setNewAdUrl",value:function(e){this.url=e}},{key:"loadData",value:function(e,t){var i=this;return this.trackingFunction=e,new Promise(function(n,s){i.getData(i.url,e,t).then(function(n){return i.getWrappersData(n,e,t)}).then(function(e){n(e.map(function(e){return i.mapAd(e)}))}).catch(function(e){s({error:e})})})}},{key:"mapAd",value:function(e){return e?e.error?{error:e.error}:{ctaText:e.ctaText,duration:e.duration,companion:e.companion,isWrapper:e.isWrapper,link:e.link,linearAdvertiser:e.linearAdvertiser,wrapperAdvertiser:e.wrapperAdvertiser,skipOffset:e.skipOffset,title:e.title,mediaFiles:e.mediaFiles,errorUrls:[].concat(e.errorTrackingLinearUrls,e.errorUrls).filter(function(e){return e}),trackingUrls:e.trackingEvents,error:e.error}:null}},{key:"headersReceivedCallback",value:function(){this.serverTimeout&&(clearTimeout(this.serverTimeout),this.serverTimeout=null)}},{key:"getData",value:function(e,t,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(r){var o=s.vastAdTagUri?"wrapper":"preroll";i&&i("request"),t&&t("".concat(o,"_sent")),n.request=A.ajax("GET",e,null,{headersReceivedCallback:n.headersReceivedCallback.bind(n),fetch:!0,credentials:!0,no_cache:!0}),n.request.then(function(e){return i&&i("response"),t&&t("".concat(o,"_response")),n.parser.parseData(e,n.options,s)}).then(function(e){t&&t("".concat(o,"_parsed")),r(e)}).catch(function(e){n.requestRejected=!0;var t=s.vastAdTagUri?t1.wrapper_connection:null==e?void 0:e.errorVast;r([{error:t6(t6({},e),{},{errorVast:t||t1.unknown})}])}),n.setServerTimeout()})}},{key:"getWrappersData",value:function(e,t,i){var n=this;return new Promise(function(s,r){if(n.wrapperDepth++,!n.hasWrappers(e)||n.wrapperDepth>n.options.wrappersDepthLimit){s(e);return}Promise.all(e.map(function(e){return null!=e&&e.vastAdTagUri?n.getData(e.vastAdTagUri,t,i,e):[e]})).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).then(function(e){return n.getWrappersData(e,t,i)}).then(s).catch(r)})}},{key:"setServerTimeout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.abortServerTimeout=t),this.abortServerTimeout&&this.request&&(this.serverTimeout=setTimeout(function(){e.requestRejected||(e.trackingFunction&&e.trackingFunction("preroll_timeout"),e.request.abort())},1e3*this.abortServerTimeout))}},{key:"hasWrappers",value:function(e){return Array.isArray(e)&&e.some(function(e){return e.vastAdTagUri})}},{key:"abort",value:function(){return!!this.request&&(this.request.abort(),!0)}}]);function t9(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function t8(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?t9(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t9(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var t7=o(function e(){s(this,e)},[{key:"parseLinearAd",value:function(e,t){if(this.options=t,this.xmlDoc=new DOMParser().parseFromString(e,"text/xml"),this.linear=null===(i=this.xmlDoc)||void 0===i?void 0:i.querySelector("Creatives Creative Linear"),this.parsedData={trackingEvents:{},mediaFiles:[]},!this.linear)throw Error("no linear ad data");this.parsedData.linearAdvertiser=null===(n=this.xmlDoc.querySelector("Advertiser"))||void 0===n?void 0:n.textContent;var i,n,s=[].slice.call(this.linear.querySelectorAll("Tracking")),r=[].slice.call(this.xmlDoc.querySelectorAll("Impression"));return this.getOffsetAndDuration().getCtaAndTitle().getMediaFiles().getClickEvents(this.linear).getTrackingEvents(s).getImpressions(r).getCompanion(),this.parsedData}},{key:"parseWrapper",value:function(e){if(this.xmlDoc=new DOMParser().parseFromString(e,"text/xml"),this.wrapper=null===(t=this.xmlDoc)||void 0===t?void 0:t.querySelector("Wrapper"),!this.wrapper)throw Error("no wrapper ad data");this.parsedData={trackingEvents:{},isWrapper:!0},this.parsedData.vastAdTagUri=this.wrapper.querySelector("VASTAdTagURI").textContent.trim(),this.parsedData.wrapperAdvertiser=(null===(i=this.wrapper.querySelector("Advertiser"))||void 0===i?void 0:i.textContent.trim())||"";var t,i,n=[].slice.call(this.wrapper.querySelectorAll("Tracking")),s=[].slice.call(this.wrapper.querySelectorAll("Impression"));return this.getClickEvents(this.wrapper).getTrackingEvents(n).getImpressions(s),this.parsedData}},{key:"getTrackingEvents",value:function(e){var t=this;return e.forEach(function(e){var i=e.getAttribute("event");t.parsedData.trackingEvents[i]||(t.parsedData.trackingEvents[i]=[]),t.parsedData.trackingEvents[i].push(e.textContent.trim())}),this}},{key:"getImpressions",value:function(e){var t=this;return e.forEach(function(e){t.parsedData.trackingEvents.start||(t.parsedData.trackingEvents.start=[]),t.parsedData.trackingEvents.start.push(e.textContent.trim())}),this}},{key:"getOffsetAndDuration",value:function(){var e,t=d.stringToSeconds((null===(e=this.linear.querySelector("Duration"))||void 0===e?void 0:e.textContent)||"0"),i="number"!=typeof this.options.skipOffset||Number.isNaN(this.options.skipOffset)?d.stringToSeconds(this.linear.getAttribute("skipoffset")||"0"):this.options.skipOffset;return this.parsedData.duration=Math.min(t,this.options.maxDuration),this.parsedData.skipOffset=Math.min(i,this.options.maxSkipOffset),this}},{key:"getCtaAndTitle",value:function(){var e;return this.parsedData.title=(null===(e=this.xmlDoc.querySelector("AdTitle"))||void 0===e?void 0:e.textContent)||"Visit site",this.parsedData.ctaText=this.parsedData.title,this}},{key:"getCompanion",value:function(){var e,t=this.xmlDoc.querySelector("Creatives Creative CompanionAds Companion");if(!t)return this;var i=t.querySelector("StaticResource"),n=t.querySelector("CompanionClickThrough");this.parsedData.companion={icon:null==i?void 0:i.textContent,link:null==n?void 0:n.textContent.trim()};var s=t.querySelector("AdParameters");if(null!==(e=s)&&void 0!==e&&e.textContent){var r=s.textContent.trim(),o=(s=new DOMParser().parseFromString(r,"text/xml")).querySelector("CompanionBannerData Headline"),a=s.querySelector("CompanionBannerData CTABrandname"),l=s.querySelector("CompanionBannerData CTAButtonname"),h=s.querySelector("CompanionBannerData AdPoster");this.parsedData.companion.headline=null==o?void 0:o.textContent,this.parsedData.companion.ctabrandname=null==a?void 0:a.textContent,this.parsedData.companion.ctabuttonname=null==l?void 0:l.textContent,this.parsedData.companion.adposter=null==h?void 0:h.textContent.trim(),this.parsedData.companion.adlinktext=this.parsedData.companion.ctabrandname}return this}},{key:"getClickEvents",value:function(e){var t=e.querySelector("ClickThrough"),i=e.querySelector("ClickTracking");return t&&(this.parsedData.link=t.textContent.trim()),i&&(this.parsedData.trackingEvents.clickTracking=[i.textContent.trim()]),this}},{key:"getMediaFiles",value:function(){var e=this;return[].slice.call(this.linear.querySelectorAll("MediaFile")).forEach(function(t){e.parsedData.mediaFiles.push({height:t.getAttribute("height"),width:t.getAttribute("width"),type:t.getAttribute("type"),id:t.getAttribute("id"),url:t.textContent.trim()})}),this}},{key:"concatTrackingEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};return["clickTracking","complete","firstQuartile","midpoint","thirdQuartile","start"].forEach(function(n){i[n]=[].concat(e[n]||"",t[n]||"").filter(function(e){return e}).map(function(e){return e.replace(/^\s*\n/gm,"").trim()})}),i}},{key:"concatErrorUrls",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat([e||""],t).filter(function(e){return e})}},{key:"parseData",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(s,r){var o,a=[],l=e.match(/<Ad[\s\S]*?<\/Ad>/g);if(!l){r({errorVast:t1.xml_parsing,errorText:"No Ad tag",errorImpressions:(null===(o=n.trackingEvents)||void 0===o?void 0:o.start)||[],errorUrls:n.errorUrls||[]});return}l.forEach(function(e,s){a[s]={};var r,o,l=null===(r=e.match(/<Error><!\[CDATA\[(.*\[ERRORCODE\].*)\]\]><\/Error>/))||void 0===r||null===(r=r[1])||void 0===r?void 0:r.trim();try{if(e.match(/<Wrapper>/)){var h=t.parseWrapper(e),c=n.trackingEvents,u=n.errorUrls,d=t.concatTrackingEvents(h.trackingEvents,c);a[s]=t8(t8(t8({},h),a[s]),{},{trackingEvents:d}),a[s].errorUrls=t.concatErrorUrls(l,u),a[s].error=!1}else{var m=n.errorUrls,p=n.trackingEvents;a[s].errorTrackingLinearUrls=t.concatErrorUrls(l);var E=t.parseLinearAd(e,i),_=t.concatTrackingEvents(E.trackingEvents,p);a[s]=t8(t8(t8({},E),a[s]),{},{trackingEvents:_,errorUrls:m,isWrapper:!!n.isWrapper,wrapperAdvertiser:(null==n?void 0:n.wrapperAdvertiser)||null,error:!1})}}catch(e){a[s].error={errorVast:t1.xml_parsing,errorImpressions:(null===(o=a[s].trackingEvents)||void 0===o?void 0:o.start)||[],errorUrls:a[s].errorUrls||[],errorText:e}}}),s(a)})}}]),ie=function(e){return e.reduce(function(e,t){return e.concat(t)},[])};function it(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function ii(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?it(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var is=o(function e(t){var i=t.vastUrls,n=t.options,r=void 0===n?{}:n;s(this,e),this.ad=null,this.parser=new t7,this.options=r,this.savedData=[],this.vastUrls=i,this.loader=new t4({parser:this.parser,options:this.options}),this.adsWithError={},this.trackingEvents=null,this.options=r},[{key:"loadNextAd",value:function(e,t){var i=this;return new Promise(function(n,s){i.loader.loadData(e,t).then(function(e){i.getNextAd(e).then(n)}).catch(function(e){s({error:e})})})}},{key:"getAdData",value:function(e,t,i){var n=this;return(this.vastUrls&&this.parser.parsedData&&this.savedData.push({url:this.currentVastUrl,trackingEvents:this.trackingEvents,isWrapper:this.parser.parsedData.isWrapper}),Array.isArray(this.vastUrls))?(this.currentVastUrl=this.vastUrls.shift(),i(this.currentVastUrl),this.loader.setNewAdUrl(this.currentVastUrl),new Promise(function(s,r){n.loadNextAd(e,t).then(function(){!n.ad&&n.vastUrls.length?n.getAdData(e,t,i).then(s):s(n.ad)}).catch(function(e){r({error:e})})})):Promise.reject(Error("No valid vast urls array passed"))}},{key:"getNextAd",value:function(e){var t=this;return new Promise(function(i){var n;if(!(null!=e&&e.length)){t.ad=null,t.filterUniqueTrackingUrls(),i(t.ad);return}if(t.ad=e.shift(),t.ad.error){t.addError(),i(t.getNextAd(e));return}"function"==typeof(null===(n=t.options)||void 0===n?void 0:n.processAdsData)&&(t.ad=t.options.processAdsData(t.ad)),t.filterUniqueTrackingUrls(),i(t.ad)})}},{key:"addError",value:function(){this.adsWithError[this.currentVastUrl]||(this.adsWithError[this.currentVastUrl]=[]),this.adsWithError[this.currentVastUrl].push(this.ad.error)}},{key:"filterUniqueTrackingUrls",value:function(){var e,t,i,n=this,s=(null===(t=this.ad)||void 0===t||null===(t=t.trackingUrls)||void 0===t?void 0:t.start)||[],r=this.adsWithError?Object.keys(this.adsWithError):[],o={};r.forEach(function(e){o[e]=ie(n.adsWithError[e].map(function(e){return e.errorImpressions}))});var a=Object.values(o)||[];if(s.length>0||a.length>0){this.trackingEvents=ii(ii({},(null===(e=this.ad)||void 0===e?void 0:e.trackingUrls)||{}),{},{start:es(new Set([].concat(es(s),es(ie(a)))))});return}if(!(null!==(i=this.ad)&&void 0!==i&&i.trackingUrls)){this.trackingEvents=null;return}this.trackingEvents=ii({},this.ad.trackingUrls)}}]);let ir="application/vnd.apple.mpegurl";var io=class{setSource(e){return new Promise((t,i)=>{if(!e||!e.length){i({source:"controller",message:"setSource",details:"no media files"});return}let n=this.chooseSource(e);e.splice(e.indexOf(n),1),this.checkSource(n.url).then(()=>n.type===ir?this.setHlsSource(n.url):this.setMp4Source(n.url)).then(t).catch(()=>this.setSource(e).then(t,i))})}chooseSource(e){return e.find(e=>e.type===ir)||e[0]}setLoadingStop(){this.options.preloadLive||(this.preventLoadingStop=!0)}stopStreamPreload(){this.hls&&this.hls.on(window.Hls.Events.LEVEL_LOADED,()=>{var e;if(this.preventLoadingStop)return;let t=null===(e=this.hls.levels)||void 0===e?void 0:e.some(e=>{var t;return null==e?void 0:null===(t=e.details)||void 0===t?void 0:t.live});this.options.preloadLive||!t||this.loadLiveEventAttached||(this.hls.stopLoad(),y.once(f.Z.PLAYER_PLAY,()=>{this.hls.startLoad()}),this.loadLiveEventAttached=!0)})}getVideoType(){return this.videoType}setMp4Source(e){y.emit(f.Z.PLAYER_SET_VIDEO_SOURCE,e),this.videoType="mp4"}setHLSNativeSource(e){y.emit(f.Z.PLAYER_SET_VIDEO_SOURCE,e),this.videoType="hls-native"}setHlsSource(e){return new Promise((t,i)=>{if(!this.core.capabilities.hlsJs){if(this.core.capabilities.hls){this.setHLSNativeSource(e),t();return}i();return}if(this.videoType="hls-general",!window.Hls){var n,s;if(this.hlsJsRequested){i();return}this.hlsJsRequested=!0;let r=null===(s=this.core.options)||void 0===s?void 0:null===(n=s.hlsConfig)||void 0===n?void 0:n.libSrc;if(!r){i();return}c.getScript(r).then(()=>this.setHlsSource(e)).then(t).catch(i);return}this.videoType="hls-general-after-hls-load",this.hls=new window.Hls((0,m._)({},this.core.options.hlsConfig,this.hlsConfig)),this.hls.loadSource(e),this.videoType="hls-general-after-load-source",this.hls.attachMedia(this.core.videoElement),this.videoType="hls-general-after-attach",this.hls.on(window.Hls.Events.LEVEL_LOADED,()=>{var e,i,n,s;(null===(s=this.hls)||void 0===s?void 0:null===(n=s.levels)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:null===(e=i.details)||void 0===e?void 0:e.live)?this.videoType="hls-live":this.videoType="hls-vod",R.set("sourceLoaded",!0),this.isResolved=!0,t()}),this.hls.on(window.Hls.Events.ERROR,(e,t)=>{t.fatal&&(this.isResolved||this.setSourceErrors.push({type:"error",source:"hls",data:t,videoType:this.videoType}),y.emit(f.Z.PLAYER_ON_ERROR,{type:"error",source:"hls",data:t}),i())})})}getSetSourceErrors(){if(!this.setSourceErrors.length)return[];let e=[].concat(this.setSourceErrors);return this.setSourceErrors=[],e}checkSource(){return Promise.resolve()}clearSource(e,t,i,n){this.hls&&(this.hls.destroy(),this.hls=null),R.set("sourceLoaded",!1),i&&n?(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.PLAYER_ON_SEEKED),this.core.videoElement.style.opacity="0",y.once(f.Z.PLAYER_PLAY,()=>{y.emit(f.Z.PLAYER_SET_SOURCE,null,!0,e,t),this.core.videoElement.style.opacity="1"})):y.emit(f.Z.PLAYER_SET_SOURCE,null,i,e,t)}constructor(e,t){this.core=e,this.options=t,this.hlsConfig=null==t?void 0:t.hlsConfig,this.isResolved=!1,this.hls=null,this.hlsJsRequested=!1,this.videoType="undefined",this.setSourceErrors=[],this.preventLoadingStop=!1,this.loadLiveEventAttached=!1}},ia=o(function e(t){s(this,e),this.GAEnabled=t.GAEnabled,this.GACollect=t.GACollect,this.debug=t.debug},[{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.GAEnabled&&this.debug){console.warn("Ads GA tracking:",e,t);return}if(this.GAEnabled&&window.dataLayer){var i=tQ[e];i&&window.dataLayer.push({event:"oldEvent",eventCategory:"Preroll",eventAction:i,eventLabel:t})}}}]),il=["errorUrls","errorImpressions"];function ih(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function ic(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ih(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var iu=o(function e(t){s(this,e),this.core=t.core,this.debug=this.core.options.debug,this.enabled=t.collectorEnabled,this.startedTime=null,this.tracked={},this.data=t.extraData||{}},[{key:"setVideoType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(this.data.video_type=e)}},{key:"setTrackingUrl",value:function(e){this.data.url=e}},{key:"getTrackingUrl",value:function(){return this.data.url}},{key:"setIsWrapper",value:function(e){this.data.is_wrapper=!!e}},{key:"getIsWrapper",value:function(){return this.data.is_wrapper}},{key:"startTracking",value:function(){this.startedTime||(this.startedTime=new Date().getTime())}},{key:"trackClick",value:function(){this.tracked.preroll_click||(this.tracked.preroll_click=!0,this.track(tJ.preroll_click))}},{key:"trackShown5s",value:function(){this.tracked.preroll_shown_5s||(this.tracked.preroll_shown_5s=!0,this.track(tJ.preroll_shown_5s))}},{key:"getOrientation",value:function(){return void 0===window.orientation?null:180===window.orientation||0===window.orientation?"portrait":"landscape"}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.enabled){var i=ic(ic({},t),this.data),n=new Date().getTime()-this.startedTime;if(i.time=(null==t?void 0:t.time)||n,i.log="preroll",i.event=e,this.core.capabilities.mobile&&(i["str.orientation"]=this.getOrientation(),i["str.fullscreen"]=R.get("fullscreen"),i["str.deviceResolution"]="".concat(window.innerWidth,"_x_").concat(window.innerHeight)),this.debug){console.warn(e,i);return}A.ajax("GET",eo.getCollectorUrl(),i)}}},{key:"trackError",value:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=null!=e&&e.error?e.error:e;if(r){if(r instanceof Error){var o={error:t=r.toString(),errorText:i=r.stack};s&&(o["str.message"]=s),this.track(n||tJ.preroll_error,o);return}r.errorUrls,r.errorImpressions;var a=function(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}(r,il);if(Object.keys(a).length&&(null==a?void 0:a.statusText)!=="abort"){if((null==a?void 0:a.status)===204){this.track(tJ.preroll_empty);return}var l=null==a?void 0:a.status,h=null==e?void 0:e.errorVast;i=a.errorText;try{t=JSON.stringify(a)}catch(e){}var c={error:t,errorText:i,errorStatus:l,errorVast:h};s&&(c["str.message"]=s),this.track(n||tJ.preroll_error,c)}}}},{key:"trackShownError",value:function(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(this.setVideoType(t),null==e?void 0:e.source){case"controller":i=e;break;case"hls":i=this.processHLSErrorMessage(null==e?void 0:e.data);break;default:i=this.processVideoElementErrorMessage(e)}this.track("".concat(tJ.preroll_shown_error_prefix).concat(n),{error:i.message,errorText:i.details,"str.errorSetSource":s})}},{key:"processHLSErrorMessage",value:function(e){var t,i=null==e?void 0:e.details,n=null==e?void 0:e.type;if(n)t="HLS-TYPE ".concat(n);else if(e)try{t="HLS-DATA ".concat(JSON.stringify(e))}catch(i){t="HLS-DATA-ERROR ".concat(e)}else t="HLS_UNKNOWN_ERROR";if("mediaError"===n&&("manifestIncompatibleCodecsError"===i&&(n="sourceError"),"bufferNudgeOnStall"===i||"bufferStalledError"===i))return{message:"MEDIA_ERR_MEDIA",details:i};switch(n){case"networkError":t="MEDIA_ERR_NETWORK";break;case"mediaError":t="MEDIA_ERR_DECODE";break;case"sourceError":t="MEDIA_ERR_SRC_NOT_SUPPORTED"}return{message:t,details:i}}},{key:"processVideoElementErrorMessage",value:function(e){var t,i;return{message:({1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"})[null==e||null===(t=e.target)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.code]||"UNKNOWN_ERROR",details:null==e||null===(i=e.target)||void 0===i||null===(i=i.error)||void 0===i?void 0:i.message}}}]),id=o(function e(t){s(this,e),this.core=t.core,this.debug=this.core.options.debug,this.errorUrls=[],this.notSendedErrors=[],this.playerOnErrorEventId=null,this.init()},[{key:"init",value:function(){this.core.emit(f.Z.PLAYER_ERROR_CONTROLLER_BLOCK),this.playerOnErrorEventId=this.core.on(f.Z.PLAYER_ON_ERROR,this.onPlayerError,this)}},{key:"setErrorUrls",value:function(e){this.errorUrls=e}},{key:"trackErrorsOnPlay",value:function(){var e=this;this.notSendedErrors.forEach(function(t){e.track(t)}),this.notSendedErrors=[]}},{key:"onPlayerError",value:function(e){var t,i=P[null==e||null===(t=e.target)||void 0===t||null===(t=t.error)||void 0===t?void 0:t.code],s=t1.linear_general,r=t1.video_play_error,o=t1.video_not_found,a=t1.video_file_timeout,l=t1.unknown,h=n(n(n(n({},O.ABORTED,s),O.NETWORK,r),O.DECODER,o),O.SOURCE,a)[i]||l;h===l&&(null==e?void 0:e.type)==="error"&&(h=s),this.track(h)}},{key:"track",value:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t1.unknown;if(!(null!==(e=this.errorUrls)&&void 0!==e&&e.length)){this.notSendedErrors.push(i);return}-1!==Object.values(t1).indexOf(i)||(i=t1.unknown),this.errorUrls.forEach(function(e){var n=e.replace("[ERRORCODE]","".concat(i));if(t.debug){var s=Object.keys(t1);console.error("Ads VAST Error tracking:",i,s.find(function(e){return t1[e]===i}),n);return}A.ajax("GET",n)})}},{key:"detachEvents",value:function(){this.core.off(f.Z.PLAYER_ON_ERROR,this.playerOnErrorEventId),this.core.emit(f.Z.PLAYER_ERROR_CONTROLLER_UNBLOCK)}}]),im=o(function e(t){s(this,e),this.core=t.core,this.debug=this.core.options.debug,this.trackingData={},this.eventsIds={},this.played=!1,this.muted=this.core.videoElement.volume<.4,this.trackedTiming=t0,this.init()},[{key:"init",value:function(){this.eventsIds[f.Z.PLAYER_ON_PLAY]=this.core.on(f.Z.PLAYER_ON_PLAY,this.playerOnPlay,this),this.eventsIds[f.Z.PLAYER_ON_PAUSE]=this.core.on(f.Z.PLAYER_ON_PAUSE,this.playerOnPause,this),this.eventsIds[f.Z.PLAYER_SET_VOLUME]=this.core.on(f.Z.PLAYER_SET_VOLUME,this.playerOnSetVolume,this)}},{key:"setTrackingData",value:function(e){this.trackingData=e}},{key:"playerOnPlay",value:function(){if(!this.played){this.played=!0;return}this.track(tX.resume)}},{key:"playerOnPause",value:function(){this.core.videoElement.ended||this.track(tX.pause)}},{key:"playerOnSetVolume",value:function(){this.core.videoElement.volume<.4?this.muted||(this.track(tX.mute),this.muted=!0):this.muted&&(this.track(tX.unmute),this.muted=!1)}},{key:"detachEvents",value:function(){for(var e in this.eventsIds)this.core.off(e,this.eventsIds[e])}},{key:"sendEvent",value:function(e){if(this.debug){console.warn("Ads VAST tracking: ".concat(e));return}e&&(new Image().src=e)}},{key:"track",value:function(e){var t,i=this;if(null!==(t=this.trackingData)&&void 0!==t&&t[e]){if(Array.isArray(this.trackingData[e])){this.trackingData[e].map(function(e){return i.sendEvent(e)});return}this.sendEvent(this.trackingData[e])}}},{key:"trackTiming",value:function(e,t){if(!this.trackedTiming.start&&e>0){this.trackedTiming.start=!0,this.track(tX.start);return}var i=e/t;if(i>.25&&!this.trackedTiming.firstQuartile){this.track(tX.firstQuartile),this.trackedTiming.firstQuartile=!0;return}if(i>.5&&!this.trackedTiming.midpoint){this.track(tX.midpoint),this.trackedTiming.midpoint=!0;return}i>.75&&!this.trackedTiming.thirdQuartile&&(this.track(tX.thirdQuartile),this.trackedTiming.thirdQuartile=!0)}}]),ip=o(function e(t){s(this,e),this.core=t.core,this.options=t,this.initTrackers()},[{key:"initTrackers",value:function(){var e=this.options,t=e.GAEnabled,i=e.GACollect,n=e.collectorEnabled,s=e.extraData;this.GATracker=new ia({debug:this.core.options.debug,GAEnabled:t,GACollect:i}),this.collectorTracker=new iu({core:this.core,collectorEnabled:n,extraData:s}),this.vastErrorsTracker=new id({core:this.core}),this.vastEventsTracker=new im({core:this.core})}},{key:"sendErrorsSourceNotSet",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";null==e||e.forEach(function(e){t.collectorTracker.trackShownError(e,e.videoType,i,!0)})}},{key:"startTracking",value:function(){this.collectorTracker.startTracking()}},{key:"setVideoType",value:function(e){this.collectorTracker.setVideoType(e)}},{key:"isWrongParent",value:function(e){return!c.hasParentByTag(e.currentTarget,"a",2)}},{key:"trackShownError",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.collectorTracker.trackShownError(e,t,i)}},{key:"setErrorUrls",value:function(e){this.vastErrorsTracker.setErrorUrls(e)}},{key:"setIsWrapper",value:function(e){this.collectorTracker.setIsWrapper(e)}},{key:"setTrackingUrl",value:function(e){this.collectorTracker.setTrackingUrl(e)}},{key:"setTrackingData",value:function(e){this.vastEventsTracker.setTrackingData(e)}},{key:"detachPlayerEvents",value:function(){this.vastEventsTracker.detachEvents()}},{key:"unblockPlayerErrorController",value:function(){this.vastErrorsTracker.detachEvents()}},{key:"trackOnDataLoaded",value:function(e,t){var i=this;if(e){var n=Object.keys(e),s=this.collectorTracker.getTrackingUrl();null!=n&&n.length&&(this.collectorTracker.setVideoType(t),n.forEach(function(t){var n=e[t];(null==n?void 0:n.length)>0&&(i.setTrackingUrl(t),n.forEach(function(e){i.collectorTracker.trackError(e)}))}),this.setTrackingUrl(s),this.unblockPlayerErrorController())}}},{key:"trackTiming",value:function(e,t){this.vastEventsTracker.trackTiming(e,t)}},{key:"trackShown5s",value:function(){this.collectorTracker.trackShown5s()}},{key:"trackClick",value:function(){this.collectorTracker.trackClick()}},{key:"trackDataOnPlay",value:function(e){var t,i=this,n=e.adsWithError,s=e.trackingEvents,r=e.ad,o=e.savedData;this.collectorTracker.setIsWrapper(null==r?void 0:r.isWrapper);var a=null;n&&(a=ie(Object.values(n))),(null===(t=a)||void 0===t?void 0:t.length)>0&&a.forEach(function(e){i.vastErrorsTracker.setErrorUrls(e.errorUrls),i.vastErrorsTracker.track(e.errorVast)}),s&&(this.setTrackingData(s),this.vastEventsTracker.trackTiming(1),this.collectorTracker.track(tJ.preroll_impression)),null!=r&&r.errorUrls&&(this.vastErrorsTracker.setErrorUrls(r.errorUrls),this.vastErrorsTracker.trackErrorsOnPlay()),this.trackSavedAdsData(o)}},{key:"trackSavedAdsData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.collectorTracker.getTrackingUrl(),n=this.collectorTracker.getIsWrapper();t.forEach(function(t){e.collectorTracker.setIsWrapper(t.isWrapper),e.collectorTracker.setTrackingUrl(t.url),e.collectorTracker.track(tJ.preroll_impression)}),this.collectorTracker.setIsWrapper(n),this.collectorTracker.setTrackingUrl(i)}},{key:"trackCompletedClick",value:function(e){this.isWrongParent(e)||(this.vastEventsTracker.track(tX.clickTracking),this.GATracker.track(tQ.click,tz.completed),this.collectorTracker.track(tJ.preroll_link_completed),this.collectorTracker.trackClick())}},{key:"trackVideoLinkClick",value:function(){this.vastEventsTracker.track(tX.clickTracking),this.GATracker.track(tQ.click,tz.video),this.collectorTracker.track(tJ.preroll_link_video),this.collectorTracker.trackClick()}},{key:"trackLabelClick",value:function(e){this.vastEventsTracker.track(tX.clickTracking),this.GATracker.track(tQ.click,e?tz.linkAfterEnd:tz.link);var t=tJ.preroll_link_label,i=tJ.preroll_link_label_ended;this.collectorTracker.track(e?i:t),this.collectorTracker.trackClick()}},{key:"trackCallToActionClick",value:function(){this.vastEventsTracker.track(tX.clickTracking),this.GATracker.track(tQ.click,tz.cta),this.collectorTracker.track(tJ.preroll_link_cta),this.collectorTracker.trackClick()}},{key:"trackCompanionClick",value:function(e,t){if(!this.isWrongParent(e)){if(this.vastEventsTracker.track(tX.clickTracking),this.GATracker.track(tQ.click,t?tz.companionAfterEnd:tz.companion),c.hasClass(e.currentTarget,"xplayer-ads-block-companion--empty")){var i=tJ.preroll_link_companion_empty,n=tJ.preroll_link_companion_empty_ended;this.collectorTracker.track(t?n:i)}else{var s=tJ.preroll_link_companion,r=tJ.preroll_link_companion_ended;this.collectorTracker.track(t?r:s)}this.collectorTracker.trackClick()}}},{key:"trackPrerollTimeout",value:function(){this.collectorTracker.track(tJ.preroll_timeout_shown),this.vastErrorsTracker.track(t1.video_file_timeout)}},{key:"trackPrerollOk",value:function(){this.collectorTracker.track(tJ.preroll_ok),this.GATracker.track(tQ.parsed)}},{key:"trackSkip",value:function(){this.vastEventsTracker.track(tX.skip),this.GATracker.track(tQ.skip),this.collectorTracker.track(tJ.preroll_skip)}},{key:"trackPlay",value:function(){this.collectorTracker.track(tJ.preroll_play)}},{key:"trackPrerollShown",value:function(){this.GATracker.track(tQ.shown),this.collectorTracker.track(tJ.preroll_shown)}},{key:"trackPrerollEnded",value:function(){this.collectorTracker.track(tJ.preroll_ended),this.GATracker.track(tQ.viewToEnd)}},{key:"trackViewToSkip",value:function(){this.vastEventsTracker.track(tX.progress),this.GATracker.track(tQ.viewToSkip)}}]),iE=t2.HIDDEN_CLASS,i_=t2.ADS_ROOT_ELEMENT_CLASS,iv=t2.ADS_ROOT_ELEMENT_MOBILE_CLASS,ig=t2.ROOT_ELEMENT_PAUSED_CLASS,iy=t2.ADS_COMPLETED_ROOT_ELEMENT_CLASS,iS=t2.ADS_PRELOAD_CLASS,ib=t2.ADS_ELEMENT_CLASS,iT=t2.ADS_BLOCK_CLASS,iA=t2.ADS_ALLOWED_SKIP_SELECTOR,iL=t2.ADS_SKIP_WITH_TIMING_SELECTOR,ik=t2.ROOT_ELEMENT_ROTATE_SELECTOR,iC=t2.ROOT_ELEMENT_ANIMATE_CLASS,iR=o(function e(t){s(this,e),this.core=t.core,this.options=t.adsOptions,this.ad=t.ad,this.template=t.template,this.element=this.core.element,this.trackingController=t.trackingController,this.countedWhileBuffering=0,this.tresholdTimeout=null,this.pauseCounting=!1,this.whileBufferingTimer=null,this.countWhileBufferingBinded=this.countWhileBuffering.bind(this),this.countWhileBufferingCallbackBinded=this.countWhileBufferingTimerCallback.bind(this),this.ended=!1,this.init()},[{key:"init",value:function(){this.render(),this.domCache=this.getDomCache()||{},this.attachEvents()}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className=ib,this.options.blockCssClass&&(this.element.className+=" ".concat(this.options.blockCssClass)),this.element.innerHTML=this.template(this.ad,this.options)}},{key:"getDomCache",value:function(){var e=this;return Object.keys(t3).reduce(function(t,i){return t[i]=e.element.querySelector(t3[i]),t},{})}},{key:"skipCallback",value:function(){y.emit(f.Z.ADS_SKIP)}},{key:"trackLabelClick",value:function(){this.trackingController.trackLabelClick(this.ended)}},{key:"trackCompanionClick",value:function(e){this.trackingController.trackCompanionClick(e,this.ended)}},{key:"startCounting",value:function(){this.pauseCounting=!1}},{key:"attachEvents",value:function(){var e=this;y.on(f.Z.PLAYER_PAUSE,function(){e.pauseCounting=!0}),y.on(f.Z.PLAYER_PLAY,function(){e.pauseCounting=!1}),this.onLinkClickBind=this.onLinkClick.bind(this),this.clickWithParentCheckBind=this.clickWithParentCheck.bind(this);var t=this.domCache,i=t.skip,n=t.link,s=t.label,r=t.companion,o=t.completed,a=t.callToAction,l=t.video,h=t.pauseButton,c="click";null==i||i.addEventListener(c,this.skipCallback),null==s||s.addEventListener(c,this.trackLabelClick.bind(this)),null==r||r.addEventListener(c,this.trackCompanionClick.bind(this));var u=this.trackingController.trackCompletedClick.bind(this.trackingController),d=this.trackingController.trackCallToActionClick.bind(this.trackingController);null==o||o.addEventListener(c,u),null==a||a.addEventListener(c,d),null==n||n.addEventListener(c,this.trackingController.trackVideoLinkClick.bind(this.trackingController)),null==l||l.addEventListener(c,this.togglePlayPause.bind(this)),null==h||h.addEventListener(c,this.togglePlayPause.bind(this)),null==a||a.addEventListener(c,this.onLinkClickBind),null==s||s.addEventListener(c,this.onLinkClickBind),null==n||n.addEventListener(c,this.onLinkClickBind),null==r||r.addEventListener(c,this.clickWithParentCheckBind),null==o||o.addEventListener(c,this.clickWithParentCheckBind)}},{key:"showCallToAction",value:function(e){this.domCache.callToAction&&(!c.hasClass(this.domCache.callToAction,iE)||e<3||c.removeClass(this.domCache.callToAction,iE))}},{key:"appendElement",value:function(){c.addClass(this.core.element,i_),this.options.mobileStyles&&c.addClass(this.core.element,iv),this.core.element.appendChild(this.element)}},{key:"hideOnSkip",value:function(){c.removeClass(this.domCache.skip,iT),c.removeClass(this.domCache.skip.querySelector(iA),iE),c.addClass(this.domCache.skip.querySelector(iL),iE)}},{key:"onLinkClick",value:function(){if(this.options.linkClickSkip){var e=!!this.core.capabilities.mobile&&!!this.core.capabilities.idevice;y.emit(f.Z.ADS_RESUME_PLAY,null,!1,e)}else y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.ADS_ON_LINK_CLICK)}},{key:"clickWithParentCheck",value:function(e){c.hasParentByTag(e.currentTarget,"a",2)&&this.onLinkClick()}},{key:"hideAds",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.moveFooter(e),this.moveLabel(e),i||c.removeClass(this.core.element,ig),c.removeClass(this.core.element,i_),c.removeClass(this.core.element,iv),c.removeClass(this.core.element,iy),c.removeClass(this.core.element,iS),null===(t=this.element)||void 0===t||null===(t=t.parentNode)||void 0===t||t.removeChild(this.element),this.element=null}},{key:"moveLabel",value:function(e){if(e&&this.domCache.label){var t,i;if(null===(t=this.domCache.label)||void 0===t||t.removeEventListener("click",this.onLinkClickBind),null!==(i=this.options)&&void 0!==i&&i.labelContainerSelector){var n=document.querySelector(this.options.labelContainerSelector),s=(null==n?void 0:n.childNodes[this.options.labelContainerOrder])||null;null==n||n.insertBefore(this.domCache.label,s)}else this.core.element.appendChild(this.domCache.label),this.domCache.label.addEventListener("click",this.pauseOnClick)}}},{key:"pauseOnClick",value:function(){y.emit(f.Z.PLAYER_PAUSE)}},{key:"moveFooter",value:function(e){if(e&&this.domCache.footer&&this.options.footerContainerSelector){var t=document.querySelector(this.options.footerContainerSelector);if(t)return t.innerHTML="",t.appendChild(this.domCache.footer),y.emit(f.Z.ADS_UNBLOCK_BOTTOM_BANNER),!0}return!1}},{key:"setDurationTiming",value:function(e,t){this.options.noSkipOffset||(this.domCache.durationTiming||(this.domCache.durationTiming=document.querySelector(t3.durationTiming)),this.domCache.durationTiming.innerText=d.parseTime(e,t>=3600))}},{key:"complete",value:function(){c.addClass(this.core.element,iy);var e,t=null===(e=this.domCache.footerCompleted)||void 0===e?void 0:e.querySelector(ik);t&&c.addClass(t,iC)}},{key:"setEnded",value:function(e){this.ended=e}},{key:"togglePlayPause",value:function(){R.get("playing")?y.emit(f.Z.PLAYER_PAUSE):y.emit(f.Z.PLAYER_PLAY)}},{key:"calculateSkipTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.options.noSkipOffset||this.ad.skipOffset,i=this.options.skipAdjustment,n=i?t/i:1,s=R.get("duration"),r=e?s:R.get("currentTime"),o=Math.ceil(((t=t>s?s:t)-r-this.countedWhileBuffering)/n);o>0?this.domCache.skipTiming.innerText=o:(y.emit(f.Z.ADS_ALLOW_SKIP),this.resetTimeouts(),this.options.noSkipOffset?y.emit(f.Z.ADS_RESUME_PLAY):this.hideOnSkip(),this.trackingController.trackViewToSkip())}},{key:"countOnPause",value:function(e){if(this.options.tresholdTimer&&!e){if(this.resetTimeouts(),this.pauseCounting)return!0;this.tresholdTimeout=setTimeout(this.countWhileBufferingBinded,this.options.tresholdTimer)}return!1}},{key:"countWhileBuffering",value:function(){this.whileBufferingTimer=setTimeout(this.countWhileBufferingCallbackBinded,1e3)}},{key:"countWhileBufferingTimerCallback",value:function(){this.countedWhileBuffering+=1,this.countWhileBuffering(),this.calculateSkipTime()}},{key:"resetTimeouts",value:function(){clearTimeout(this.tresholdTimeout),clearTimeout(this.whileBufferingTimer)}}]);let iO=()=>({vastUrls:null,preflight:!1,trackCollector:100*Math.random()<=10,trackCollectorExtra:{},trackGA:!1,trackGACollect:["play","request","response","parsed","shown","viewToSkip","viewToEnd","skip","click"],abortServerTimeout:3,abortShownTimeout:15,maxDuration:100,maxSkipOffset:100,completedStateDuration:5,labelContainerSelector:null,footerContainerSelector:null,skipAdjustment:null,videoLinkDisable:!0,blockCssClass:null,wrappersDepthLimit:5,processAdsData:null,mobileStyles:!1,linkClickSkip:!1,preloadVideo:!1,preloadLive:!1,tresholdTimer:0,additionalButton:null,isNewPrerollDesign:!1,userLeftTime:null,userBackTime:null});var iP=class{init(){var e,t;!er(this.vastUrls)&&this.template&&"function"==typeof this.template&&(this.options.isNewPrerollDesign&&this.core.element.classList.add("xplayer-ads-new-design"),R.set("ads",!0),this.adsData=new is({vastUrls:this.vastUrls,options:this.options}),this.trackingController=new ip({core:this.core,collectorEnabled:this.options.trackCollector,GAEnabled:null===(e=this.options)||void 0===e?void 0:e.trackGA,GACollect:null===(t=this.options)||void 0===t?void 0:t.trackGACollect,extraData:(0,m._)({url:this.vastUrls},this.options.trackCollectorExtra||{})}),this.savePlaybackRateEventId=y.once(f.Z.PLAYER_ON_RATECHANGE,this.savePlaybackRate,this),y.once(f.Z.PLAYER_PLAY,()=>{this.trackingController.startTracking(),this.trackingController.trackPlay()},this),this.playerPlayEventId=y.once(f.Z.PLAYER_PLAY,this.playRequest,this),this.core.autoplay?y.emit(f.Z.PLAYER_PLAY):this.options.preflight&&(this.loadData(),this.preloadingData=!0,R.set("ads_preload",!0)))}loadData(){if(!this.core.sourceController.ready){y.once(f.Z.SOURCE_CONTROLLER_READY,this.loadData,this);return}this.trackingController.startTracking();let e=this.trackingController.collectorTracker,t=this.trackingController.GATracker,i=e.track.bind(e),n=t.track.bind(t),s=e.setTrackingUrl.bind(e);this.adsData.getAdData(i,n,s).then(()=>this.dataLoaded())}dataLoaded(){var e;if(this.trackingController.trackOnDataLoaded(null===(e=this.adsData)||void 0===e?void 0:e.adsWithError,this.sourceController.getVideoType()),this.adsData.ad||(c.removeClass(this.core.element,t2.ADS_LOADING_CLASS),y.emit(f.Z.ADS_ENDED,null,this.options.preflight),y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),y.off(f.Z.PLAYER_PLAY,this.playerPlayEventId),(!this.preloadingData||this.playRequested)&&this.sourceController.clearSource(this.getAdsStartedTime(),this.forceLoadSource,!this.preloadingData||this.playRequested,!1)),this.playRequested?this.trackingController.trackDataOnPlay(this.adsData):y.once(f.Z.PLAYER_ON_PLAY,()=>{this.trackingController.trackDataOnPlay(this.adsData)}),!this.adsData.ad){this.isAdSrcLoaded&&(this.isAdSrcLoaded=!1,this.resumePlayWithPreload());return}if(this.options.preflight&&!this.playRequested&&this.options.preloadVideo){this.sourcePromise=this.sourceController.setSource(this.adsData.ad.mediaFiles),c.addClass(this.core.element,t2.ADS_PRELOAD_CLASS),this.sourcePromise.then(()=>{this.isAdSrcLoaded=!0;let e=null,t=null,i=null;this.trackingController.setVideoType(this.sourceController.getVideoType()),i=y.once(f.Z.PLAYER_ON_ERROR,i=>{var n,s;if(this.trackingController.trackShownError(i,this.sourceController.getVideoType(),"_preload"),null===(s=this.adsData)||void 0===s?void 0:null===(n=s.vastUrls)||void 0===n?void 0:n.length){this.loadData();return}this.resumePlayWithPreload(),y.off(f.Z.PLAYER_ON_CAN_PLAY,e),y.off(f.Z.PLAYER_ON_LOADED_DATA,t),clearTimeout(this.abortShownTimeout)}),e=y.once(f.Z.PLAYER_ON_CAN_PLAY,()=>{this.options.preloadLive||this.sourceController.stopStreamPreload(),y.off(f.Z.PLAYER_ON_LOADED_DATA,t),y.off(f.Z.PLAYER_ON_ERROR,i),clearTimeout(this.abortShownTimeout)}),t=y.once(f.Z.PLAYER_ON_LOADED_DATA,()=>{this.options.preloadLive||this.sourceController.stopStreamPreload(),y.off(f.Z.PLAYER_ON_CAN_PLAY,e),y.off(f.Z.PLAYER_ON_ERROR,i),clearTimeout(this.abortShownTimeout)})}).catch(e=>{var t,i;if(this.trackingController.trackShownError(e,this.sourceController.getVideoType(),"_preload"),null===(i=this.adsData)||void 0===i?void 0:null===(t=i.vastUrls)||void 0===t?void 0:t.length){this.loadData();return}this.resumePlayWithPreload()}).finally(()=>{this.trackingController.sendErrorsSourceNotSet(this.sourceController.getSetSourceErrors(),"_preload")});return}this.playRequested&&this.playRequest()}resumePlayWithPreload(){y.emit(f.Z.ADS_ENDED,null,this.options.preflight),y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),this.resumePlay({type:"error"},!this.preloadingData||this.playRequested),y.off(f.Z.PLAYER_PLAY,this.playerPlayEventId)}playRequest(){var e;if(c.addClass(this.core.element,t2.ADS_LOADING_CLASS),!this.adsData.ad){this.playRequested=!0,y.emit(f.Z.SHOW_LOADER),this.preloadingData||this.loadData(),this.adsData.loader.setServerTimeout(this.options.abortServerTimeout);return}this.preloadingData=!1,this.sourceController.setLoadingStop(),y.off(f.Z.PLAYER_PLAY,this.playerPlayEventId),this.trackingController.setIsWrapper(null===(e=this.adsData.ad)||void 0===e?void 0:e.isWrapper),this.playAds()}savePlaybackRate(){let e=this.core.videoElement;1!==e.playbackRate&&(this.oldPlaybackRate=e.playbackRate,e.playbackRate=1)}playAds(){var e;let t=null===(e=this.adsData)||void 0===e?void 0:e.ad;if(!t||this.blocked){y.emit(f.Z.ADS_ENDED,null,this.options.preflight),this.resumePlay(null,!this.preloadingData);return}this.trackingController.trackPrerollOk(),this.renderController=new iR({core:this.core,adsOptions:this.options,template:this.template,countdownThumbUrl:this.countdownThumbUrl,ad:this.getExtendedAd(),trackingController:this.trackingController}),this.allowSkip=!this.options.noSkipOffset&&!t.skipOffset,this.attachEvents(),this.prepareCoreMobile(),this.prepareCoreVr(),this.showAds()}setStreamAdjustment(){this.core.videoElement.currentTime=0}attachEvents(){y.on(f.Z.ADS_RESUME_PLAY,this.resumePlay.bind(this)),y.on(f.Z.ADS_SKIP,this.skipAds,this),y.on(f.Z.ADS_ALLOW_SKIP,()=>{this.allowSkip=!0}),y.once(f.Z.PLAYER_ON_SEEKING,this.setStreamAdjustment.bind(this)),y.once(f.Z.ADS_ON_LINK_CLICK,()=>{this.bindedCalcUserReturnTime=this.calcUserReturnsTime.bind(this),document.addEventListener("visibilitychange",this.bindedCalcUserReturnTime)})}isXHLPreroll(){return"xhamsterlive.com"===es(new URLSearchParams(this.adsData.currentVastUrl)).reduce(function(e,t){var i=v(t,2),n=i[0],s=i[1];return e[n]=s,e},{}).targetDomain}calcUserReturnsTime(){if(document.hidden?this.userLeftTime=new Date().getTime():this.userBackTime=new Date().getTime(),!this.userLeftTime||!this.userBackTime)return;let e={time:this.userBackTime-this.userLeftTime};this.trackingController.collectorTracker.track(tJ.preroll_link_returned_to_xh_ms,e),document.removeEventListener("visibilitychange",this.bindedCalcUserReturnTime)}getExtendedAd(){let e={isXHLPreroll:this.isXHLPreroll(),companionIconDefault:this.options.companionIconDefault,companionAdLinkText:this.options.companionAdLinkText};return(0,m._)({},this.adsData.ad,e)}prepareCoreMobile(){this.core.capabilities.mobile&&(this.core.options.mobileInline||(this.core.videoElement.setAttribute("webkit-playsinline",!0),this.core.videoElement.setAttribute("playsinline",!0)),this.core.options.mobileStubControls&&(this.core.stubControls=!1,this.core.videoElement.removeAttribute("controls")))}resumeCoreMobile(){this.core.capabilities.mobile&&(this.core.options.mobileInline||(this.core.videoElement.removeAttribute("webkit-playsinline"),this.core.videoElement.removeAttribute("playsinline")),this.core.options.mobileStubControls&&(this.core.stubControls=!0))}prepareCoreVr(){y.emit(f.Z.VR_ANIMATE_STOP),y.emit(f.Z.VR_REMOVE_CROSSORIGIN)}resumeCoreVr(){y.once(f.Z.PLAYER_ON_PLAYING,()=>y.emit(f.Z.VR_ANIMATE_START)),y.emit(f.Z.VR_ADD_CROSSORIGIN)}getAdsStartedTime(){let e=R.get("savedCurrentTime"),t=e||R.get("currentTime")||d.parseTimeOffset()||0;return e&&R.set("savedCurrentTime",!1),t}setAdDuration(){var e;let t=[Number(this.options.noSkipOffset),Number(null===(e=this.adsData.ad)||void 0===e?void 0:e.duration),Number(R.get("duration"))].filter(e=>!Number.isNaN(e));R.set("duration",Math.min(...t))}showAds(){var e;this.trackingController.setIsWrapper(null===(e=this.adsData.ad)||void 0===e?void 0:e.isWrapper),this.setAdDuration(),this.playerOnErrorEventId=y.once(f.Z.PLAYER_ON_ERROR,this.onPlayerError,this),this.playerOnEndedEventId=y.once(f.Z.PLAYER_ON_ENDED,this.onPlayerEnded,this),this.playerOnPlayingEventId=y.once(f.Z.PLAYER_ON_PLAYING,()=>{this.renderController.appendElement()}),this.playerOnDurationChange=y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.setAdDuration.bind(this)),this.timeUpdateEventId=y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.onTimeUpdate,this),this.adsStartedPlayingTime=this.getAdsStartedTime(),this.playerPlayFailedEventId=y.on(f.Z.PLAYER_PLAY_FAILED,()=>{y.emit(f.Z.CONTROLS_RESET,this.adsStartedPlayingTime),this.resumePlay({type:"error"})}),this.core.videoElement.removeAttribute("poster"),this.sourcePromise||(this.sourcePromise=this.sourceController.setSource(this.adsData.ad.mediaFiles)),this.sourcePromise.then(()=>{this.isAdSrcLoaded=!0,this.sourcePromise.isResolved=!0,y.emit(f.Z.ADS_STARTED),y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),this.core.videoElement.currentTime=.1,y.emit(f.Z.PLAYER_PLAY);let e=this.sourceController.getVideoType();this.trackingController.setVideoType(e),this.trackingController.sendErrorsSourceNotSet(this.sourceController.getSetSourceErrors()),this.abortShownTimeout=setTimeout(()=>{this.trackingController.trackPrerollTimeout(),this.resumePlay({type:"error"})},1e3*this.options.abortShownTimeout)}).catch(e=>{var t,i;if(null===(i=this.adsData)||void 0===i?void 0:null===(t=i.vastUrls)||void 0===t?void 0:t.length){this.loadData();return}y.emit(f.Z.PLAYER_ON_PREVENT_PLAY_UNBLOCK),this.trackingController.trackShownError(e,this.sourceController.getVideoType()),this.resumePlay({type:"error"})}).finally(()=>{this.trackingController.sendErrorsSourceNotSet(this.sourceController.getSetSourceErrors())})}onTimeUpdate(){if(this.accumulateShownTime(),this.renderController.countOnPause(this.allowSkip))return;let e=this.options.noSkipOffset||this.adsData.ad.duration||R.get("duration"),t=R.get("currentTime"),i=Math.ceil(e-t);if(this.renderController.setDurationTiming(i,e),this.trackingController.trackTiming(t,e),!this.played&&t>0&&(this.played=!0,this.trackingController.trackPrerollShown(),clearTimeout(this.abortShownTimeout)),this.renderController.showCallToAction(t),i<1){y.emit(f.Z.PLAYER_PAUSE),this.onPlayerEnded();return}this.allowSkip||this.renderController.calculateSkipTime()}accumulateShownTime(){this.oldDate||(this.oldDate=Date.now());let e=Date.now()-this.oldDate;e>500?this.oldDate=null:(this.oldDate=Date.now(),this.accumulatedShownTimeMs+=e),this.accumulatedShownTimeMs>5e3&&this.trackingController.trackShown5s(tJ.preroll_shown_5s)}onPlayerEnded(){var e;if((null===(e=this.adsData.trackingEvents)||void 0===e?void 0:e.complete)&&this.trackingController.vastEventsTracker.track(tX.complete),this.renderController.domCache.footerCompleted){this.showCompleted(),this.allowSkip||this.renderController.calculateSkipTime(!0);return}this.onEnded()}onPlayerError(e){var t;(null===(t=this.sourcePromise)||void 0===t?void 0:t.isResolved)&&(clearTimeout(this.abortShownTimeout),this.trackingController.trackShownError(e,this.sourceController.getVideoType()),this.resumePlay(e))}showCompleted(){this.renderController.complete();let e=this.options.completedStateDuration-1,t=setInterval(()=>{this.renderController.setDurationTiming(e),(e-=1)<0&&(clearInterval(t),this.onEnded())},1e3)}onEnded(){this.ended||(R.set("ended",!1),this.trackingController.trackPrerollEnded(),this.resumePlay())}resumePlay(e=null,t=!0,i=!1){var n,s,r,o;let a=e&&"error"===e.type;null===(n=this.trackingController)||void 0===n||n.detachPlayerEvents(),null===(s=this.trackingController)||void 0===s||s.unblockPlayerErrorController(),y.off(f.Z.PLAYER_ON_ENDED,this.playerOnEndedEventId),y.off(f.Z.PLAYER_ON_RATECHANGE,this.savePlaybackRateEventId),y.off(f.Z.PLAYER_ON_PLAYING,this.playerOnPlayingEventId),y.off(f.Z.PLAYER_ON_TIMEUPDATE,this.timeUpdateEventId),y.off(f.Z.PLAYER_ON_ERROR,this.playerOnErrorEventId),y.off(f.Z.PLAYER_PLAY_FAILED,this.playerPlayFailedEventId),y.off(f.Z.PLAYER_ON_DURATION_CHANGE,this.playerOnDurationChange),this.resumeCoreMobile(),y.emit(f.Z.CONTROLS_RESET,this.adsStartedPlayingTime),this.sourceController.clearSource(this.adsStartedPlayingTime,this.forceLoadSource,t,i),this.resumeCoreVr(),null===(r=this.renderController)||void 0===r||r.hideAds(!a,!t),!this.renderController&&c.hasClass(this.core.element,t2.ADS_PRELOAD_CLASS)&&c.removeClass(this.core.element,t2.ADS_PRELOAD_CLASS),c.removeClass(this.core.element,t2.ADS_LOADING_CLASS),y.emit(f.Z.ADS_ENDED,!a,!t),y.emit(f.Z.VR_TEXTURE_CLEAR),this.oldPlaybackRate&&(this.core.videoElement.playbackRate=this.oldPlaybackRate),this.ended=!0,null===(o=this.renderController)||void 0===o||o.setEnded(!0)}skipAds(){this.allowSkip&&(this.renderController.resetTimeouts(),this.trackingController.trackSkip(),this.resumePlay())}constructor(e,t,i={}){var n;this.core=e,this.options=(0,m._)({},iO(),i.ads||{}),this.template=t,this.vastUrls=null==(n=JSON.parse(JSON.stringify(this.options.vastUrls)))?void 0:n.filter(function(e){return e}),this.playRequested=!1,this.sourceController=new io(this.core,this.options),this.playerOnEndedEventId=null,this.timeUpdateEventId=null,this.playerOnErrorEventId=null,this.playerPlayEventId=null,this.playerOnPlayingEventId=null,this.playerOnDurationChange=null,this.trackingController=null,this.adsStartedPlayingTime=0,this.allowSkip=!1,this.played=!1,this.ended=!1,this.blocked=!1,this.abortShownTimeout=null,this.forceLoadSource=!!this.core.capabilities.chrome,this.preloadingData=!1,this.isAdSrcLoaded=!1,this.sourcePromise=null,this.oldPlaybackRate=null,this.oldDate=null,this.accumulatedShownTimeMs=0,this.init()}};let iw=(e={})=>{let{link:t,headline:i,ctabrandname:n}=e.companion||{};return!!(t&&i&&n)};function iN(e){if(!iw(e))return{link:e.link,headline:e.title,ctabrandname:e.title,adlinktext:e.title};let{link:t,headline:i,ctabrandname:n,adlinktext:s}=e.companion;return{link:t,headline:i,ctabrandname:n,adlinktext:s}}let iI=(e={})=>{var t;return(null===(t=e.country)||void 0===t?void 0:t.code)?`<div class="xh-flag xplayer-preroll-flag ${e.country.code.toLowerCase()}"></div>`:""},iD=(e={})=>{let t="xplayer-ads-block__xhl-info-label",i=e.isCompanion?`${t}--companion`:"";return`<div class="${t} ${i}" data-role="xhl-info-label"></div>`},iU=(e={})=>{let{linearAdvertiser:t,wrapperAdvertiser:i,isCompanion:n}=e,s=t||i;if(!s)return"";let r="xplayer-ads-block__advertiser-label",o=n?`${r}--companion`:"";return`
        <div class="${r} ${o}" data-advertiser="${s}" data-role="ad-label">
            AD
        </div>
    `},iM=(e={},t={})=>t.isEuCountry?e.isXHLPreroll?iD(e):iU(e):"",iY=(e={})=>{var t,i;if(!iw(e))return e.title;let{isXHLPreroll:n,companionAdLinkText:s}=e;return n?s||(null===(i=e.companion)||void 0===i?void 0:i.adlinktext):null===(t=e.companion)||void 0===t?void 0:t.adlinktext},ix=(e={})=>{var t;if(!iw(e))return"";let{companionIconDefault:i,isXHLPreroll:n}=e,s=null===(t=e.companion)||void 0===t?void 0:t.icon;return n?s||i:s},iZ=(e={},t={})=>{let i=iM((0,m._)({},e,{isCompanion:!0}),t),n="xplayer-ads-block__footer",s=`${n}-brandname-text`,r=iY(e);return i?`
            <span class="${n}-brandname--flex">
                <span class="${s} ${s}--white">
                    ${r}
                </span>
                ${i}
            </span>
        `:`
            <span class="${n}-brandname-ad">Ad</span>
            <span class="${s}">${r}</span>
        `},iB={getAdLabel:iM,getVideoLink:(e,t)=>t.videoLinkDisable?'<div class="xplayer-ads-block__video"></div>':`<a class="xplayer-ads-block__link" target="_blank" href="${e.link}"></a>`,getAdsLinks(e,t){var i;let n=null===(i=t.country)||void 0===i?void 0:i.name;return`<div class="xplayer-ads-block-links">
                  ${n&&e.isXHLPreroll?`
                    <div class="xplayer-ads-block-live-label">
                        <div class="xplayer-ads-block-live-label__record"></div>
                        ${n}
                        ${iI(t)}
                    </div>`:""}
                </div>`},getAdsInfo(e,t,i=!1){let n=i?iM(e,t):"",s=t.noSkipOffset,r=`
            <span class="xplayer-ads-block__info-new--timing">
                ${d.parseTime(e.duration)}
            </span>`;return`<div class="xplayer-ads-block__info-new">
                    ${s?"":r}
                    ${n}
                </div>`},getAdsSkip(e,t={}){let i=t.noSkipOffset,n=i||t.skipAdjustment||e.skipOffset;return`<div class="xplayer-ads-block__skip ${n?" xplayer-ads-block__skip--blocked":""}">
                <span class="xplayer-ads-block__skip--with-timing ${n?"":" xh-helper-hidden"}">
                    ${(i?"Video starts in":null)||"Skip Ad in"}
                    <span class="xplayer-ads-block__skip--timing">
                        ${n}
                    </span>
                </span>
                ${i?"":`
                    <span class="xplayer-ads-block__skip--allowed-skip${n?" xh-helper-hidden":""}">
                        Skip Ad
                    </span>`}
            </div>`},getAdditionalButton:e=>e.additionalButton||"",getAdsCallToActionDesktop:(e={})=>`
            <a href="${e.link}" target="_blank" class="xplayer-ads-block__cta xplayer-ads-block__callToAction xh-helper-hidden">
                <span class="xplayer-ads-block__callToAction--no-title">Visit site</span>
                <span class="xplayer-ads-block__callToAction--with-title">${e.ctaText}</span>
            </a>
        `,getCompanion(e={},t={}){let{link:i,ctabrandname:n,headline:s,adlinktext:r}=iN(e),o=ix(e),a=iw(e)?"":"xplayer-ads-block-companion--empty";return`
        <a href="${i}" target="_blank"  class="xplayer-ads-block-companion
          ${a} xplayer-ads-block-companion-type-a xplayer-ads-block__footer">
          <div class="xplayer-ads-block__footer-content">
            ${o?`
              <div class="xplayer-ads-block__footer-icon-wrapper">
                <span class="xplayer-ads-block__footer-icon">
                    <img src="${o}" alt="${n}">
                </span>
              </div>`:""}

            <div class="xplayer-ads-block__footer-texts ${o?"":"xplayer-ads-block__footer-texts--no-icon"}">
              <div class="xplayer-ads-block__footer-headline-container">
                <div class="xplayer-ads-block__footer-headline">
                    <span>${s.trim()}  ${iI(t)}</span>
                </div>
              </div>
              <div class="xplayer-ads-block__footer-brandname">
                ${iZ(e,t)}
              </div>
            </div>
          </div>

          <span class="xplayer-ads-block__footer-action-button">
              <span>${iw(e)?n:r}</span>
              <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
          </span>

          <div class="xplayer-ads-block__footer-action">
            <span class="xplayer-ads-block__footer-action-button">
                <span>${iw(e)?n:r}</span>
                <div class="xplayer-ads-block__footer-action-button-link-icon"></div>
            </span>
          </div>
        </a>`},getCompanionCompleted(e={},t={},i=!1){let{linearAdvertiser:n,wrapperAdvertiser:s}=e||{},{link:r,headline:o,ctabrandname:a,adlinktext:l}=iN(e),h=ix(e),c=n||s||e.isXHLPreroll,u=t.isEuCountry&&c;return t.noSkipOffset?"":`<a
          href="${r}"
          target="_blank"
          class="xplayer-ads-block-companion-completed xplayer-ads-block-companion-completed-experiment xplayer-ads-block__footer-completed"
        >
            <div class="xplayer-rotate ${u&&i?"xplayer-rotate--with-advertiser":""}">
                <div class="spinner pie"></div>
                <div class="filler pie"></div>
                <div class="mask"></div>
            </div>
            <div class="xplayer-ads-block__footer-completed-center">
                ${h?`
                  <span class="xplayer-ads-block__footer-completed-icon">
                    <img src="${h}" alt="${a}">
                  </span>`:""}

                <div class="xplayer-ads-block__footer-headline-container">
                  <div class="xplayer-ads-block__footer-completed-headline">
                      ${o.trim()}
                  </div>
                  ${iI(t)}
                </div>

                ${iw(e)?`<div class="xplayer-ads-block__footer-completed-brandname">
                      ${a}
                      <span class="xplayer-ads-block__footer-completed-link-icon"></span>
                    </div>`:`<span class="xplayer-ads-block__footer-action-button
                      xplayer-ads-block__footer-completed-action-button
                    ">
                      <span>${iw(e)?a:l}</span>
                    </span>`}
            </div>
        </a>`},getCompanionAdsDesktop:(e,t)=>iw(e)?`
        <a
          href="${e.companion.link}" target="_blank"
          class="xplayer-ads-block-companion xplayer-ads-block__footer
          xplayer-ads-block-companion--desktop"
        >
            <div class="xplayer-ads-block__footer-info-content">
              <span class="xplayer-ads-block__footer-icon">
                  <img src="${ix(e)}" alt="${e.companion.ctabrandname}">
              </span>
              <div class="xplayer-ads-block__footer-texts">
                <div class="xplayer-ads-block__footer-headline-container">
                  <div class="xplayer-ads-block__footer-headline">
                      <span>${e.companion.headline.trim()} ${iI(t)}</span>
                  </div>
                </div>

                <div class="xplayer-ads-block__footer-brandname">
                  ${iZ(e,t)}
                </div>
              </div>
            </div>

            <div class="xplayer-ads-block__footer-action">
                <span class="xplayer-ads-block__footer-action-button">
                    <span>${e.companion.ctabrandname}</span>
                </span>
            </div>
        </a>`:"",getPauseButton:()=>`<div class="xplayer-ads-block__pause-button">
                    <div class="xplayer-ads-block__pause-button-inner"></div>
                </div>`};function iG(e,t){let{getVideoLink:i,getAdsLinks:n,getAdsInfo:s,getAdsCallToActionDesktop:r,getAdsSkip:o,getCompanionAdsDesktop:a,getCompanionCompleted:l}=iB,h=a(e,t);return h?`${i(e,t)}
        ${n(e,t)}
        ${l(e,t,!0)}
        ${s(e,t,!0)}
        ${o(e,t)}
        ${h}
        ${r(e,t)}`:`${i(e,t)}
    ${n(e,t)}
    ${s(e,t,!0)}
    ${o(e,t)}
    ${r(e,t)}`}var iV=class{init(){this.controllers=this.initControllers(this.controllersList),0!==this.controllers.length&&(this.render(),this.attachEvents())}initControllers(e){return e.map(e=>new e(this.core,this.options))}render(){this.element=document.createElement("div"),this.element.className="yld-pcxplayer-hover-menu",this.renderControllers(),this.core.element.appendChild(this.element)}renderControllers(){this.controllers.map(e=>e.element&&this.element.appendChild(e.element))}attachEvents(){this.element.addEventListener("mouseover",this.onElementMouseOver.bind(this)),this.element.addEventListener("mouseleave",this.onElementMouseLeave.bind(this)),this.element.addEventListener("click",this.onElementClick.bind(this))}onElementClick(e){"a"===e.target.tagName.toLowerCase()&&(y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.HOVER_ELEMENT_CLICK,e.target.getAttribute("data-name")))}onElementMouseOver(e){e.target!==e.currentTarget&&y.emit(f.Z.USER_ACTION_PAUSE)}onElementMouseLeave(){y.emit(f.Z.USER_ACTION_UNPAUSE)}constructor(e,t=[],i){this.core=e,this.controllersList=t,this.options=i&&i.hover,this.controllers=null,this.init()}},iH=e=>`
    <span class="${e.className}__label">${e.label}</span>
    <span class="${e.className}__message">${e.message}</span>
    ${e.tooltip}
`,iF=class{init(){this.options.linkUrl&&(this.render(),this.attachEvents())}render(){this.element=document.createElement("a"),this.element.className=this.options.className,this.element.setAttribute("href",this.options.linkUrl),this.element.setAttribute("target","_blank"),this.element.setAttribute("rel","nofollow noopener"),this.element.innerHTML=iH(this.options),y.emit(f.Z.HOVER_LINK_RENDERED)}attachEvents(){this.element.addEventListener("click",this.onClick.bind(this))}onClick(){y.emit(f.Z.PLAYER_PAUSE),y.emit(f.Z.HOVER_LINK_CLICK),this.options.onClick&&"function"==typeof this.options.onClick&&this.options.onClick()}constructor(e,t){this.core=e,this.options=t&&t.link||{},this.element=null,this.init()}},i$="xp-progress__handler--active",iW="xp-progress-bar--drag",iK="xh-helper-hidden",ij=o(function e(t,i,n){s(this,e),this.core=t,this.options=(null==i?void 0:i.progressBar)||{},this.spriteViewer=n,this.isNewMobileDesign2=null==i||null===(r=i.newMobileDesign2)||void 0===r?void 0:r.enabled,this.seeking=!1,this.progressBarUpdated=!1,this.wasOnPause=!0,this.disableTouchEvents=this.options.disableTouchEvents||!1,this.settingsMenuOpened=!1;var r,o=this.core.capabilities.idevice;this.dragPauseRAF=null,this.isDragPaused=!1,this.prevDragEventTimestamp=0,this.dragPauseTreshold=this.options.dragPauseTreshold||(o?100:200),this.seekingTime=0,this.elementWidth=0,this.seekerMovedTimes=0,this.mouseLeavedSeeker=!1,this.isProgressBarBlocked=!0,this.isDragging=!1,this.draggingTimeout=null,this.draggingTreshold=25,this.clientX=null,this.clientY=null,this.swipeLock=null,this.touchedSeeker=!1,this.init()},[{key:"init",value:function(){this.render(),c.addClass(this.core.element,"xp-progress-bar-full"),this.transformStyleProperty=c.checkTransformVendor(),this.animationStepBind=this.animationStep.bind(this),this.checkDragPauseBind=this.checkDragPause.bind(this),this.attachEvents(),this.elementWidth||(this.elementWidth=this.element.offsetWidth);var e,t=null===(e=this.spriteViewer)||void 0===e?void 0:e.render();t&&(this.element.appendChild(t),this.spriteViewer.setParentElementWidth(this.elementWidth))}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className="xp-progress-bar ".concat(this.isNewMobileDesign2?iK:""),this.element.innerHTML=this.isNewMobileDesign2?'\n        <span class="seeker">\n            <span class="buffer"></span>\n            <span class="filler"></span>\n            <span class="handle"></span>\n        </span>\n    ':'\n        <span class="seeker togglable">\n            <span class="buffer"></span>\n            <span class="filler"></span>\n            <span class="handle"></span>\n        </span>\n    ',this.seekerElement=this.element.querySelector(".seeker"),this.fillerElement=this.element.querySelector(".filler"),this.handleElement=this.element.querySelector(".handle"),this.bufferElement=this.element.querySelector(".buffer"),this.core.element.appendChild(this.element)}},{key:"attachEvents",value:function(){this.options.disableProgressBarControl||(this.attachMouseEvents(),this.disableTouchEvents||this.attachTouchEvents()),y.on(f.Z.PLAYER_ON_PROGRESS,this.onPlayerProgress,this),y.on(f.Z.PLAYER_ON_LOADED_DATA,this.onPlayerProgress,this),y.on(f.Z.PLAYER_ON_CAN_PLAY,this.onPlayerProgress,this),y.on(f.Z.PLAYER_ON_PLAYING,this.onPlayerPlay,this),y.on(f.Z.PLAYER_ON_PAUSE,this.onPlayerPause,this),y.on(f.Z.PLAYER_ON_ENDED,this.onPlayerEnd,this),y.on(f.Z.PLAYER_PAUSE,this.setWasOnPause,this),y.on(f.Z.PLAYER_SET_SOURCE,this.onPlayerSetSource,this),y.on(f.Z.NO_USER_ACTION,this.onNoUserAction,this),y.on(f.Z.USER_ACTION,this.onUserAction,this),y.on(f.Z.PROGRESS_BAR_UPDATE,this.onProgressBarUpdate,this),y.on(f.Z.PROGRESS_BAR_VISUAL_UPDATE,this.progressBarVisualUpdate,this),y.on(f.Z.PROGRESS_BAR_UPDATE_END,this.onProgressBarUpdateEnd,this),y.on(f.Z.CONTROLS_RESET,this.onControlsReset,this),y.once(f.Z.PLAYER_PLAY,this.unblockProgressBar,this),window.addEventListener("resize",this.onResize.bind(this)),y.on(f.Z.PLAYER_ON_FULLSCREEN_CHANGE,this.onResize.bind(this)),y.on(f.Z.PROGRESS_BAR_RESIZE,this.onResize.bind(this))}},{key:"unblockProgressBar",value:function(){c.removeClass(this.element,iK),this.isProgressBarBlocked=!1}},{key:"attachMouseEvents",value:function(){this.element.addEventListener("mousedown",this.onSeekerElementMouseDown.bind(this)),this.element.addEventListener("mouseenter",this.onSeekerElementMouseEnter.bind(this)),this.element.addEventListener("mousemove",this.onSeekerElementMouseMove.bind(this)),this.element.addEventListener("mouseleave",this.onSeekerElementMouseLeave.bind(this)),this.core.element.addEventListener("mousemove",this.onCoreElementMouseMove.bind(this)),this.core.element.addEventListener("mouseup",this.onCoreElementMouseUp.bind(this)),this.core.element.addEventListener("mouseleave",this.onCoreElementMouseLeave.bind(this))}},{key:"attachTouchEvents",value:function(){this.element.addEventListener("touchstart",this.onSeekerElementTouchStart.bind(this)),this.core.element.addEventListener("touchmove",this.onTouchMoveEvent.bind(this)),this.core.element.addEventListener("touchend",this.onCoreElementTouchEnd.bind(this))}},{key:"setPauseOnHandlerMove",value:function(){!R.get("chromecast")&&R.get("playing")&&(y.emit(f.Z.PAUSE_ACTION_BLOCK),y.emit(f.Z.PLAYER_PAUSE,{wasOnPause:!1}))}},{key:"saveCurrentTime",value:function(e){if(this.isProgressBarBlocked){var t=100*this.getOffsetLeftFromMouseEvent(e)/this.elementWidth,i=this.core.options.duration;R.set("savedCurrentTime",i*t/100)}}},{key:"onSeekerElementMouseDown",value:function(e){var t=this;0!==e.button&&!e.touches.length||this.progressBarUpdated||this.isAdsPlaying()||(this.saveCurrentTime(e),this.setPauseOnHandlerMove(),R.set("seeking",!0),this.seeking=!0,this.animation=!1,this.handleElement.classList.add(i$),this.onCoreElementMouseMove(e),this.draggingTimeout=setTimeout(function(){t.isDragging=!0},this.draggingTreshold))}},{key:"onSeekerElementTouchStart",value:function(e){this.touchedSeeker=!0,this.clientX=e.touches[0].clientX,this.clientY=e.touches[0].clientY,this.progressBarUpdated=!1,this.saveCurrentTime(e),this.onSeekerElementMouseEnter(e,!1)}},{key:"onSeekerElementMouseEnter",value:function(e,t){!this.isAdsPlaying()&&(this.mouseLeavedSeeker=!1,this.showThumbs(this.calculateTimeFromMouseOffset(e)),t||y.emit(f.Z.USER_ACTION_PAUSE))}},{key:"onSeekerElementMouseMove",value:function(e){this.progressBarUpdated||this.isAdsPlaying()||this.showThumbs(this.calculateTimeFromMouseOffset(e))}},{key:"calculateTimeFromMouseOffset",value:function(e){this.elementWidth||(this.elementWidth=this.element.offsetWidth);var t=this.getOffsetLeftFromMouseEvent(e);return(this.isProgressBarBlocked?this.core.options.duration:R.get("duration"))*(100*t/this.elementWidth)/100}},{key:"onSeekerElementMouseLeave",value:function(){y.emit(f.Z.USER_ACTION_UNPAUSE),this.mouseLeavedSeeker=!0,this.seeking||y.emit(f.Z.USER_SEEK_HIDE_PREVIEW)}},{key:"isAdsPlaying",value:function(){return R.get("ads_playing")||R.get("xplayer-ads")||R.get("xplayer-ads-mobile")}},{key:"onTouchMoveEvent",value:function(e){var t=this.isNewMobileDesign2&&this.isAdsPlaying()||this.isNewMobileDesign2&&this.progressBarUpdated;this.touchedSeeker&&!t&&(this.setSwipeLock(e),"vertical"!==this.swipeLock)&&(this.onSeekerElementMouseDown(e),!this.seeking||this.progressBarUpdated||this.isAdsPlaying()||(this.setPauseOnHandlerMove(),this.checkDragPause(),y.emit(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE),e.preventDefault(),this.seekerMovedTimes++,this.seekingTime=this.calculateTimeFromMouseOffset(e),this.progressBarVisualUpdate(this.seekingTime),this.showThumbs(this.seekingTime),this.isDragPaused=!1,this.prevDragEventTimestamp=new Date().getTime(),this.core.element.classList.add(iW)))}},{key:"onCoreElementMouseMove",value:function(e){!this.seeking||this.progressBarUpdated||this.isAdsPlaying()||(this.checkDragPause(),y.emit(f.Z.PLAYER_ON_PROGRESS_BAR_MOVE),e.preventDefault(),this.seekerMovedTimes++,this.seekingTime=this.calculateTimeFromMouseOffset(e),this.progressBarVisualUpdate(this.seekingTime),this.showThumbs(this.seekingTime),this.isDragPaused=!1,this.prevDragEventTimestamp=new Date().getTime())}},{key:"onCoreElementMouseUp",value:function(e){cancelAnimationFrame(this.dragPauseRAF),this.isDragging=!1,!this.seeking||this.progressBarUpdated||this.isAdsPlaying()||(this.isProgressBarBlocked&&this.saveCurrentTime(e),R.set("seeking",!1),this.seeking=!1,this.handleElement.classList.remove(i$),y.emit(f.Z.PAUSE_ACTION_UNBLOCK),this.seekingTime=this.calculateTimeFromMouseEvent(e),this.setCurrentTime(this.seekingTime,!0),R.get("playing")&&!1===this.animation&&(this.animation=!0,this.animationStep()),clearTimeout(this.draggingTimeout),y.emit(f.Z.USER_SEEK_HIDE_PREVIEW),this.sendSeekerUIStats())}},{key:"onCoreElementMouseLeave",value:function(e){this.onCoreElementMouseUp(e)}},{key:"setSwipeLock",value:function(e){if(!this.swipeLock){var t=e.changedTouches[0],i=t.clientX,n=t.clientY,s=this.clientX-i,r=this.clientY-n;this.swipeLock=Math.abs(s)-Math.abs(r)>-.1?"horizontal":"vertical"}}},{key:"checkDragPause",value:function(){if(!(R.get("ads")||R.get("ads_preload"))){var e=new Date().getTime();!this.isDragPaused&&e-this.prevDragEventTimestamp>=this.dragPauseTreshold&&(this.isDragPaused=!0,this.setCurrentTime(this.seekingTime)),this.dragPauseRAF=requestAnimationFrame(this.checkDragPauseBind)}}},{key:"onCoreElementTouchEnd",value:function(e){if(this.touchedSeeker){if(this.touchedSeeker=!1,this.clientX=null,this.clientY=null,this.swipeLock=null,!this.seeking){y.emit(f.Z.USER_SEEK_HIDE_PREVIEW);return}this.mouseLeavedSeeker=!0,y.emit(f.Z.USER_ACTION_UNPAUSE),this.core.userActionController.getHasNoUserAction()||y.emit(f.Z.USER_ACTION,!0),this.onCoreElementMouseUp(e),this.core.element.classList.remove(iW)}}},{key:"setCurrentTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isAdsPlaying()){var i=Math.floor(e)>=Math.floor(R.get("duration"))?R.get("duration"):e;y.emit(f.Z.USER_SEEK_SET_CURRENT_TIME_PROGRESS_BAR,i,this.isDragPaused),(!this.wasOnPause&&i<R.get("duration")&&t||R.get("ads"))&&y.emit(f.Z.PLAYER_PLAY)}}},{key:"onPlayerProgress",value:function(e){if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.buffered){var t,i=e.target.buffered,n=e.target.currentTime,s=e.target.duration;this.updateBuffer(i,n,s)}}},{key:"calculateTimeFromMouseEvent",value:function(e){this.elementWidth||(this.elementWidth=this.element.offsetWidth),null===(t=this.spriteViewer)||void 0===t||t.setParentElementWidth(this.elementWidth);var t,i=R.get("duration"),n=100*this.getOffsetLeftFromMouseEvent(e)/this.elementWidth*i/100;return n<=0?0:n>=i?i:n}},{key:"getOffsetLeftFromMouseEvent",value:function(e){var t=this.getEventClientX(e)+(window.scrollX||window.pageXOffset)-c.findElPosition(this.element).left;return t<0?0:t>this.elementWidth?this.elementWidth:t}},{key:"getEventClientX",value:function(e){return window.TouchEvent&&e instanceof window.TouchEvent?e.changedTouches.length&&e.changedTouches[0].clientX||e.touches.length&&e.touches[0].clientX:e.clientX}},{key:"animationStep",value:function(){!R.get("chromecast")&&!1!==this.animation&&!0!==this.seeking&&(this.core.videoElement.buffered.length||this.isAdsPlaying())&&(this.updateFillerAndHandler(this.core.videoElement.currentTime),this.animationInterval=requestAnimationFrame(this.animationStepBind))}},{key:"setAnimation",value:function(){this.wasOnPause=!1,this.animation=!0,this.animationStep()}},{key:"onPlayerPlay",value:function(){this.seeking&&(R.set("seeking",!1),this.seeking=!1,this.setCurrentTime(this.seekingTime),y.emit(f.Z.USER_SEEK_HIDE_PREVIEW)),this.core.capabilities.idevice?y.once(f.Z.PLAYER_ON_CAN_PLAY_THROUGH,this.setAnimation,this):this.setAnimation(),this.wasOnPause=!1}},{key:"setWasOnPause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wasOnPause;this.wasOnPause||(this.wasOnPause=void 0===t||t)}},{key:"onPlayerPause",value:function(){this.animation=!1}},{key:"onPlayerEnd",value:function(){this.updateFillerAndHandler(R.get("duration"))}},{key:"onPlayerSetSource",value:function(){cancelAnimationFrame(this.animationInterval)}},{key:"onResize",value:function(){var e=this;setTimeout(function(){var t;e.elementWidth=e.element.offsetWidth,null===(t=e.spriteViewer)||void 0===t||t.setParentElementWidth(e.elementWidth),e.updateFillerAndHandler(e.core.videoElement.currentTime)},1)}},{key:"updatePlayedTime",value:function(e){y.emit(f.Z.PROGRESS_BAR_HANDLER_MOVE,e)}},{key:"updateFillerAndHandler",value:function(e){(!this.elementWidth||this.element.offsetWidth&&this.elementWidth!==this.element.offsetWidth)&&(this.elementWidth=this.element.offsetWidth);var t=R.get("ads")?this.core.options.duration:R.get("duration");this.isAdsPlaying()&&(t=R.get("duration"));var i=e/t,n=i>.9999?1:i,s=(n*this.elementWidth).toFixed(1);this.transformX!==s&&(this.handleElement.style.setProperty(this.transformStyleProperty,"translateX(".concat(s,"px)")),this.fillerElement.style.setProperty(this.transformStyleProperty,"scaleX(".concat(n,")")),this.transformX=s)}},{key:"updateBuffer",value:function(e,t,i){for(var n=0;n<e.length;n++)if(Math.floor(e.start(n))<=t&&t<e.end(n)){var s=e.end(n)/i;s=s>.98?1:s,this.bufferElement.style.setProperty(this.transformStyleProperty,"scaleX(".concat(s,")"))}}},{key:"onNoUserAction",value:function(){!R.get("playing")||this.isAdsPlaying()||(this.animation=!1)}},{key:"onUserAction",value:function(){!1!==R.get("playing")&&!0!==this.animation&&!0!==this.seeking&&(this.animation=!0,this.animationStep())}},{key:"progressBarVisualUpdate",value:function(e){this.updateFillerAndHandler(e),this.updatePlayedTime(e)}},{key:"onProgressBarUpdate",value:function(e){if(R.get("chromecast")){this.updateFillerAndHandler(e);return}this.seekingTime=e,R.set("seeking",!0),this.seeking=!0,this.progressBarUpdated=!0,this.progressBarVisualUpdate(e)}},{key:"onControlsReset",value:function(e){this.updateFillerAndHandler(e),this.bufferElement.style.setProperty(this.transformStyleProperty,"scaleX(0)")}},{key:"onProgressBarUpdateEnd",value:function(){R.set("seeking",!1),this.seeking=!1,this.progressBarUpdated=!1,R.get("playing")&&this.animationStep()}},{key:"sendSeekerUIStats",value:function(){this.seekerMovedTimes>3?y.emit(f.Z.STATISTICS_UI,eu.seeking_by_progress_bar_dragging):y.emit(f.Z.STATISTICS_UI,eu.seeking_by_progress_bar_clicking),this.seekerMovedTimes=0}},{key:"onSettingsMenuToggled",value:function(e){this.settingsMenuOpened=e,y.emit(f.Z.USER_SEEK_HIDE_PREVIEW)}},{key:"showThumbs",value:function(e){if(!this.settingsMenuOpened){if(this.mouseLeavedSeeker){this.mouseLeavedSeeker=!1;return}if(!this.elementWidth){var t;this.elementWidth=this.element.offsetWidth,null===(t=this.spriteViewer)||void 0===t||t.setParentElementWidth(this.elementWidth)}y.emit(f.Z.USER_SEEK_SHOW_PREVIEW,e,{showBackgroundPreview:this.isDragging})}}},{key:"checkIfThumbsNeedHide",value:function(e){return!(e.target===this.element||e.target===this.seekerElement||e.target===this.handleElement||e.target===this.bufferElement||e.target===this.fillerElement)||window.TouchEvent&&e instanceof window.TouchEvent}}]),iq=o(function e(t){s(this,e),this.core=t,this.thumbWidth=0,this.seekerWidth=0,this.thumbHeight=0,this.thumbSizeMaxConstraint=160,this.thumbsHideTimeout=0,this.thumbsShown=!1,this.isSpriteLoaded=!1,this.backgroundImageUrl="",this.init()},[{key:"init",value:function(){this.render(),this.attachEvents()}},{key:"render",value:function(){return this.element=document.createElement("div"),this.element.className="xp-progress-bar-sprite-viewer",this.element.innerHTML='<span class="thumbs xh-helper-hidden">\n      <span class="sprite"></span>\n      <span class="time">""</span>\n    </span>',this.thumbsElement=this.element.querySelector(".thumbs"),this.spriteElement=this.element.querySelector(".sprite"),this.timeElement=this.element.querySelector(".time"),this.element}},{key:"setCurrentFrame",value:function(e,t){var i=t.spritePosition,n=t.thumbsAmount,s=t.size,r=t.originThumbWidth;this.isSpriteLoaded||(this.isSpriteLoaded=!0,this.currentSprite={size:s,thumbsAmount:n,originThumbWidth:r},this.calcThumbSizes()),this.backgroundImageUrl&&this.backgroundImageUrl===e||(this.backgroundImageUrl=e,this.spriteElement.style.backgroundImage="url(".concat(e,")"),this.calcBackgroundSize(n)),this.spriteElement.style.backgroundPositionX="".concat(-1*this.thumbWidth*i,"px")}},{key:"setParentElementWidth",value:function(e){this.seekerWidth=e}},{key:"show",value:function(e){if(this.thumbsElement.className="thumbs",this.thumbsShown=!0,e){var t=Number(this.core.options.duration)||R.get("duration");this.timeElement.childNodes[0].nodeValue=d.parseTime(e,t>=3600);var i=e/t,n=Math.max(5,Math.min(this.seekerWidth*i-this.thumbWidth/2,this.seekerWidth-this.thumbWidth-15));this.thumbsElement.style.left="".concat(n,"px")}}},{key:"hide",value:function(){!1!==this.thumbsShown&&(this.thumbsElement.className="thumbs xh-helper-hidden",this.thumbsShown=!1)}},{key:"hideAnimated",value:function(){!1!==this.thumbsShown&&(c.addClass(this.thumbsElement,"animate"),clearTimeout(this.thumbsHideTimeout),this.thumbsHideTimeout=setTimeout(this.hide.bind(this),500))}},{key:"calcBackgroundSize",value:function(e){this.spriteElement.style.backgroundSize="".concat(this.thumbWidth*e,"px ").concat(this.thumbHeight,"px")}},{key:"calcThumbSizes",value:function(){if(this.currentSprite){var e,t,i=this.currentSprite,n=i.size,s=i.originThumbWidth,r=n.height;r>s?t=(e=r>this.thumbSizeMaxConstraint?this.thumbSizeMaxConstraint:r)/r*s:e=(t=s>this.thumbSizeMaxConstraint?this.thumbSizeMaxConstraint:s)/s*r,this.spriteElement.style.width="".concat(t,"px"),this.spriteElement.style.height="".concat(e,"px"),this.thumbsElement.style.width="".concat(t,"px"),this.thumbsElement.style.top="".concat(-(e+15),"px"),this.thumbHeight=e,this.thumbWidth=t}}},{key:"attachEvents",value:function(){y.on(f.Z.PLAYER_ON_RESIZE,this.calcThumbSizes.bind(this))}}]),iQ=i(60402),iz=i.n(iQ),iX=o(function e(t){s(this,e),this.loader=t.loader,this.spritePreviewViewers=t.spritePreviewViewers||{},this.swipeSeekController=t.swipeSeekController||null,this.currentTime=0,this.init(),this.setPreview(t.showPreview)},[{key:"init",value:function(){var e;return iz().async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.attachEvents(),t.next=3,iz().awrap(this.loader.getCurrentFrame(this.currentTime));case 3:e=t.sent,this.swipeSeekController&&this.swipeSeekController.setSeekOptions(e);case 5:case"end":return t.stop()}},null,this,null,Promise)}},{key:"attachEvents",value:function(){y.on(f.Z.USER_SEEK_SET_CURRENT_TIME,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SET_CURRENT_TIME_DOUBLETAP,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SET_CURRENT_TIME_PROGRESS_BAR,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SET_CURRENT_TIME_SWIPE,this.setCurrentTime.bind(this)),y.on(f.Z.USER_SEEK_SHOW_PREVIEW,this.showCurrentThumb.bind(this)),y.on(f.Z.USER_SEEK_HIDE_PREVIEW,this.hideCurrentThumb.bind(this)),y.on(f.Z.PLAYER_SET_PREVIEW,this.setPreview.bind(this)),y.on(f.Z.PLAYER_ON_DURATION_CHANGE,this.onDurationChange,this),y.on(f.Z.ADS_STARTED,this.setIsBlockedByAd,this),y.on(f.Z.PLAYER_ON_TIMEUPDATE,this.checkForThumbHide.bind(this))}},{key:"onDurationChange",value:function(e){R.get("ads")||R.get("ads_playing")||this.loader.setIsBlockedByAd(!1)}},{key:"setIsBlockedByAd",value:function(){this.loader.setIsBlockedByAd(!0)}},{key:"setPreview",value:function(e){if(!e&&!1!==e){this.showPreview=!0;return}this.showPreview=e}},{key:"setCurrentTime",value:function(e,t){y.emit(f.Z.PLAYER_SET_CURRENT_TIME,e),t||y.emit(f.Z.PROGRESS_BAR_UPDATE_END)}},{key:"showCurrentThumb",value:function(e,t){var i,n,s,r,o,a,l,h,c;return iz().async(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.showPreview){u.next=2;break}return u.abrupt("return");case 2:return this.currentTime=e,u.next=5,iz().awrap(this.loader.getCurrentFrame(e));case 5:if(!(!(s=u.sent)||(null===(i=s.spriteInfo)||void 0===i||null===(i=i.size)||void 0===i?void 0:i.width)===0||(null===(n=s.spriteInfo)||void 0===n||null===(n=n.size)||void 0===n?void 0:n.height)===0)){u.next=9;break}return this.hideCurrentThumb({withAnimation:!1}),u.abrupt("return");case 9:r=s.spriteUrl,o=s.spriteInfo,l=(a=this.spritePreviewViewers).backgroundSpriteViewer,h=a.progressBarSpriteViewer,c=!R.get("ads_preload")&&!R.get("ads_playing"),l&&t.showBackgroundPreview&&c&&(l.setCurrentFrame(r,o),l.show()),h&&(h.setCurrentFrame(r,o),h.show(e));case 14:case"end":return u.stop()}},null,this,null,Promise)}},{key:"hideCurrentThumb",value:function(e){Object.values(this.spritePreviewViewers).filter(function(e){return e}).forEach(function(t){null!=e&&e.withAnimation&&t.hideAnimated?t.hideAnimated():t.hide()})}},{key:"checkForThumbHide",value:function(){if(!R.get("swiping")&&!R.get("seeking")){var e;null===(e=this.spritePreviewViewers.backgroundSpriteViewer)||void 0===e||e.hide()}}}]);function iJ(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function i0(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?iJ(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iJ(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}(l=h||(h={})).OLD="old",l.NEW="new";var i1={size:{width:0,height:0}},i2={size:"",lengthInSec:0,thumbsAmount:0,spriteNumber:0,format:"",type:h.OLD},i3={template:"",duration:0,nextSpritePreloadOffsetFrames:50},i5=o(function e(t){var i,n,r;if(s(this,e),this.options=(null==t?void 0:t.spriteLoader)||i3,this.introDuration=(null===(i=this.options)||void 0===i?void 0:i.introDuration)||0,null!==(n=this.options)&&void 0!==n&&n.template&&(this.template=this.parseTemplate(this.options.template),this.framesOffset=(null===(r=this.options)||void 0===r?void 0:r.nextSpritePreloadOffsetFrames)||i3.nextSpritePreloadOffsetFrames,this.currentSprite=i1,this.loadedSprites={},this.realSteps=[],this.options.steps=this.options.steps||[],this.isBlockedByAd=R.get("ads")||R.get("ads_playing"),!this.isOldTemplate())){var o=this.template,a=o.thumbsAmount,l=o.lengthInSec;this.secondsInSprite=a*l}},[{key:"setIsBlockedByAd",value:function(e){this.isBlockedByAd=e}},{key:"parseTemplate",value:function(e){var t=e.substring(e.lastIndexOf("/")+1);this.spritesAPI=e.replace(t,"");var i=t.split(".");if(i.length<4)return i2;if(i.length>4){var n=v(i,5),s=n[0],r=n[1],o=n[2],a=n[3],l=n[4];return{size:s,lengthInSec:Number(r),thumbsAmount:Number(o),spriteNumber:Number(a),format:l,type:h.NEW}}var c=v(i,4),u=c[0],d=c[1],m=c[2],p=c[3];return{size:u,thumbsAmount:Number(d),spriteNumber:m,format:p,type:h.OLD}}},{key:"getCurrentSpriteNumber",value:function(e){return Math.floor(e/this.secondsInSprite)}},{key:"getSpriteUrl",value:function(e){var t=this.template,i=t.size,n=t.spriteNumber,s=t.lengthInSec,r=t.format,o=t.thumbsAmount;if(this.isOldTemplate())return i&&o&&n&&r?"".concat(this.spritesAPI).concat(i,".").concat(o,".").concat(n,".").concat(r):null;if(!i||!o||!r||!s)return null;var a=this.getCurrentSpriteNumber(e);return"".concat(this.spritesAPI).concat(i,".").concat(s,".").concat(o,".").concat(a,".").concat(r)}},{key:"loadSprite",value:function(e,t){return new Promise(function(i){var n=new Image,s=Date.now();y.emit(f.Z.SPRITE_LOAD,t,e),n.onload=function(n){var r=n.currentTarget,o=r.width,a=r.height;y.emit(f.Z.SPRITE_LOAD_SUCCESS,Date.now()-s,t,e),i({width:o,height:a})},n.onerror=function(){y.emit(f.Z.SPRITE_LOAD_ERROR,Date.now()-s,t,e),i(null)},n.src=e})}},{key:"checkTimeEdges",value:function(e,t){return e<0?0:e>t?t:e}},{key:"isOldTemplate",value:function(){var e;return(null===(e=this.options)||void 0===e?void 0:e.template)&&this.template.type===h.OLD}},{key:"calcNewTemplateThumbsAmount",value:function(e,t){var i=Math.floor(t/this.secondsInSprite);e-=this.introDuration;var n=this.template,s=n.lengthInSec,r=n.thumbsAmount,o=n.size,a=this.currentSprite.size.width,l=Math.ceil(e/s),h=Math.floor(l/r)<=i||e<=200,c=h&&l!==r?l%r:r,u=0;(!this.introDuration||t%this.secondsInSprite>4)&&(u=Math.floor((t-this.introDuration)%this.secondsInSprite/s),this.introDuration&&t>this.secondsInSprite&&t%this.secondsInSprite>4&&(u+=1));var d=a/c,m=d,p=this.currentSprite.size.height>d,E=d===Number(o);m=h&&!E?p&&c<=2?a/2:p?a/c:a/(c-1):d;var _=a/m;return _<=c&&h&&u>=(c=_)&&(u=_-1),t<this.introDuration&&(u=0),{spritePosition:u,thumbsAmount:c,originThumbWidth:m}}},{key:"preloadNextSprite",value:function(e){var t,i,n,s,r,o,a,l,h,c;return iz().async(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.isOldTemplate()){u.next=2;break}return u.abrupt("return");case 2:if(t=(null==e?void 0:e.thumbsAmount)||50,i=(null==e?void 0:e.spritePosition)||0,!(t!==this.template.thumbsAmount)){u.next=6;break}return u.abrupt("return");case 6:if(n=this.getCurrentSpriteNumber(e.currentTime)+1,r=(s=this.template).size,o=s.lengthInSec,a=s.format,l="".concat(this.spritesAPI).concat(r,".").concat(o,".").concat(t,".").concat(n,".").concat(a),h=this.loadedSprites[l],!(i>t-this.framesOffset&&!h)){u.next=20;break}return this.loadedSprites[l]="loading",u.next=14,iz().awrap(this.loadSprite(l,n));case 14:if(c=u.sent){u.next=18;break}return this.loadedSprites[l]="loading error",u.abrupt("return");case 18:this.loadedSprites[l]={size:c},this.preloadedSprite={size:c,url:l};case 20:case"end":return u.stop()}},null,this,null,Promise)}},{key:"getCurrentThumbOffset",value:function(e){var t,i,n,s=R.get("ads")?null===(t=this.options)||void 0===t?void 0:t.duration:R.get("duration");this.isBlockedByAd&&(s=null===(i=this.options)||void 0===i?void 0:i.duration);var r=this.options.steps,o=e;if(r.length||(o=this.checkTimeEdges(e,s)),r.length&&(s=this.options.originalDuration||r[r.length-1][1]),!this.isOldTemplate())return this.calcNewTemplateThumbsAmount(s,o);var a=this.template,l=a.thumbsAmount,h=a.size,c=this.currentSprite.size.width,u=Number(h.split("x")[0]),d=0;(s-=this.introDuration)>l-1?d=c/l:(!R.get("ads")&&Math.floor(null===(n=this.options)||void 0===n?void 0:n.duration)-R.get("duration")>0&&(s=R.get("duration")+1-this.introDuration),d=c/Math.floor(s)),d>u&&(d=u);var m=c/d,p=Math.floor((o-this.introDuration)/(s/m));return p>=m&&(p=m-1),o<this.introDuration&&(p=0),{spritePosition:p,thumbsAmount:m,originThumbWidth:d}}},{key:"getCurrentStep",value:function(e){var t=this.realSteps||[];return t.length?e>t[t.length-1][1]?t.length-1:t.findIndex(function(t){return t[0]<=e&&t[1]>=e}):0}},{key:"calcRealSteps",value:function(){this.realSteps=this.options.steps.reduce(function(e,t){if(e.length){var i=e[e.length-1][1];e.push([i,t[1]-t[0]+i])}else e.push([0,t[1]-t[0]]);return e},[])}},{key:"getCurrentTimeFromSteps",value:function(e,t){var i=this.options.steps,n=i[t],s=i[i.length-1],r=es(i).splice(0,t).reduce(function(e,t){return e+(t[1]-t[0])},0);return this.checkTimeEdges(e-r+n[0],s[1])}},{key:"getCurrentFrame",value:function(e){var t,i,n,s,r;return iz().async(function(o){for(;;)switch(o.prev=o.next){case 0:if(null!==(t=this.options)&&void 0!==t&&t.template){o.next=2;break}return o.abrupt("return",null);case 2:if(this.options.steps.length&&(this.realSteps.length||this.calcRealSteps(),i=this.getCurrentStep(e),e=this.getCurrentTimeFromSteps(e,i)),!(!(n=this.getSpriteUrl(e))||"loading error"===this.loadedSprites[n]||"loading"===this.loadedSprites[n])){o.next=6;break}return o.abrupt("return",null);case 6:if(this.loadedSprites[n]){o.next=19;break}return this.loadedSprites[n]="loading",o.next=10,iz().awrap(this.loadSprite(n,this.getCurrentSpriteNumber(e)));case 10:if(s=o.sent){o.next=14;break}return this.loadedSprites[n]="loading error",o.abrupt("return",null);case 14:this.loadedSprites[n]={size:s},this.currentSprite.size=s,this.currentSprite.url=n,o.next=20;break;case 19:this.currentSprite=this.loadedSprites[n];case 20:if(r=this.getCurrentThumbOffset(e),this.preloadNextSprite(i0({currentTime:e},r)),r){o.next=24;break}return o.abrupt("return",null);case 24:return o.abrupt("return",{spriteUrl:n,spriteInfo:i0(i0({},r),{},{size:this.currentSprite.size})});case 25:case"end":return o.stop()}},null,this,null,Promise)}}]),i6={UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ADD:107,EQUAL:187,SUBTRACT:109,DASH:189,F:70,K:75,O:79,B:66,S:83,HOME:36,END:35,M:77,F1:112,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57},i4=[i6.UP,i6.DOWN,i6.LEFT,i6.RIGHT,i6.ADD,i6.EQUAL,i6.SPACE,i6.SUBTRACT,i6.DASH,i6.K,i6.O,i6.B,i6.HOME,i6.END,i6.M,i6.F1,i6["0"],i6["1"],i6["2"],i6["3"],i6["4"],i6["5"],i6["6"],i6["7"],i6["8"],i6["9"],i6.S],i9=o(function e(t,i){s(this,e),this.core=t,this.keyDownTimeout=null,this.keyUpTimeout=null,this.rewindCounter=0,this.debugSequence=[],this.options=(null==i?void 0:i.keyboard)||{},this.rewindTime=null,this.playerPlayed=!1,this.savedVolume=!1,this.hidePreviewTimer=null,this.init()},[{key:"init",value:function(){this.core.element.tabIndex=-1,this.attachEvents()}},{key:"attachEvents",value:function(){var e=this;y.once(f.Z.PLAYER_ON_PLAYING,function(){e.playerPlayed=!0}),this.core.element.addEventListener("keydown",this.onCoreElementKeyDown.bind(this)),this.core.element.addEventListener("keyup",this.onCoreElementKeyUp.bind(this))}},{key:"onCoreElementKeyDown",value:function(e){var t=this,i=e.target;!R.get("ads_playing")&&"TEXTAREA"!==i.nodeName&&"INPUT"!==i.nodeName&&!i.isContentEditable&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&(-1!==i4.indexOf(e.which)||this.core.options.debug)&&(-1===[i6.UP,i6.DOWN].indexOf(e.which)||this.playerPlayed)&&(e.preventDefault(),this.keyDownTimeout||(clearTimeout(this.hidePreviewTimer),this.keyDownTimeout=setTimeout(function(){t.keyDownTimeout=null,t.processKeyDown(e.which,e.shiftKey,0!==t.rewindCounter),t.rewindCounter++},100)))}},{key:"onCoreElementKeyUp",value:function(e){var t=this,i=e.target;if(!R.get("ads_playing")&&"TEXTAREA"!==i.nodeName&&"INPUT"!==i.nodeName&&!i.isContentEditable&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&-1!==[i6.LEFT,i6.RIGHT,i6.F].indexOf(e.which)){if(e.which===i6.F){y.emit(f.Z.PLAYER_TOGGLE_FULLSCREEN,this);return}e.preventDefault(),this.keyUpTimeout||(this.keyUpTimeout=setTimeout(function(){t.keyUpTimeout=null,t.rewindCounter=0,t.processKeyUp(e.which)},100))}}},{key:"processKeyDown",value:function(e,t){var i,n,s,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case i6.LEFT:null===this.rewindTime&&(this.rewindTime=R.get("currentTime")||0),this.rewindTime-=t?20:10,this.rewindTime=Math.max(0,this.rewindTime),this.showPreview(this.rewindTime,a),y.emit(f.Z.PROGRESS_BAR_UPDATE,this.rewindTime);break;case i6.RIGHT:null===this.rewindTime&&(this.rewindTime=R.get("currentTime")||0),this.rewindTime+=t?20:10,this.rewindTime=Math.min(this.rewindTime,R.get("duration")),this.showPreview(this.rewindTime,a),y.emit(f.Z.PROGRESS_BAR_UPDATE,this.rewindTime);break;case i6.K:case i6.SPACE:R.get("playing")?y.emit(f.Z.PLAYER_PAUSE):y.emit(f.Z.PLAYER_PLAY);break;case i6.ADD:case i6.UP:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume+.05);break;case i6.SUBTRACT:case i6.DOWN:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume-.05);break;case i6.EQUAL:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume+.05);break;case i6.DASH:y.emit(f.Z.PLAYER_SET_VOLUME,this.core.videoElement.volume-.05);break;case i6.M:0===(i=this.core.videoElement.volume)?i=this.savedVolume:(this.savedVolume=i,i=0),y.emit(f.Z.PLAYER_SET_VOLUME,i);break;case i6.O:y.emit(f.Z.OVERLAY_MENU_TOGGLE);break;case i6.S:if(!t)return;o=(o=R.get("playbackRate"))>=1?.5:1,y.emit(f.Z.PLAYER_SET_PLAYBACK_RATE,o);break;case i6.HOME:case i6["0"]:n=R.get("ended"),this.setCurrentTime(0),n&&y.emit(f.Z.PLAYER_PLAY);break;case i6.END:this.setCurrentTime(R.get("duration"));break;case i6.B:y.emit(f.Z.PLAYER_PAUSE),window.open("https://www.google.com","_blank").focus();break;case i6["1"]:case i6["2"]:case i6["3"]:case i6["4"]:case i6["5"]:case i6["6"]:case i6["7"]:case i6["8"]:case i6["9"]:if(parseInt(s=String.fromCharCode(e),10)!==Number(s))break;r=Number(s)/10*R.get("duration"),this.setCurrentTime(r)}y.emit(f.Z.USER_ACTION,!0)}},{key:"processKeyUp",value:function(e){switch(e){case i6.LEFT:case i6.RIGHT:this.setCurrentTime();break;case i6["1"]:case i6["2"]:case i6["3"]:case i6["4"]:case i6["5"]:case i6["6"]:case i6["7"]:case i6["8"]:case i6["9"]:this.hidePreview()}}},{key:"hidePreview",value:function(){this.hidePreviewTimer=setTimeout(function(){y.emit(f.Z.USER_SEEK_HIDE_PREVIEW,{withAnimation:!0})},500)}},{key:"showPreview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y.emit(f.Z.USER_SEEK_SHOW_PREVIEW,e,{showBackgroundPreview:t})}},{key:"setCurrentTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e?y.emit(f.Z.STATISTICS_UI,eu.seeking_by_keyboard_number_keys):this.rewindTime>R.get("currentTime")+20||this.rewindTime<R.get("currentTime")-20?y.emit(f.Z.STATISTICS_UI,eu.seeking_by_keyboard_hold):y.emit(f.Z.STATISTICS_UI,eu.seeking_by_keyboard_press);var t=null===e?this.rewindTime:e;y.emit(f.Z.USER_SEEK_SET_CURRENT_TIME,t,!1),this.hidePreview(),this.rewindTime=null}},{key:"isDebugSequence",value:function(e){-1!==["i","d","d","q","d","k","f","a"].indexOf(e)&&(this.debugSequence.push(e),this.debugSequence.length>5&&this.debugSequence.shift(),"iddqd"===this.debugSequence.join("")&&this.core.fallbackService.fallbackImage())}}]),i8=o(function e(t){s(this,e),this.core=t,this.thumbWidth=0,this.thumbHeight=0,this.thumbsShown=!1,this.thumbsHideTimeout=0,this.backgroundImageUrl="",this.isPlayerResized=!1,this.isSpriteBlocked=!0,this.playerOnCanPlayEventId=null,this.currentPosition=0,this.lastPosition=0,this.watchedTime=0,this.init()},[{key:"init",value:function(){return iz().async(function(e){for(;;)switch(e.prev=e.next){case 0:this.render(),this.attachEvents(),this.videoElement=document.querySelector("#xplayer__video");case 3:case"end":return e.stop()}},null,this,null,Promise)}},{key:"attachEvents",value:function(){var e=this;window.addEventListener("resize",this.onResizeActions.bind(this)),y.on(f.Z.PLAYER_ON_RESIZE,this.onResizeActions.bind(this)),y.on(f.Z.PLAYER_ON_SWIPE_START,this.calcThumbSizes.bind(this)),y.once(f.Z.PLAYER_ON_PLAY,this.unblockSpriteThumbs.bind(this)),y.once(f.Z.PLAYER_ON_LOADED_DATA,this.calcThumbSizes.bind(this)),y.once(f.Z.REMOTE_PLAYER_PLAYING,this.unblockSpriteThumbs.bind(this)),y.on(f.Z.PLAYER_ON_SEEKING,function(){e.seeked=!1}),y.on(f.Z.PLAYER_ON_SEEKED,function(){e.seeked=!0}),y.on(f.Z.PLAYER_ON_TIMEUPDATE,function(){if(!e.seeked){e.currentPosition=e.videoElement.currentTime;var t=e.currentPosition-e.lastPosition;if(e.lastPosition=e.currentPosition,t<0||t>.5){e.watchedTime=0;return}e.watchedTime+=t,e.watchedTime<.5||(e.watchedTime=0,e.seeked=!0,e.hideThumbs())}})}},{key:"unblockSpriteThumbs",value:function(){this.isSpriteBlocked=!1}},{key:"render",value:function(){this.element=document.createElement("div"),this.element.className="background-thumbs-container",this.element.innerHTML='\n    <span class="thumbs thumbs-hidden">\n      <div class="thumbs-background"></div> \n      <span class="sprite"></span>\n    </span>\n    ',this.thumbsElement=this.element.querySelector(".thumbs"),this.spriteElement=this.element.querySelector(".sprite"),this.core.element.appendChild(this.element),this.calcThumbSizes()}},{key:"setCurrentFrame",value:function(e,t){var i=t.spritePosition,n=t.thumbsAmount;(this.backgroundImageUrl!==e||this.isPlayerResized)&&(this.isPlayerResized=!1,this.backgroundImageUrl=e,this.spriteElement.style.background="url(".concat(e,") no-repeat"),this.spriteElement.style.backgroundSize="".concat(this.thumbWidth*n,"px ").concat(this.thumbHeight,"px")),this.spriteElement.style.backgroundPositionX="".concat(-1*this.thumbWidth*i,"px")}},{key:"calcThumbSizes",value:function(){var e,t,i=this;if(R.get("ads_playing")||R.get("ads_preload")){y.once(f.Z.ADS_ENDED,function(){y.once(f.Z.PLAYER_ON_LOADED_DATA,i.calcThumbSizes.bind(i))});return}var n=null===(e=this.core.sourceController)||void 0===e||null===(e=e.options)||void 0===e||null===(e=e.videoElement)||void 0===e?void 0:e.videoWidth,s=null===(t=this.core.sourceController)||void 0===t||null===(t=t.options)||void 0===t||null===(t=t.videoElement)||void 0===t?void 0:t.videoHeight;if(n&&s){var r=this.core.element.clientHeight,o=this.core.element.clientWidth;this.thumbWidth=Math.min(n/s*r,o),this.thumbHeight=Math.min(s/n*o,r),this.spriteElement.style.width="".concat(this.thumbWidth,"px"),this.spriteElement.style.height="".concat(this.thumbHeight,"px"),this.thumbsElement.style.width="".concat(o,"px"),this.thumbsElement.style.height="".concat(r,"px")}}},{key:"onResizeActions",value:function(){this.isPlayerResized=!0,this.calcThumbSizes()}},{key:"show",value:function(){this.isSpriteBlocked||(this.seeked=!1,this.clearEvents(),this.thumbsElement.className="thumbs",this.thumbsShown=!0)}},{key:"hide",value:function(){!1!==this.thumbsShown&&(this.playerOnCanPlayEventId=y.once(f.Z.PLAYER_ON_CAN_PLAY,this.hideThumbs.bind(this)),this.seeked?this.hideThumbs():R.get("playing")||(this.playerOnSeekedEventId=y.once(f.Z.PLAYER_ON_SEEKED,this.hideThumbs.bind(this))))}},{key:"hideThumbs",value:function(){this.thumbsElement.className="thumbs thumbs-hidden",this.thumbsShown=!1,this.clearEvents()}},{key:"clearEvents",value:function(){y.off(f.Z.PLAYER_ON_CAN_PLAY,this.playerOnCanPlayEventId),y.off(f.Z.PLAYER_ON_SEEKED,this.playerOnSeekedEventId)}}]),i7=function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},ne="xh-helper-hidden",nt="xplayer-dsa-label",ni="".concat(nt,"__text"),nn=o(function e(t){s(this,e),this.core=t,this.init()},[{key:"init",value:function(){this.render(),this.attachEvents()}},{key:"render",value:function(){this.element=i7('\n            <div class="'.concat(nt," ").concat(ne,'">\n                <div class="').concat(ni,'">\n                    Includes commercial communications\n                </div>\n            </div>\n        ')),this.core.element.appendChild(this.element)}},{key:"attachEvents",value:function(){R.get("ads_preload")||R.get("ads")?y.once(f.Z.ADS_ENDED,this.showDSA.bind(this)):y.once(f.Z.PLAYER_ON_PLAYING,this.showDSA.bind(this))}},{key:"showDSA",value:function(){var e=this;c.removeClass(this.element,ne),setTimeout(function(){c.addClass(e.element,ne)},5e3)}}]),ns=o(function e(t,i){var n,r,o,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(this,e),this.options=(null==i?void 0:i.subtitles)||{},this.introDuration=(null===(n=this.options)||void 0===n?void 0:n.introDuration)||0,null!==(r=this.options.tracks)&&void 0!==r&&r.length&&(this.core=t,this.core.videoElement.setAttribute("crossorigin","anonymous"),this.isMobile=a,this.tracks=this.options.tracks,this.videoElement=this.core.videoElement,this.currentLang=(null===(o=this.core.settings.subtitlesPrefLang)||void 0===o?void 0:o.lang)||"",this.isHidden=!this.isSubtitlesEnabled(),this.currentTrack=null,this.init())},[{key:"init",value:function(){this.appendCustomTrackElement(),this.attachEvents(),y.emit(f.Z.SUBTITLES_READY,this.getDefaultSubtitlesTrack()),R.get("playing")?this.loadSubtitles():y.once(f.Z.PLAYER_PLAY,this.loadSubtitles.bind(this))}},{key:"loadSubtitles",value:function(){var e=this;Promise.allSettled(this.appendSubtitlesTracks()).then(function(t){if(t.some(function(e){return"fulfilled"===e.status})){y.emit(f.Z.STATISTICS_UI,eu.subtitles_load_success);var i=t.filter(function(e){return"rejected"===e.status});e.clearFailedSubtitles(i),e.addSubtitlesIntroOffset(),y.emit(f.Z.SUBTITLES_LOADED)}else y.emit(f.Z.STATISTICS_UI,eu.subtitles_load_failed),y.emit(f.Z.SUBTITLES_NO_AVAILABLE_TRACKS),e.tracks=null,e.currentTrack=null,e.currentLang=null}),this.hideDefaultSubtitles()}},{key:"attachEvents",value:function(){var e=this;y.on(f.Z.SUBTITLES_SHOW_BUTTON_CLICK,this.showSubtitles.bind(this)),y.on(f.Z.SUBTITLES_HIDE_BUTTON_CLICK,this.hideSubtitles.bind(this)),y.on(f.Z.SUBTITLES_SET_LANG,this.onSelectLang.bind(this)),y.once(f.Z.SUBTITLES_SHOWN,function(){y.emit(f.Z.STATISTICS_UI,eu.subtitles_shown)}),y.once(f.Z.SUBTITLES_LOADED,function(){e.isHidden||e.isSubtitlesBlockedByAd()||e.showSubtitles()}),this.isSubtitlesBlockedByAd()&&y.once(f.Z.ADS_ENDED,function(){e.isHidden||e.showSubtitles()})}},{key:"isSubtitlesEnabled",value:function(){return"off"!==this.core.settings.subtitlesStateByButton}},{key:"isSubtitlesBlockedByAd",value:function(){return R.get("ads")||R.get("ads_playing")||R.get("ads_preload")}},{key:"addSubtitlesIntroOffset",value:function(){var e=this;Array.from(this.videoElement.textTracks).forEach(function(t){var i=Array.from(null==t?void 0:t.cues);null==i||i.forEach(function(t){t.startTime+=e.introDuration,t.endTime+=e.introDuration})})}},{key:"clearFailedSubtitles",value:function(e){var t=e.map(function(e){return e.reason.getAttribute("srclang")});this.options.tracks=this.tracks.filter(function(e){return!(-1!==t.indexOf(e.lang))}),this.tracks=this.options.tracks,t.forEach(function(e){var t;null===(t=document.querySelector("video track[srclang='".concat(e,"']")))||void 0===t||t.remove()})}},{key:"appendSubtitlesTracks",value:function(){var e=this,t=this.core.capabilities.mobile?"subtitles":"metadata";return this.tracks.map(function(i,n){var s,r,o,a,l=i7((s=0===n,r=i.label,o=i.urls,a=i.lang,'\n        <track kind="'.concat(t,'" label="').concat(r,'" src="').concat(o.vtt,'" srclang="').concat(a,'" ').concat(s?"default":"","/>\n    ")));return e.videoElement.appendChild(l),e.loadTrackPromise(l)})}},{key:"loadTrackPromise",value:function(e){return new Promise(function(t,i){e.addEventListener("load",function(e){return t(e.target)}),e.addEventListener("error",function(e){return i(e.target)})})}},{key:"appendCustomTrackElement",value:function(){this.customTrackElement=i7('<div id="custom-subtitles"><span></span></div>'),this.customTrackText=this.customTrackElement.querySelector("span"),this.core.element.appendChild(this.customTrackElement)}},{key:"attachCueChangeListener",value:function(){this.cueChangeCallback=this.onCueChange.bind(this,this.currentTrack),this.currentTrack.addEventListener("cuechange",this.cueChangeCallback)}},{key:"detachCueChangeListener",value:function(){var e;null===(e=this.currentTrack)||void 0===e||e.removeEventListener("cuechange",this.cueChangeCallback)}},{key:"onCueChange",value:function(e){if(!this.isHidden){var t,i=(null===(t=e.activeCues)||void 0===t?void 0:t[0])||null;if(i){this.showSubtitles(),this.customTrackText.textContent=i.text,y.emit(f.Z.SUBTITLES_SHOWN);return}this.hide()}}},{key:"onSelectLang",value:function(e){"off"===e.lang?(this.detachCueChangeListener(),this.currentLang="off",this.currentTrack=null,this.isHidden=!0,this.hideSubtitles()):this.isHidden=!1,this.setSubtitlesTrack(e),R.get("playing")||y.emit(f.Z.PLAYER_PLAY)}},{key:"setSubtitlesTrack",value:function(e){if(this.currentLang)this.showSubtitlesTrack(e),y.emit(f.Z.SUBTITLES_SHOW,e);else{var t=this.getDefaultSubtitlesTrack();if(!t)return;this.showSubtitlesTrack(t),y.emit(f.Z.SUBTITLES_SET_DEFAULT_LANG,t)}}},{key:"showSubtitles",value:function(){if(this.customTrackElement.style.display="block",this.isHidden=!1,this.currentTrack)this.isMobile?this.showDefaultSubtitles():y.emit(f.Z.SUBTITLES_SHOW,this.getTrackByLang(this.currentTrack.language));else{var e=this.getDefaultSubtitlesTrack();if(!e)return;this.showSubtitlesTrack(e),y.emit(f.Z.SUBTITLES_SET_DEFAULT_LANG,e)}}},{key:"getTrackByLang",value:function(e){var t;return null===(t=this.tracks)||void 0===t?void 0:t.find(function(t){return t.lang===e})}},{key:"getDefaultSubtitlesTrack",value:function(){var e,t,i,n=null===(e=this.core.settings.subtitlesPrefLang)||void 0===e?void 0:e.lang,s=this.getTrackByLang(n);if(s)return s;var r=this.getTrackByLang(null===(t=this.options.siteCountryInfo)||void 0===t?void 0:t.lang);return r?r:this.getTrackByLang("en")||this.getTrackByLang("eu")||(null===(i=this.tracks)||void 0===i?void 0:i[0])}},{key:"showSubtitlesTrack",value:function(e){var t=e.lang,i="off"===t&&"off"===this.currentLang;if(!this.isSubtitlesBlockedByAd()&&!i){this.currentTrack&&this.detachCueChangeListener(),this.isMobile||this.hide();for(var n=this.videoElement.textTracks,s=0;s<n.length;s++)n[s].language===t&&(this.currentLang=t,this.currentTrack=n[s],this.isMobile?(this.hideDefaultSubtitles(),n[s].mode="showing",y.emit(f.Z.SUBTITLES_SHOWN)):this.attachCueChangeListener())}}},{key:"hideSubtitles",value:function(){this.isHidden=!0,this.isMobile&&this.hideDefaultSubtitles(),this.hide(),y.emit(f.Z.SUBTITLES_HIDE)}},{key:"hide",value:function(){this.customTrackElement.style.display="none",this.customTrackText.textContent=""}},{key:"hideDefaultSubtitles",value:function(){for(var e=this.videoElement.textTracks,t=0;t<e.length;t++)e[t].mode="hidden"}},{key:"showDefaultSubtitles",value:function(){for(var e=this.videoElement.textTracks,t=0;t<e.length;t++)e[t].language===this.currentLang&&(this.hideDefaultSubtitles(),e[t].mode="showing",y.emit(f.Z.SUBTITLES_SHOWN))}}]),nr=o(function e(t){s(this,e);var i,n=t.playerHandler,r=t.remotePlayer,o=t.remotePlayerController,a=t.core,l=t.volumeControls;r&&o&&null!==(i=window.cast)&&void 0!==i&&i.framework&&(this.core=a,this.playerHandler=n,this.remotePlayer=r,this.remotePlayerController=o,this.playerTarget={},this.castSession={},this.currentTime=0,this.volumeControls=l)},[{key:"init",value:function(){this.castContext=window.cast.framework.CastContext.getInstance(),this.castSession=this.castContext.getCurrentSession(),this.setListeners(),this.initPlayerTarget()}},{key:"setListeners",value:function(){var e=window.cast.framework.RemotePlayerEventType,t=e.IS_PAUSED_CHANGED,i=e.IS_MUTED_CHANGED,n=e.VOLUME_LEVEL_CHANGED,s=e.PLAYER_STATE_CHANGED,r=window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED;this.castContext.addEventListener(r,this.handleSessionStatus.bind(this)),this.remotePlayerController.addEventListener(t,this.handlePlayPause.bind(this)),this.remotePlayerController.addEventListener(i,this.handleMuted.bind(this)),this.remotePlayerController.addEventListener(n,this.handleVolumeChange.bind(this)),this.remotePlayerController.addEventListener(s,this.handleStateChange.bind(this))}},{key:"handleSessionStatus",value:function(e){null!=e&&e.errorCode&&y.emit(f.Z.STATISTICS_UI,eu.chromecast_play_error,{error:e.errorCode,state:e.sessionState})}},{key:"handleStateChange",value:function(e){var t=e.value,i=this.deviceName;switch(!0){case"LOADING"===t:y.emit(f.Z.REMOTE_PLAYER_PLAYING,{value:t,deviceName:i});break;case"PLAYING"===t:c.removeClass(this.core.element,"chromecast-paused"),y.emit(f.Z.REMOTE_PLAYER_PLAYING,{value:t,deviceName:i}),y.emit(f.Z.STATISTICS_UI,eu.chromecast_play_success),y.emit(f.Z.REMOTE_PLAYER_LOADING_END);break;case"PAUSED"===t:y.emit(f.Z.REMOTE_PLAYER_PAUSED,{value:t,deviceName:i});break;case"BUFFERING"===t:y.emit(f.Z.REMOTE_PLAYER_LOADING_START),y.emit(f.Z.REMOTE_PLAYER_BUFFERING,{value:t,deviceName:i});break;case"IDLE"===t&&R.get("currentTime")>=R.get("duration"):this.remotePlayerController.stop(),this.castSession.getSessionObj().stop()}}},{key:"targetLoad",value:function(){y.emit(f.Z.REMOTE_PLAYER_LOADING_START),this.deviceName=this.castSession.getCastDevice().friendlyName,this.handleStateChange({value:"LOADING"});var e=this.core.sourceController.getChromecastUrl(),t=window.chrome.cast.media,i=new t.MediaInfo(e);i.metadata=new t.GenericMediaMetadata,i.metadata.metadataType=t.MetadataType.GENERIC,i.metadata.title=i.title;var n=new t.LoadRequest(i);n.credentials="user-credentials",n.atvCredentials="atv-user-credentials",n.currentTime=R.get("currentTime"),this.castSession.loadMedia(n).then(this.playerHandler.loaded.bind(this.playerHandler),this.remoteLoadErrorHandler.bind(this))}},{key:"setTimeUpdatesEvent",value:function(){var e=window.cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED;this.remotePlayerController.addEventListener(e,this.updateTimings.bind(this))}},{key:"updateTimings",value:function(e){if(this.remotePlayer.isMediaLoaded){var t=e.value,i=R.get("duration");y.emit(f.Z.PLAYER_ON_TIMEUPDATE,{target:{currentTime:t,duration:i}}),y.emit(f.Z.PROGRESS_BAR_UPDATE,t),R.set("currentTime",t),this.currentTime=t}}},{key:"handlePlayPause",value:function(){this.remotePlayer.isPaused?(this.playerHandler.pause(),c.addClass(this.core.element,"chromecast-paused")):this.playerHandler.play()}},{key:"targetPlay",value:function(){this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause(),R.set("playing",!0),y.emit(f.Z.REMOTE_PLAYER_STATE_CHANGED)}},{key:"targetPause",value:function(){this.remotePlayer.isPaused||this.remotePlayerController.playOrPause(),R.set("playing",!1),y.emit(f.Z.REMOTE_PLAYER_STATE_CHANGED)}},{key:"targetSetVolume",value:function(e){this.remotePlayer.volumeLevel=Number(e),this.remotePlayerController.setVolumeLevel()}},{key:"mute",value:function(){this.remotePlayer.isMuted||this.remotePlayerController.muteOrUnmute()}},{key:"unMute",value:function(){this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()}},{key:"handleMuted",value:function(){this.remotePlayer.isMuted?y.emit(f.Z.PLAYER_SET_VOLUME,0):y.emit(f.Z.PLAYER_SET_VOLUME,1)}},{key:"handleVolumeChange",value:function(e){var t=Number(e.value.toFixed(2));if(this.core.videoElement.volume=t,t!==this.core.videoElement.volume){var i=this.volumeControls,n=i.filler,s=i.handler,r=i.volumeElement;n&&s&&r&&(n.style="width: ".concat(100*t,"%"),s.style="left: ".concat(100*t,"%"),t<.02?r.className="volume mute":t<.25?r.className="volume quarter":t<.5?r.className="volume half":t<.75?r.className="volume third":r.className="volume")}}},{key:"remoteLoadErrorHandler",value:function(e){console.warn("Chromecast load error",e)}},{key:"targetSeekTo",value:function(e){this.remotePlayer.currentTime=e,this.remotePlayerController.seek()}},{key:"targetIsMediaLoaded",value:function(){return this.remotePlayer.isMediaLoaded}},{key:"initPlayerTarget",value:function(){this.playerTarget.play=this.targetPlay.bind(this),this.playerTarget.pause=this.targetPause.bind(this),this.playerTarget.load=this.targetLoad.bind(this),this.playerTarget.setVolume=this.targetSetVolume.bind(this),this.playerTarget.mute=this.mute.bind(this),this.playerTarget.unMute=this.unMute.bind(this),this.playerTarget.seekTo=this.targetSeekTo.bind(this),this.playerTarget.setTimeUpdatesEvent=this.setTimeUpdatesEvent.bind(this),this.playerTarget.isMediaLoaded=this.targetIsMediaLoaded.bind(this),this.playerHandler.setTarget(this.playerTarget),this.playerHandler.play(),this.handleVolumeChange({value:this.core.videoElement.volume}),this.core.videoElement.muted&&this.mute()}}]),no="chromecast-bg__visible",na=o(function e(t){s(this,e),this.playerElement=t,this.render(),this.attachEvents()},[{key:"render",value:function(){this.element=document.createElement("div"),this.text=document.createElement("div"),this.imageBg=document.createElement("div"),this.element.className="chromecast-bg",this.text.className="chromecast-bg__text",this.imageBg.className="chromecast-bg__image",this.element.appendChild(this.text),this.element.appendChild(this.imageBg),this.playerElement.appendChild(this.element)}},{key:"attachEvents",value:function(){this.element.addEventListener("click",this.togglePlayPause.bind(this)),y.on(f.Z.REMOTE_PLAYER_BUFFERING,this.updateText,this),y.on(f.Z.REMOTE_PLAYER_PLAYING,this.updateText,this),y.on(f.Z.REMOTE_PLAYER_PAUSED,this.updateText,this)}},{key:"show",value:function(){this.element.classList.add(no)}},{key:"hide",value:function(){this.element.classList.remove(no)}},{key:"updateText",value:function(e){var t=e.value,i=e.deviceName;this.text.innerHTML="".concat(t," on ").concat(i)}},{key:"togglePlayPause",value:function(){if(-1!==this.playerElement.className.indexOf("no-user-action")){y.emit(f.Z.USER_ACTION);return}if(R.get("playing")){y.emit(f.Z.PLAYER_PAUSE),R.set("playing",!1);return}y.emit(f.Z.PLAYER_PLAY),R.set("playing",!0)}}]),nl=o(function e(){var t;s(this,e),null!==(t=window.cast)&&void 0!==t&&t.framework&&(this.target={},this.castSession={})},[{key:"setTarget",value:function(e){this.target=e}},{key:"play",value:function(){var e;if(!R.get("playing")){if(!(null!==(e=this.target)&&void 0!==e&&e.isMediaLoaded())&&!R.get("remoteSourceLoading")){this.load();return}this.target.play(),y.emit(f.Z.PLAYER_PLAY)}}},{key:"pause",value:function(){R.get("playing")&&this.target.pause()}},{key:"stop",value:function(){this.target.stop()}},{key:"load",value:function(){R.set("remoteSourceLoading",!0),this.target.load()}},{key:"loaded",value:function(){this.target.setTimeUpdatesEvent(),R.set("remoteSourceLoading",!1),y.emit(f.Z.REMOTE_PLAYER_LOADING_END),this.play()}},{key:"setVolume",value:function(e){this.target.setVolume(e)}},{key:"setMute",value:function(e){if("on"===e){this.target.mute();return}this.target.unMute()}},{key:"seekTo",value:function(e){this.target.seekTo(e)}}]),nh=o(function e(t,i){s(this,e),null!=t&&t.player&&null!=t&&t.core&&null!=i&&i.sourceUrl&&(this.player=t.player,this.core=t.core,this.isMobile=t.isMobile||!1,this.sourceUrl=i.sourceUrl,this.playerHandler=new nl,this.remoteModule=null,this.remoteEventsIds={},this.init())},[{key:"attachRemoteEvents",value:function(){R.set("chromecast",!0),c.addClass(this.core.element,"chromecast");var e=this.playerHandler,t=f.Z.PLAYER_PLAY,i=f.Z.PLAYER_PAUSE,n=f.Z.PLAYER_SET_VOLUME,s=f.Z.PLAYER_SET_CURRENT_TIME,r=f.Z.PLAYER_SET_QUALITY;this.remoteEventsIds.setVolume=y.on(n,e.setVolume.bind(e)),this.remoteEventsIds.setCurrentTime=y.on(s,e.seekTo.bind(e)),this.remoteEventsIds.play=y.on(t,e.play.bind(e)),this.remoteEventsIds.pause=y.on(i,e.pause.bind(e)),this.remoteEventsIds.quality=y.on(r,e.load.bind(e)),this.remoteEventsIds.mute=y.on(f.Z.MUTE_CLICK,e.setMute.bind(e)),y.emit(f.Z.USER_ACTION),y.emit(f.Z.USER_ACTION_BLOCK)}},{key:"detachRemoteEvents",value:function(){R.set("chromecast",!1),c.removeClass(this.core.element,"chromecast");var e=f.Z.PLAYER_PLAY,t=f.Z.PLAYER_PAUSE,i=f.Z.PLAYER_SET_VOLUME,n=f.Z.PLAYER_SET_CURRENT_TIME,s=f.Z.PLAYER_SET_QUALITY;y.off(e,this.remoteEventsIds.play),y.off(t,this.remoteEventsIds.pause),y.off(i,this.remoteEventsIds.setVolume),y.off(n,this.remoteEventsIds.setCurrentTime),y.off(s,this.remoteEventsIds.quality),y.off(f.Z.MUTE_CLICK,this.remoteEventsIds.mute),y.emit(f.Z.USER_ACTION),y.emit(f.Z.USER_ACTION_UNBLOCK)}},{key:"init",value:function(){this.checkIsDeviceAvailable(),y.on(f.Z.REMOTE_PLAYER_USER_REQUEST,this.loadChromecastFramework.bind(this))}},{key:"loadChromecastFramework",value:function(){var e=this;this.isLoaded&&this.removeOldSource(),window.__onGCastApiAvailable=function(t){t&&(e.isLoaded=!0,e.initRealChromecast())},c.getScript(this.sourceUrl).catch(function(e){y.emit(f.Z.STATISTICS_UI,eu.chromecast_libs_load_error),console.warn("Chromecast script loading error:",e),alert("Chromecast error occured, please, try again")})}},{key:"removeOldSource",value:function(){document.querySelector('script[src="'.concat(this.sourceUrl,'"]')).remove()}},{key:"checkIsDeviceAvailable",value:function(){var e=null;try{e=new window.PresentationRequest("cast:CC1AD845")}catch(e){return!1}if(!e)return!1;navigator.presentation.defaultRequest=e,e.getAvailability().then(function(e){e.addEventListener("change",function(){e.value&&y.emit(f.Z.REMOTE_PLAYER_DEVICE_AVAILABLE)})}).catch(function(e){console.warn("Presentation availability not supported, "+e.name+": "+e.message)})}},{key:"initRealChromecast",value:function(){if(!(null!==(e=window.cast)&&void 0!==e&&e.framework)||!window.chrome){y.emit(f.Z.STATISTICS_UI,eu.chromecast_framework_lib_load_error),alert("Chromecast error occured, please, try again");return}y.emit(f.Z.REMOTE_PLAYER_CHROMECAST_LOADED),y.emit(f.Z.STATISTICS_UI,eu.chromecast_libs_load_success);var e,t={},i=document.querySelector(".volume-bar .bar .filler"),n=document.querySelector(".volume-bar .bar .handle"),s=document.querySelector(".volume-controls .volume");t.receiverApplicationId=window.chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,t.autoJoinPolicy=window.chrome.cast.AutoJoinPolicy.PAGE_SCOPED,t.androidReceiverCompatible=!1,window.cast.framework.CastContext.getInstance().setOptions(t);var r=new window.chrome.cast.CredentialsData('{"userId": "abc"}');window.cast.framework.CastContext.getInstance().setLaunchCredentialsData(r),this.remotePlayer=new window.cast.framework.RemotePlayer,this.remotePlayerController=new window.cast.framework.RemotePlayerController(this.remotePlayer),this.remoteModule=new nr({playerHandler:this.playerHandler,remotePlayer:this.remotePlayer,remotePlayerController:this.remotePlayerController,core:this.core,volumeControls:{filler:i,handler:n,volumeElement:s}});var o=window.cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED;this.remotePlayerController.addEventListener(o,this.switchPlayer.bind(this)),this.chromecastBg=new na(this.core.element),document.querySelector("google-cast-launcher").click()}},{key:"switchPlayer",value:function(){var e;if(R.get("ads")||R.get("ads_preload")){y.once(f.Z.ADS_ENDED,this.switchPlayer.bind(this)),R.get("playing")||y.emit(f.Z.PLAYER_PLAY);return}if(y.emit(f.Z.PLAYER_PAUSE),R.set("playing",!1),null!==(e=window.cast)&&void 0!==e&&e.framework){if(this.remotePlayer.isConnected&&this.remoteModule){this.chromecastBg.show(),this.attachRemoteEvents(),this.remoteModule.init(),y.emit(f.Z.REMOTE_PLAYER_SESSION_START);return}this.remotePlayer.isConnected||this.remotePlayerController.stop()}this.chromecastBg.hide(),this.detachRemoteEvents(),y.emit(f.Z.REMOTE_PLAYER_SESSION_END),y.emit(f.Z.PLAYER_SET_VOLUME,this.core.capabilities.mobile?1:this.core.videoElement.volume),y.emit(f.Z.PLAYER_SET_CURRENT_TIME,R.get("currentTime")),R.get("ended")||y.emit(f.Z.PLAYER_PLAY)}}]),nc={pauseSpotContainer:"_08264-pauseSpotContainer",overlay:"_08264-overlay",centered:"_08264-centered",close:"_08264-close",xplayer:"xplayer","x-plain":"x-plain","xplayer-settings-menu-opened":"xplayer-settings-menu-opened","xplayer-share-menu-opened":"xplayer-share-menu-opened","overlay-menu-opened":"overlay-menu-opened","xplayer-ads":"xplayer-ads","xplayer-ads-preload":"xplayer-ads-preload"};function nu(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function nd(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nu(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var nm=[iF],np=[tA,tE,tT,tI,tC,tk,tR],nE=o(function e(t,i,n){s(this,e);var r,o={preventFirstPlay:!!(n.ads&&!er(n.ads.vastUrls))};if(this.core=new eE(t,nd(nd({},i),o),n),this.events=f.Z,"none"!==this.core.type){if("plain"===i.version){n.poster.shouldRemovePoster=!0,this.loadPlainPlugins(n);return}if(this.core.emit(f.Z.PLAYER_ON_INIT),this.ads=new iP(this.core,iG,n),this.bannerBottom=new ti(this.core,n),this.loader=new eW(this.core),this.subscribe=new tc(this.core,n),this.core.autoplay){this.core.once(f.Z.PLAYER_ON_LOADED_DATA,this.loadPlugins.bind(this,n)),this.core.once(f.Z.PLAYER_ON_ERROR,this.loadMainPlugins.bind(this,n));return}this.loadPlugins(n),this.core.capabilities.chrome&&null!=n&&null!==(r=n.chromecast)&&void 0!==r&&r.sourceUrl&&(this.chromecast=new nh({player:this,core:this.core},n.chromecast)),this.cssModules={}}},[{key:"loadPlainPlugins",value:function(e){this.banner=new e5(this.core,nd(nd({},e),{bannerPauseSpotClassNames:nc})),this.poster=new tr(this.core,e)}},{key:"loadMainPlugins",value:function(e){var t=nd({duration:this.core.options.duration},null==e?void 0:e.spriteLoader);this.spriteLoader=new i5({spriteLoader:t}),this.progressBarSpriteViewer=new iq(this.core),this.backgroundSpriteViewer=new i8(this.core),this.progressBar=new ij(this.core,e,this.progressBarSpriteViewer),this.userSeekController=new iX({loader:this.spriteLoader,spritePreviewViewers:{progressBarSpriteViewer:this.progressBarSpriteViewer,backgroundSpriteViewer:this.backgroundSpriteViewer},showPreview:!!this.core.settings.preview}),this.background=new eg(this.core,e),this.hoverMenu=new iV(this.core,nm,e),this.aftershot=new ef(this.core,e),this.contextMenu=new ez(this.core,e),this.helpMenu=new e3(this.core),this.qualityList=new tH(this.core),this.playbackRateList=new tq(this.core),this.controlBar=new eF(this.core,e),this.settingsMenu=new td(this.core,np),this.core.options.hasDSA&&(this.dsaLabel=new nn(this.core))}},{key:"loadPlugins",value:function(e){this.loadPlainPlugins(e),this.loadMainPlugins(e),this.mouseControl=new ej(this.core),this.keyboardControl=new i9(this.core,e),this.startButton=new eX(this.core),this.screenshot=new e0(this.core),this.tooltip=new ts(this.core),this.subtitlesList=new tY(this.core,e),this.subtitles=new ns(this.core,e)}}]);window.XPlayer2=nE;var n_=nE},27484:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",i="minute",n="hour",s="week",r="month",o="quarter",a="year",l="date",h="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,i){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(i)+e},m="en",p={};p[m]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],i=e%100;return"["+e+(t[(i-20)%10]||t[i]||"th")+"]"}};var E=function(e){return e instanceof g},_=function e(t,i,n){var s;if(!t)return m;if("string"==typeof t){var r=t.toLowerCase();p[r]&&(s=r),i&&(p[r]=i,s=r);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var a=t.name;p[a]=t,s=a}return!n&&s&&(m=s),s||!n&&m},v=function(e,t){if(E(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new g(i)},f={s:d,z:function(e){var t=-e.utcOffset(),i=Math.abs(t);return(t<=0?"+":"-")+d(Math.floor(i/60),2,"0")+":"+d(i%60,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var n=12*(i.year()-t.year())+(i.month()-t.month()),s=t.clone().add(n,r),o=i-s<0,a=t.clone().add(n+(o?-1:1),r);return+(-(n+(i-s)/(o?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(h){return({M:r,y:a,w:s,d:"day",D:l,h:n,m:i,s:t,ms:e,Q:o})[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};f.l=_,f.i=E,f.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var g=function(){function d(e){this.$L=_(e.locale,null,!0),this.parse(e)}var m=d.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(f.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n){var s=n[2]-1||0,r=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return f},m.isValid=function(){return this.$d.toString()!==h},m.isSame=function(e,t){var i=v(e);return this.startOf(t)<=i&&i<=this.endOf(t)},m.isAfter=function(e,t){return v(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<v(e)},m.$g=function(e,t,i){return f.u(e)?this[t]:this.set(i,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,o){var h=this,c=!!f.u(o)||o,u=f.p(e),d=function(e,t){var i=f.w(h.$u?Date.UTC(h.$y,t,e):new Date(h.$y,t,e),h);return c?i:i.endOf("day")},m=function(e,t){return f.w(h.toDate()[e].apply(h.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),h)},p=this.$W,E=this.$M,_=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case a:return c?d(1,0):d(31,11);case r:return c?d(1,E):d(0,E+1);case s:var g=this.$locale().weekStart||0,y=(p<g?p+7:p)-g;return d(c?_-y:_+(6-y),E);case"day":case l:return m(v+"Hours",0);case n:return m(v+"Minutes",1);case i:return m(v+"Seconds",2);case t:return m(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(s,o){var h,c=f.p(s),u="set"+(this.$u?"UTC":""),d=((h={}).day=u+"Date",h[l]=u+"Date",h[r]=u+"Month",h[a]=u+"FullYear",h[n]=u+"Hours",h[i]=u+"Minutes",h[t]=u+"Seconds",h[e]=u+"Milliseconds",h)[c],m="day"===c?this.$D+(o-this.$W):o;if(c===r||c===a){var p=this.clone().set(l,1);p.$d[d](m),p.init(),this.$d=p.set(l,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d](m);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[f.p(e)]()},m.add=function(e,o){var l,h=this;e=Number(e);var c=f.p(o),u=function(t){var i=v(h);return f.w(i.date(i.date()+Math.round(t*e)),h)};if(c===r)return this.set(r,this.$M+e);if(c===a)return this.set(a,this.$y+e);if("day"===c)return u(1);if(c===s)return u(7);var d=((l={})[i]=6e4,l[n]=36e5,l[t]=1e3,l)[c]||1,m=this.$d.getTime()+e*d;return f.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return i.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=f.z(this),r=this.$H,o=this.$m,a=this.$M,l=i.weekdays,c=i.months,d=i.meridiem,m=function(e,i,s,r){return e&&(e[i]||e(t,n))||s[i].slice(0,r)},p=function(e){return f.s(r%12||12,e,"0")},E=d||function(e,t,i){var n=e<12?"AM":"PM";return i?n.toLowerCase():n};return n.replace(u,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return f.s(t.$y,4,"0");case"M":return a+1;case"MM":return f.s(a+1,2,"0");case"MMM":return m(i.monthsShort,a,c,3);case"MMMM":return m(c,a);case"D":return t.$D;case"DD":return f.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return m(i.weekdaysMin,t.$W,l,2);case"ddd":return m(i.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(r);case"HH":return f.s(r,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return E(r,o,!0);case"A":return E(r,o,!1);case"m":return String(o);case"mm":return f.s(o,2,"0");case"s":return String(t.$s);case"ss":return f.s(t.$s,2,"0");case"SSS":return f.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},m.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},m.diff=function(e,l,h){var c,u=this,d=f.p(l),m=v(e),p=(m.utcOffset()-this.utcOffset())*6e4,E=this-m,_=function(){return f.m(u,m)};switch(d){case a:c=_()/12;break;case r:c=_();break;case o:c=_()/3;break;case s:c=(E-p)/6048e5;break;case"day":c=(E-p)/864e5;break;case n:c=E/36e5;break;case i:c=E/6e4;break;case t:c=E/1e3;break;default:c=E}return h?c:f.a(c)},m.daysInMonth=function(){return this.endOf(r).$D},m.$locale=function(){return p[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),n=_(e,t,!0);return n&&(i.$L=n),i},m.clone=function(){return f.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},d}(),y=g.prototype;return v.prototype=y,[["$ms",e],["$s",t],["$m",i],["$H",n],["$W","day"],["$M",r],["$y",a],["$D",l]].forEach(function(e){y[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,g,v),e.$i=!0),v},v.locale=_,v.isDayjs=E,v.unix=function(e){return v(1e3*e)},v.en=p[m],v.Ls=p,v.p={},v},e.exports=t()},10285:function(e){var t;t=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,n=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,r={},o=function(e){return(e=+e)+(e>68?1900:2e3)},a=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),i=60*t[1]+(+t[2]||0);return 0===i?0:"+"===t[0]?-i:i}(e)}],h=function(e){var t=r[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var i,n=r.meridiem;if(n){for(var s=1;s<=24;s+=1)if(e.indexOf(n(s,0,t))>-1){i=s>12;break}}else i=e===(t?"pm":"PM");return i},u={A:[s,function(e){this.afternoon=c(e,!1)}],a:[s,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[i,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,a("seconds")],ss:[n,a("seconds")],m:[n,a("minutes")],mm:[n,a("minutes")],H:[n,a("hours")],h:[n,a("hours")],HH:[n,a("hours")],hh:[n,a("hours")],D:[n,a("day")],DD:[i,a("day")],Do:[s,function(e){var t=r.ordinal,i=e.match(/\d+/);if(this.day=i[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,a("month")],MM:[i,a("month")],MMM:[s,function(e){var t=h("months"),i=(h("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(i<1)throw Error();this.month=i%12||i}],MMMM:[s,function(e){var t=h("months").indexOf(e)+1;if(t<1)throw Error();this.month=t%12||t}],Y:[/[+-]?\d+/,a("year")],YY:[i,function(e){this.year=o(e)}],YYYY:[/\d{4}/,a("year")],Z:l,ZZ:l};return function(i,n,s){s.p.customParseFormat=!0,i&&i.parseTwoDigitYear&&(o=i.parseTwoDigitYear);var a=n.prototype,l=a.parse;a.parse=function(i){var n=i.date,o=i.utc,a=i.args;this.$u=o;var h=a[1];if("string"==typeof h){var c=!0===a[2],d=!0===a[3],m=a[2];d&&(m=a[2]),r=this.$locale(),!c&&m&&(r=s.Ls[m]),this.$d=function(i,n,s){try{if(["x","X"].indexOf(n)>-1)return new Date(("X"===n?1e3:1)*i);var o=(function(i){var n,s;n=i,s=r&&r.formats;for(var o=(i=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,i,n){var r=n&&n.toUpperCase();return i||s[n]||e[n]||s[r].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,i){return t||i.slice(1)})})).match(t),a=o.length,l=0;l<a;l+=1){var h=o[l],c=u[h],d=c&&c[0],m=c&&c[1];o[l]=m?{regex:d,parser:m}:h.replace(/^\[|\]$/g,"")}return function(e){for(var t={},i=0,n=0;i<a;i+=1){var s=o[i];if("string"==typeof s)n+=s.length;else{var r=s.regex,l=s.parser,h=e.slice(n),c=r.exec(h)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var i=e.hours;t?i<12&&(e.hours+=12):12===i&&(e.hours=0),delete e.afternoon}}(t),t}})(n)(i),a=o.year,l=o.month,h=o.day,c=o.hours,d=o.minutes,m=o.seconds,p=o.milliseconds,E=o.zone,_=new Date,v=h||(a||l?1:_.getDate()),f=a||_.getFullYear(),g=0;a&&!l||(g=l>0?l-1:_.getMonth());var y=c||0,S=d||0,b=m||0,T=p||0;return E?new Date(Date.UTC(f,g,v,y,S,b,T+60*E.offset*1e3)):s?new Date(Date.UTC(f,g,v,y,S,b,T)):new Date(f,g,v,y,S,b,T)}catch(e){return new Date("")}}(n,h,o),this.init(),m&&!0!==m&&(this.$L=this.locale(m).$L),(c||d)&&n!=this.format(h)&&(this.$d=new Date("")),r={}}else if(h instanceof Array)for(var p=h.length,E=1;E<=p;E+=1){a[1]=h[E-1];var _=s.apply(this,a);if(_.isValid()){this.$d=_.$d,this.$L=_.$L,this.init();break}E===p&&(this.$d=new Date(""))}else l.call(this,i)}}},e.exports=t()},96036:function(e){var t;t=function(){return function(e,t,i){var n=t.prototype,s=function(e){return e&&(e.indexOf?e:e.s)},r=function(e,t,i,n,r){var o=e.name?e:e.$locale(),a=s(o[t]),l=s(o[i]),h=a||l.map(function(e){return e.slice(0,n)});if(!r)return h;var c=o.weekStart;return h.map(function(e,t){return h[(t+(c||0))%7]})},o=function(){return i.Ls[i.locale()]},a=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,i){return t||i.slice(1)})},l=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):r(e,"months")},monthsShort:function(t){return t?t.format("MMM"):r(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):r(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):r(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):r(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return a(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};n.localeData=function(){return l.bind(this)()},i.localeData=function(){var e=o();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(t){return a(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},i.months=function(){return r(o(),"months")},i.monthsShort=function(){return r(o(),"monthsShort","months",3)},i.weekdays=function(e){return r(o(),"weekdays",null,null,e)},i.weekdaysShort=function(e){return r(o(),"weekdaysShort","weekdays",3,e)},i.weekdaysMin=function(e){return r(o(),"weekdaysMin","weekdays",2,e)}}},e.exports=t()},29387:function(e){var t;t=function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(i,n,s){var r,o=function(e,i,n){void 0===n&&(n={});var s,r,o,a,l=new Date(e);return(void 0===(s=n)&&(s={}),(a=t[o=i+"|"+(r=s.timeZoneName||"short")])||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),t[o]=a),a).formatToParts(l)},a=function(t,i){for(var n=o(t,i),r=[],a=0;a<n.length;a+=1){var l=n[a],h=l.type,c=l.value,u=e[h];u>=0&&(r[u]=parseInt(c,10))}var d=r[3],m=r[0]+"-"+r[1]+"-"+r[2]+" "+(24===d?0:d)+":"+r[4]+":"+r[5]+":000",p=+t;return(s.utc(m).valueOf()-(p-=p%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=r);var i=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),a=Math.round((n-new Date(o))/1e3/60),l=s(o).$set("millisecond",this.$ms).utcOffset(-(15*Math.round(n.getTimezoneOffset()/15))-a,!0);if(t){var h=l.utcOffset();l=l.add(i-h,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||s.tz.guess(),i=o(this.valueOf(),t,{timeZoneName:e}).find(function(e){return"timezonename"===e.type.toLowerCase()});return i&&i.value};var h=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return h.call(this,e,t);var i=s(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return h.call(i,e,t).tz(this.$x.$timezone,!0)},s.tz=function(e,t,i){var n=i&&t,o=i||t||r,l=a(+s(),o);if("string"!=typeof e)return s(e).tz(o);var h=function(e,t,i){var n=e-60*t*1e3,s=a(n,i);if(t===s)return[n,t];var r=a(n-=60*(s-t)*1e3,i);return s===r?[n,s]:[e-60*Math.min(s,r)*1e3,Math.max(s,r)]}(s.utc(e,n).valueOf(),l,o),c=h[0],u=h[1],d=s(c).utcOffset(u);return d.$x.$timezone=o,d},s.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},s.tz.setDefault=function(e){r=e}}},e.exports=t()},70178:function(e){var t;t=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(n,s,r){var o=s.prototype;r.utc=function(e){var t={date:e,utc:!0,args:arguments};return new s(t)},o.utc=function(t){var i=r(this.toDate(),{locale:this.$L,utc:!0});return t?i.add(this.utcOffset(),e):i},o.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var a=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),a.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var h=o.utcOffset;o.utcOffset=function(n,s){var r=this.$utils().u;if(r(n))return this.$u?0:r(this.$offset)?h.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var s=(""+n[0]).match(i)||["-",0,0],r=s[0],o=60*+s[1]+ +s[2];return 0===o?0:"+"===r?o:-o}(n)))return this;var o=16>=Math.abs(n)?60*n:n,a=this;if(s)return a.$offset=o,a.$u=0===n,a;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(o+l,e)).$offset=o,a.$x.$localOffset=l}else a=this.utc();return a};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var u=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var d=o.diff;o.diff=function(e,t,i){if(e&&this.$u===e.$u)return d.call(this,e,t,i);var n=this.local(),s=r(e).local();return d.call(n,s,t,i)}}},e.exports=t()},35666:function(e){var t=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,i){return e[t]=i}}function c(e,i,n,r){var o,a,l=Object.create((i&&i.prototype instanceof _?i:_).prototype);return s(l,"_invoke",{value:(o=new C(r||[]),a=d,function(i,s){if(a===m)throw Error("Generator is already running");if(a===p){if("throw"===i)throw s;return O()}for(o.method=i,o.arg=s;;){var r=o.delegate;if(r){var l=function e(i,n){var s=n.method,r=i.iterator[s];if(t===r)return n.delegate=null,"throw"===s&&i.iterator.return&&(n.method="return",n.arg=t,e(i,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+s+"' method")),E;var o=u(r,i.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,E;var a=o.arg;return a?a.done?(n[i.resultName]=a.value,n.next=i.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,E):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,E)}(r,o);if(l){if(l===E)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===d)throw a=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=m;var h=u(e,n,o);if("normal"===h.type){if(a=o.done?p:"suspendedYield",h.arg===E)continue;return{value:h.arg,done:o.done}}"throw"===h.type&&(a=p,o.method="throw",o.arg=h.arg)}})}),l}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",m="executing",p="completed",E={};function _(){}function v(){}function f(){}var g={};h(g,o,function(){return this});var y=Object.getPrototypeOf,S=y&&y(y(R([])));S&&S!==i&&n.call(S,o)&&(g=S);var b=f.prototype=_.prototype=Object.create(g);function T(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){var i;s(this,"_invoke",{value:function(s,r){function o(){return new t(function(i,o){!function i(s,r,o,a){var l=u(e[s],e,r);if("throw"===l.type)a(l.arg);else{var h=l.arg,c=h.value;return c&&"object"==typeof c&&n.call(c,"__await")?t.resolve(c.__await).then(function(e){i("next",e,o,a)},function(e){i("throw",e,o,a)}):t.resolve(c).then(function(e){h.value=e,o(h)},function(e){return i("throw",e,o,a)})}}(s,r,i,o)})}return i=i?i.then(o,o):o()}})}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function R(e){if(e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,r=function i(){for(;++s<e.length;)if(n.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=f,s(b,"constructor",{value:f,configurable:!0}),s(f,"constructor",{value:v,configurable:!0}),v.displayName=h(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,h(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,a,function(){return this}),e.AsyncIterator=A,e.async=function(t,i,n,s,r){void 0===r&&(r=Promise);var o=new A(c(t,i,n,s),r);return e.isGeneratorFunction(i)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(b),h(b,l,"Generator"),h(b,o,function(){return this}),h(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=R,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(n,s){return a.type="throw",a.arg=e,i.next=n,s&&(i.method="next",i.arg=t),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),h=n.call(o,"finallyLoc");if(l&&h){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else if(h){if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return(o.type=e,o.arg=t,r)?(this.method="next",this.next=r.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),k(i),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;k(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:R(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},60402:function(e,t,i){e.exports=i(35666)},90874:function(e,t){"use strict";t.Z={PLAYER_ON_CAN_PLAY:1,PLAYER_ON_CAN_PLAY_THROUGH:2,PLAYER_ON_DURATION_CHANGE:3,PLAYER_ON_ENDED:4,PLAYER_ON_ERROR:5,PLAYER_ON_LOADED_DATA:6,PLAYER_ON_LOAD_META_DATA:7,PLAYER_ON_LOAD_START:8,PLAYER_ON_PAUSE:9,PLAYER_ON_PLAY:10,PLAYER_ON_PLAYING:11,PLAYER_ON_PROGRESS:12,PLAYER_ON_RATECHANGE:13,PLAYER_ON_SEEKED:14,PLAYER_ON_SEEKING:15,PLAYER_ON_STALLED:16,PLAYER_ON_TIMEUPDATE:17,PLAYER_ON_VOLUME_CHANGE:18,PLAYER_ON_WAITING:19,PLAYER_ERROR_CONTROLLER_BLOCK:20,PLAYER_ERROR_CONTROLLER_UNBLOCK:21,PLAYER_ON_PREVENT_PLAY_UNBLOCK:22,PLAYER_ON_INIT:23,PLAYER_ON_FULLSCREEN_CHANGE:24,PLAYER_ON_SWIPE_START:25,PLAYER_ON_SWIPE_END:26,PLAYER_ON_SWIPE_PAUSE:27,PLAYER_ON_SWIPE_PAUSE_END:28,PLAYER_ON_SWIPING:29,PLAYER_ON_TOUCH_MOVE_END:30,PLAYER_ON_SWIPE_SEEK:31,PLAYER_ON_SWIPE_SEEK_END:32,PLAYER_ON_CHANGE_ORIENTATION:33,PLAYER_ORIENTATION_SET_FULLSCREEN:34,PLAYER_ON_RESIZE:35,PLAYER_ON_PROGRESS_BAR_MOVE:36,PLAYER_FULLSCREEN_FAILED:37,PLAYER_PLAY:101,PLAYER_PAUSE:102,PLAYER_SET_VOLUME:103,PLAYER_SET_AUTOPLAY:104,PLAYER_SET_SOURCE:105,PLAYER_FALLBACK_SOURCE:106,PLAYER_FALLBACK_SOURCE_FAIL:107,PLAYER_SET_PLAYBACK_RATE:108,PLAYER_BEFORE_SET_SOURCE:109,PLAYER_TOGGLE_FULLSCREEN:110,PLAYER_TOGGLE_LARGEMODE:111,PLAYER_SET_CURRENT_TIME:112,PLAYER_CHANGE_TIMING:113,PLAYER_ON_DECODER_ERROR:114,PLAYER_SET_PREVIEW:115,PLAYER_SET_SLOWMO:116,PLAYER_SET_QUALITY:117,PLAYER_SET_VIDEO_SOURCE:118,PLAYER_PLAY_FAILED:119,PLAYER_PAUSED:120,PLAYER_SET_LEFTY:121,PLAYER_PLAY_AUTOPLAY:122,PLAYER_PLAY_VIDEO_PROMISE_NOT_SUPPORTED:123,PLAYER_PLAY_SUCCESS:124,PLAYER_WIRELESS_CHANGED:125,PLAYER_SET_DOUBLE_TAP_MODE:126,PLAYER_PLAY_FAIL:127,PLAYER_SET_AV1_OPTION:128,PLAYER_MOMENTS_CHANGE_SOURCE:129,PLAYER_MOMENTS_VIDEO_READY_TO_PLAY:130,PLAYER_MOMENTS_PRELOAD_READY:131,PLAYER_MOMENTS_PRELOAD_ERROR:132,PLAYER_MOMENTS_VIDEO_ERROR:133,PLAYER_MOMENTS_VIDEO_FULLY_LOADED:134,PLAYER_MOMENTS_ON_PRELOAD_BUFFER_FILLED:135,PLAYER_MOMENTS_STOP_PRELOAD:136,PLAYER_MOMENTS_PRELOAD_SET_SOURCE:137,MOUSE_CLICK_GLOBAL:201,HELP_MENU_TOGGLE:301,SETTINGS_MENU_TOGGLE:402,SETTINGS_MENU_TOGGLED:403,SETTINGS_RENDER_QUALITY:404,USER_ACTION:501,NO_USER_ACTION:502,USER_ACTION_PAUSE:503,USER_ACTION_UNPAUSE:504,USER_ACTION_BLOCK:505,USER_ACTION_UNBLOCK:506,OVERLAY_MENU_TOGGLE:601,TABS_NUMBER_CHANGED:602,OVERLAY_MENU_TAB_OPEN:603,RELATED_REFRESH_CLICK:604,OVERLAY_ELEMENT_CLICK:605,SOURCE_TYPE_CHANGE:701,SOURCE_AUTO_UPDATE:702,SOURCE_CONTROLLER_ON_READY:703,SOURCE_CONTROLLER_ON_ERROR:704,PAUSE_ACTION_BLOCK:801,PAUSE_ACTION_UNBLOCK:802,SHOW_LOADER:803,FALLBACK_TO_IMAGE:901,PROGRESS_BAR_UPDATE:1001,PROGRESS_BAR_UPDATE_END:1002,PROGRESS_BAR_RESIZE:1003,PROGRESS_BAR_HANDLER_MOVE:1004,PROGRESS_BAR_VISUAL_UPDATE:1005,PLAYER_ERROR_CODE:1101,SHOW_STATUS:1201,CONTROLS_RESET:1301,CONTROLS_PREVIEW_CLICK:1302,CONTROLS_DOWNLOAD_CLICK:1303,CONTROLS_FAVORITE_CLICK:1304,SETTINGS_MENU_OPEN:1305,CONTROLS_FULLSCREEN_CLICK:1306,SHARE_MENU_OPEN:1401,ADS_STARTED:1601,ADS_ENDED:1602,ADS_PLAY:1603,ADS_BLOCK:1604,ADS_RESUME_PLAY:1605,ADS_SKIP:1606,ADS_ALLOW_SKIP:1607,ADS_UNBLOCK_BOTTOM_BANNER:1608,ADS_ON_LINK_CLICK:1609,TOOLTIP_UPDATE:1701,SOURCE_CONTROLLER_READY:1801,HLS_LOADED:1802,DASH_LOADED:1803,QUALITY_LIST_OPEN:1901,VR_CONTROLS_LIST_OPEN:1902,PLAYBACK_RATE_LIST_TOGGLE:1903,SUBTITLES_LIST_TOGGLE:1904,VR_CONTROLS_SET:2001,VR_CONTROLS_ADDED:2002,VR_CONTROLS_CHANGED:2003,VR_CONTROLS_MOVED:2004,VR_TRY_TOGGLE:2005,VR_ANIMATE_STOP:2006,VR_ANIMATE_START:2007,VR_TEXTURE_CLEAR:2008,VR_ADD_CROSSORIGIN:2009,VR_REMOVE_CROSSORIGIN:2010,VR_MODE_ENABLE:2011,VR_WEBGL_RENDERER_READY:2012,SUBSCRIBE_INIT:2101,SUBSCRIBE_SHOW:2102,SUBSCRIBE_CLICK_LOGO:2103,SUBSCRIBE_CLICK_SUBSCRIBE:2104,SUBSCRIBE_CLICK_UNSUBSCRIBE:2105,HOVER_ELEMENT_CLICK:2201,HOVER_LINK_CLICK:2202,HOVER_LINK_RENDERED:2203,DOWNLOAD_BUTTON_CLICK:2301,LINK_CLICK:2401,BANNER_BOTTOM_SHOW:2501,BANNER_RENDERED:2502,BANNER_BOTTOM_CLICK:2503,BANNER_BOTTOM_HIDE:2504,AFTERSHOT_CLOSE:2601,AFTERSHOT_DESTROY:2602,AFTERSHOT_RENDERED:2603,AFTERSHOT_SEND_UI_CLOSE:2604,REPORT_ISSUE_CLICK:2701,USER_SEEK_SET_CURRENT_TIME:2801,USER_SEEK_SHOW_PREVIEW:2802,USER_SEEK_HIDE_PREVIEW:2803,USER_SEEK_SET_CURRENT_TIME_DOUBLETAP:2804,USER_SEEK_SET_CURRENT_TIME_PROGRESS_BAR:2805,USER_SEEK_SET_CURRENT_TIME_SWIPE:2806,STATISTICS_UI:2900,VIEW_SUCCESS:2901,FULLSCREEN_BUTTON_CLICK:2902,FULLSCREEN_SWIPE:2903,MUTE_CLICK:2904,DOUBLE_TAP:2905,POSTER_CLICK:2906,PLAY_SMALL_BUTTON_CLICK:2907,PLAY_CENTER_BUTTON_CLICK:2908,SWAP_HANDS_BUTTON_CLICK:2909,SPRITE_LOAD:2910,SPRITE_LOAD_SUCCESS:2911,SPRITE_LOAD_ERROR:2912,REMOTE_PLAYER_STATE_CHANGED:3e3,REMOTE_PLAYER_LOADING_START:3001,REMOTE_PLAYER_LOADING_END:3002,REMOTE_PLAYER_BUFFERING:3003,REMOTE_PLAYER_PLAYING:3004,REMOTE_PLAYER_PAUSED:3005,REMOTE_PLAYER_SESSION_START:3006,REMOTE_PLAYER_SESSION_END:3007,REMOTE_PLAYER_USER_REQUEST:3008,REMOTE_PLAYER_CHROMECAST_LOADED:3009,REMOTE_PLAYER_DEVICE_AVAILABLE:3010,PLAYER_LINK_SPONSORED_SHOWN:3100,PLAYER_LINK_SPONSORED_CLICK:3101,SUBTITLES_SHOW:3200,SUBTITLES_HIDE:3201,SUBTITLES_HIDE_BUTTON_CLICK:3202,SUBTITLES_SHOW_BUTTON_CLICK:3203,SUBTITLES_SET_LANG:3204,SUBTITLES_SAVE_LANG:3205,SUBTITLES_SET_DEFAULT_LANG:3206,SUBTITLES_STATE_BY_BUTTON:3207,SUBTITLES_READY:3208,SUBTITLES_LOADED:3209,SUBTITLES_NO_AVAILABLE_TRACKS:3210,SUBTITLES_SHOWN:3211}},88972:function(){window.console||(window.console={log(){},error(){},info(){}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.map||(Array.prototype.map=function(e,t){let i,n,s;if(this==null)throw TypeError(" this is null or not defined");let r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw TypeError(`${e} is not a function`);for(arguments.length>1&&(i=t),n=Array(o),s=0;s<o;){var a,l;s in r&&(a=r[s],l=e.call(i,a,s,r),n[s]=l),s++}return n}),window.requestAnimationFrame||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.mozCancelAnimationFrame||function(e){clearTimeout(e)})},17061:function(e,t,i){var n=i(18698).default;function s(){"use strict";e.exports=s=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,i){return e[t]=i}}function d(e,t,i,n){var s,r,a=Object.create((t&&t.prototype instanceof E?t:E).prototype);return o(a,"_invoke",{value:(s=new k(n||[]),r="suspendedStart",function(t,n){if("executing"===r)throw Error("Generator is already running");if("completed"===r){if("throw"===t)throw n;return{value:void 0,done:!0}}for(s.method=t,s.arg=n;;){var o=s.delegate;if(o){var a=function e(t,i){var n=i.method,s=t.iterator[n];if(void 0===s)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=void 0,e(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=TypeError("The iterator does not provide a '"+n+"' method")),p;var r=m(s,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,p;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,p):o:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,p)}(o,s);if(a){if(a===p)continue;return a}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===r)throw r="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);r="executing";var l=m(e,i,s);if("normal"===l.type){if(r=s.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(r="completed",s.method="throw",s.arg=l.arg)}})}),a}function m(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p={};function E(){}function _(){}function v(){}var f={};u(f,l,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==i&&r.call(y,l)&&(f=y);var S=v.prototype=E.prototype=Object.create(f);function b(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){var i;o(this,"_invoke",{value:function(s,o){function a(){return new t(function(i,a){!function i(s,o,a,l){var h=m(e[s],e,o);if("throw"!==h.type){var c=h.arg,u=c.value;return u&&"object"==n(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){i("next",e,a,l)},function(e){i("throw",e,a,l)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return i("throw",e,a,l)})}l(h.arg)}(s,o,i,a)})}return i=i?i.then(a,a):a()}})}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}throw TypeError(n(e)+" is not iterable")}return _.prototype=v,o(S,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:_,configurable:!0}),_.displayName=u(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},b(T.prototype),u(T.prototype,h,function(){return this}),t.AsyncIterator=T,t.async=function(e,i,n,s,r){void 0===r&&(r=Promise);var o=new T(d(e,i,n,s),r);return t.isGeneratorFunction(i)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(S),u(S,c,"Generator"),u(S,l,function(){return this}),u(S,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return o.type="throw",o.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;L(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:C(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},18698:function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},64687:function(e,t,i){var n=i(17061)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},11010:function(e,t,i){"use strict";function n(e,t,i,n,s,r,o){try{var a=e[r](o),l=a.value}catch(e){i(e);return}a.done?t(l):Promise.resolve(l).then(n,s)}function s(e){return function(){var t=this,i=arguments;return new Promise(function(s,r){var o=e.apply(t,i);function a(e){n(o,s,r,a,l,"next",e)}function l(e){n(o,s,r,a,l,"throw",e)}a(void 0)})}}i.d(t,{_:function(){return s}})},75766:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{j:function(){return n}})},72253:function(e,t,i){"use strict";i.d(t,{_:function(){return s}});var n=i(75766);function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){(0,n.j)(e,t,i[t])})}return e}},14932:function(e,t,i){"use strict";function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i})(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}i.d(t,{_:function(){return n}})}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";let e,t,n,s,r,o,a,l,h,c,u,d,m,p,E;var _,v,f,g,y,S,b,T,A,L,k,C,R,O,P,w,N,I,D,U,M,Y,x,Z,B,G,V,H,F,$,W,K,j,q,Q,z,X,J,ee,et,ei,en,es,er,eo,ea,el,eh,ec,eu,ed,em,ep,eE,e_,ev,ef,eg,ey,eS,eb,eT,eA,eL,ek,eC,eR,eO,eP,ew,eN,eI,eD,eU,eM,eY,ex,eZ,eB,eG,eV,eH,eF,e$,eW,eK,ej,eq,eQ,ez,eX,eJ,e0,e1,e2,e3,e5,e6,e4,e9,e8,e7,te,tt,ti,tn,ts,tr,to,ta,tl,th,tc,tu,td,tm,tp,tE,t_,tv,tf,tg,ty,tS,tb,tT,tA,tL=i(72253),tk=i(93752),tC=i(14932);let tR=e=>e&&"object"==typeof e&&e.constructor===Object,tO=e=>tR(e)&&Object.keys(e).length>0,tP=e=>"string"==typeof e||e instanceof String,tw=e=>tP(e)&&e.length>0,tN=e=>"number"==typeof e&&Number.isFinite(e),tI=e=>tN(e)||tw(e)&&tN(Number(e)),tD=e=>"function"==typeof e,tU=e=>"object"==typeof e&&Array.isArray(e),tM=e=>tU(e)&&e.length>0,tY=e=>void 0===e,tx=e=>{if(!tI(e))return!1;let t=Number(e);return Number.isInteger(t)&&t>0};function tZ(e){var t;let i=(null==e?void 0:e.name)||e,n=null===(t=globalThis.window.document)||void 0===t?void 0:t.cookie.match(RegExp(`(?:^|; )${i.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return n?decodeURIComponent(n[1]):void 0}function tB(e,t,i={}){var n,s,r,o;if(!(null==e?void 0:e.name))throw Error("Cookie is undefined");if(tD(null==e?void 0:e.validate)&&!(null==e?void 0:e.validate(t))&&-1!==i.expires)throw TypeError(`Invalid value "${t}" for cookie "${e.name}"`);let a={path:"/",domain:`.${null===(o=window)||void 0===o?void 0:null===(r=o.location)||void 0===r?void 0:null===(s=r.hostname)||void 0===s?void 0:null===(n=s.split)||void 0===n?void 0:n.call(s,".").slice(-2).join(".")}`,expires:7},l=null==e?void 0:e.name,h=(0,tL._)({},a,i),{expires:c}=h;if(!("expires"in i)&&"ttl"in e&&(c=e.ttl),0!==c){if(c instanceof Date)h.expires=c.toUTCString();else if(tN(c)){let e=new Date;e.setTime(e.getTime()+864e5*c),h.expires=e.toUTCString()}}((null==e?void 0:e.isEssential)||window.initials.acceptedCookies.nonEssential||!(c>0))&&(document.cookie=Object.keys(h).reduce((e,t)=>{let i=h[t],n=function(e){if(!tP(e))throw TypeError("Input must be a string");return e.charAt(0).toLocaleUpperCase()+e.slice(1)}(t);return!1===i?e:!0===i?`${e}; ${n}`:`${e}; ${n}=${i}`},`${l}=${encodeURIComponent(t)}`))}function tG(e){return[-1,1].includes(e)}let tV={photo:"u-p-channels",video:"u-v-channels",story:"u-s-channels",pornstar:"u-c-channels"};(C||(C={})).ID={name:"UID",isEssential:!0},(R||(R={})).Retarget={name:"xhl",ttl:7,isEssential:!0},(O||(O={})).HidePWABanner={name:"hide_pwa_banner",ttl:30},(P||(P={})).searchMirrorsEnabled={name:"search_mirrors_enabled"},(w||(w={})).videoTitlesTranslation={name:"video_titles_translation",isEssential:!0},(g=N||(N={})).DevMain={name:"dev_main"},g.DevPort={name:"dev_port"},g.DevPrId={name:"dev_pr_id"},g.CountryCode={name:"COUNTRY_CODE"},(I||(I={})).XSubscribedChannels={name:"x_subscr_chn"},(y=D||(D={})).Retarget={name:"retarget_p",ttl:30,isEssential:!0},y.Seen={name:(null===(S=globalThis.window.initials)||void 0===S?void 0:S.popunderCookieName)||"popSeen"},(b=U||(U={})).Shown={name:"dyltv-shown",ttl:1,isEssential:!0},b.ShowCounter={name:`${b.Shown.name}-counter`,ttl:365},(T=M||(M={})).History={ttl:30,build:e=>(0,tC._)((0,tL._)({},T.History),{name:`stats_h_v4_${e}`}),isEssential:!0},T.ClickData={name:"stats_cd",isEssential:!0},T.Uid={name:"stats_uid",isEssential:!0},(A=Y||(Y={})).AfterSignup={name:"after_signup_step"},A.AfterEmailVerified={name:"after_email_verify_step"},A.LoginOrigin={name:"login_origin"},(L=x||(x={})).ThumbSizePreference={name:"thumb_less",ttl:30,isEssential:!0,validate:tG},L.VideoPreview={name:"video_preview",ttl:30,isEssential:!0,validate:tG},(k=Z||(Z={})).Message={ttl:30,isEssential:!0,build:e=>(0,tC._)((0,tL._)({},k.Message),{name:`pr-msg-${e}`})},k.MessageClosed={ttl:30,isEssential:!0,build:e=>(0,tC._)((0,tL._)({},k.Message),{name:`pr-msg-closed-${e}`})},(B||(B={})).Filters={name:"x_notifications:filters",ttl:30};let tH=e=>{if(!(e in tV))throw Error("Cookie name is not allowed");return(0,tC._)((0,tL._)({},tH),{name:tV[e]})};(G||(G={})).Filters={name:"x_news:filters:tpl3",ttl:30,isEssential:!0};let tF=e=>(0,tC._)((0,tL._)({},tF),{name:`${e}-contest-announcement-hidden`}),t$={name:"x_preroll",isEssential:!0},tW={name:"x_preroll_shown",isEssential:!0},tK={name:"v3-dst",ttl:30},tj=e=>(0,tC._)((0,tL._)({},tj),{name:`x_${e}`}),tq=e=>{if(!["ca-xhl","ca-xlivesex","ca-xhp","ca-xham"].includes(e))throw Error(`Cookie name ${e} is not allowed`);return(0,tC._)((0,tL._)({},tq),{name:e})},tQ=e=>(0,tC._)((0,tL._)({},tQ),{name:"xhpremium",ttl:e,isEssential:!0}),tz="stats_cd",tX="stats_cp",tJ={},t0=globalThis.window.document&&(null===(V=globalThis.window.document)||void 0===V?void 0:V.location.href).replace(/^https?:\/\/[^/]+/,"").replace(/#.*$/,"").replace(/\?.*$/,"");(function(){try{let e=tZ(M.ClickData);if(void 0===e)return!1;!function(e,t={}){tB(e,"",(0,tC._)((0,tL._)({},t),{expires:-1}))}(M.ClickData,{path:t0});let t=JSON.parse(e);if(!t||"object"!=typeof t)return!1;return tJ=t,!0}catch(e){return!1}})()?function(){try{if(!tJ||void 0===window.sessionStorage)return;sessionStorage.setItem(tX,t0),sessionStorage.setItem(tz,JSON.stringify(tJ))}catch(e){}}():function(){try{if(void 0===window.sessionStorage)return;if(window.sessionStorage.getItem(tX)!==t0){sessionStorage.removeItem(tX),sessionStorage.removeItem(tz);return}let e=window.sessionStorage.getItem(tz);if(null==e)return;let t=JSON.parse(e);if(!t||"object"!=typeof t)return;tJ=t}catch(e){}}(),(H=q||(q={})).Index="index",H.Recent="recent",H.PornRadar="porn-radar",H.AllTime="all-time",H.Geo="geo",H.Newest="newest",H.Pornstar="pornstar",H.Celebrity="celebrity",H.Creator="creator",H.Category="category",H.Channel="channel",H.Tag="tag",H.Person="person",H.Best="best",H.Search="search",H.Video="video",H.User="user",H.Related="related",H.PersonTop="person-top",H.ChannelTop="channel-top",H.Unknown="unknown",(F=Q||(Q={})).Recent="recent",F.PornRadar="porn-radar",F.AllTime="all-time",F.Mono="mono",F.Geo="geo",F.Newest="newest",F.Moments="moments",F.Trending="trending",F.Recommended="recommended",F.Best="best",F.Related="related",F.Relevant="relevant",F.LinkingVertical="linking-vertical",F.LinkingCategories="linking-categories",F.LinkingChannels="linking-channels",F.LinkingPersons="linking-persons",F.LinkingCreators="linking-creators",F.LinkingSearch="linking-search",F.RelatedVideo="related-video",F.RelatedRecommended="related-recommended",F.RelatedChannel="related-channel",F.RelatedPerson="related-person",F.RelatedCreator="related-creator",F.RelatedProducer="related-producer",F.Publisher="publisher",F.Promo="promo",F.Unknown="unknown",($=z||(z={})).Category="category",$.Person="person",$.Tag="tag",$.Channel="channel",$.Unknown="unknown",(W=X||(X={})).Video="video",W.ShowMore="show_more",W.LinkingLink="linking_link",W.LinkingSubscribeBtn="linking_subscribe_btn",W.CategoryMenuLink="category_menu_link",W.ChannelLink="channel_link",W.PornstarLink="pornstar_link",W.VideoLandingLink="video_landing",W.Gallery="gallery",W.Photo="photo",W.Unknown="unknown",(K=J||(J={})).View="view",K.Click="click",K.ViewSuccess="view_success",K.Subscribe="subscribe",K.Unsubscribe="unsubscribe",(j=ee||(ee={}))[j.Unknown=0]="Unknown",j[j.Video=1]="Video",j[j.Moment=2]="Moment";var t1=i(11010);(et=ei||(ei={})).Get="GET",et.Post="POST",et.Put="PUT",et.Patch="PATCH",et.Delete="DELETE",et.Head="HEAD",et.Options="OPTIONS";let t2="stats_tkn",t3=()=>t2 in(window.initials||{})?window.initials[t2]:null,t5=["collector"];function t6(e,t){var i,n,s;let r;return JSON.stringify((s=(0,tL._)({},t&&null!==(n=null===(i=window.initials)||void 0===i?void 0:i.collectorData)&&void 0!==n?n:{},e),r={},Object.keys(s).forEach(e=>{let t;t8(e,"str.")||t8(e,"int.")||t8(e,"float.")?!([void 0,null].includes(t=s[e])||Array.isArray(t)&&1===t.length&&[void 0,null].includes(t[0]))&&("object"!=typeof t||Array.isArray(t))&&(r.custom||(r.custom={}),r.custom[e]=Array.isArray(t)?t:[t]):r[e]=s[e]}),r))}function t4(){return(t4=(0,t1._)(function*(e,t,i=!0){return navigator.sendBeacon?(navigator.sendBeacon(t9(`?log=${e}`),t6(t,i)),Promise.resolve()):fetch(t9(`?log=${e}`),{method:ei.Post,headers:new Headers({"content-type":"application/json"}),credentials:"include",cache:"no-cache",body:t6(t,i)}).catch(e=>console.warn(e))})).apply(this,arguments)}function t9(e=""){if("string"!=typeof e)throw TypeError("path must be a string");let t=window.location.hostname.split(/\./).slice(-2).join("."),[i]=t5;if(t5.length>1){let e=Math.min(Math.floor(Math.random()*t5.length),t5.length-1);i=t5[e]}return function(e){let t=t3();if(!t)return e;let i=`${t2}=${encodeURIComponent(t)}`;return e.includes(i)?e:`${e}${e.includes("?")?"&":"?"}${i}`}(`//${i}.${t}/${e.replace(/^\//,"")}`)}let t8=(e,t)=>e.startsWith(t);function t7(e){return(t7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function it(){}function ii(e){return e()}function is(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(null==e){var s,r=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ie(e,void 0);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ie(e,void 0):void 0}}(e))){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(i);try{for(r.s();!(s=r.n()).done;)(0,s.value)(void 0)}catch(e){r.e(e)}finally{r.f()}return it}var o=e.subscribe.apply(e,i);return o.unsubscribe?function(){return o.unsubscribe()}:o}function ir(e){var t;return is(e,function(e){return t=e})(),t}function io(e){var t=function(e,t){if("object"!==t7(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==t7(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===t7(t)?t:String(t)}function ia(e,t,i){return(t=io(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var il="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ih(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function ic(e){return(ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),ia(this,"_listeners","WeakMap"in il?new WeakMap:void 0),ia(this,"_observer",void 0),ia(this,"options",void 0),this.options=e}return e=[{key:"observe",value:function(e,t){var i=this;return this._listeners.set(e,t),this._getObserver().observe(e,this.options),function(){i._listeners.delete(e),i._observer.unobserve(e)}}},{key:"_getObserver",value:function(){var e,i=this;return null!==(e=this._observer)&&void 0!==e?e:this._observer=new ResizeObserver(function(e){var n,s=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ih(e,void 0);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ih(e,void 0):void 0}}(e))){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(e);try{for(s.s();!(n=s.n()).done;){var r,o=n.value;t.entries.set(o.target,o),null===(r=i._listeners.get(o.target))||void 0===r||r(o)}}catch(e){s.e(e)}finally{s.f()}})}}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,io(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t})().entries="WeakMap"in il?new WeakMap:void 0;function iu(e,t){return(iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}[].concat(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);i(64687);function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}"function"==typeof HTMLElement&&HTMLElement;var im=[];function ip(e,t){return{subscribe:iE(e,t).subscribe}}function iE(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,n=new Set;function s(i){if(((s=e)!=s?i==i:s!==i||s&&"object"===t7(s)||"function"==typeof s)&&(e=i,t)){var s,r,o=!im.length,a=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return id(e,void 0);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?id(e,void 0):void 0}}(e))){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(n);try{for(a.s();!(r=a.n()).done;){var l=r.value;l[1](),im.push(l,e)}}catch(e){a.e(e)}finally{a.f()}if(o){for(var h=0;h<im.length;h+=2)im[h][0](im[h+1]);im.length=0}}}function r(t){s(t(e))}return{set:s,update:r,subscribe:function(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it,l=[o,a];return n.add(l),1===n.size&&(t=i(s,r)||it),o(e),function(){n.delete(l),0===n.size&&t&&(t(),t=null)}}}}let i_={};function iv(){if("storage"in i_)return i_.storage;try{window.localStorage.setItem("check","1"),window.localStorage.getItem("check"),window.localStorage.removeItem("check"),i_.storage=!0}catch(e){i_.storage=!1}return i_.storage}function ig(e){this.listenerMap=[{},{}],e&&this.root(e),this.handle=ig.prototype.handle.bind(this),this._removedListeners=[]}function iy(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function iS(e,t){return this.rootElement===window?t===document||t===document.documentElement||t===window:this.rootElement===t}function ib(e,t){return e===t.id}(en=eh||(eh={})).blank="_blank",en.parent="_parent",en.self="_self",en.top="_top",(es=ec||(ec={})).ExtraSmall="extra-small",es.Small="small",es.Medium="medium",es.Big="big",(er=eu||(eu={})).nofollow="nofollow",er.noreferrer="noreferrer",er.noopener="noopener",er.bookmark="bookmark",er.previous="previous",er.next="next",er.tag="tag",(eo=ed||(ed={})).primary="primary",eo.secondary="secondary",eo.enabled="enabled",eo.disabled="disabled",eo.invert="invert",eo.black="black",eo.white="white",eo.unset="unset",eo.extraBlue="extra-blue",eo.extraGreen="extra-green",eo.extraViolet="extra-violet",(ea=em||(em={})).A="a",ea.Button="button",ea.Div="div",(el=ep||(ep={})).a="a",el.button="button",el.div="div",(eE=eG||(eG={})).Female="female",eE.Male="male",eE.Transgender="transgender",(e_=eV||(eV={})).VR="vr",e_.HD="hd",e_.value4k="4k",(ev=eH||(eH={})).Safe="safe",ev.Porn="porn",(ef=eF||(eF={})).Photo="photo",ef.Video="video",ef.Comment="comment",ef.Profile="profile",ef.Image="image",(eg=e$||(e$={})).Straight="straight",eg.Gay="gay",eg.Shemale="shemale",(ey=eW||(eW={})).Day="light",ey.Night="dark",ey.Device="device",(eS=eK||(eK={})).Any="any",eS.Hd="hd",eS.Vr="vr",eS["4k"]="4k",eS.Moment="moment",eS.Video="video",(eb=ej||(ej={})).Video="video",eb.Moment="moment",(eT=eq||(eq={})).Relevance="relevance",eT.Newest="newest",eT.Views="views",eT.Best="best",eT.Longest="longest",(eA=eQ||(eQ={})).Featured="featured",eA.Recommended="recommended",eA.Added="added",eA.Rated="rated",eA.Viewed="viewed",eA.Commented="commented",(eL=ez||(ez={})).Tag="tag",eL.Category="category",eL.Channel="channel",eL.Person="person",eL.Keyword="keyword",(ek=eX||(eX={})).Pornstar="pornstar",ek.Celeb="celeb",ek.Creator="creator",(eC=eJ||(eJ={})).US="US",eC.AF="AF",eC.AL="AL",eC.AE="AE",eC.DZ="DZ",eC.AS="AS",eC.AD="AD",eC.AO="AO",eC.AI="AI",eC.AQ="AQ",eC.AG="AG",eC.AR="AR",eC.AM="AM",eC.AW="AW",eC.AU="AU",eC.AT="AT",eC.AZ="AZ",eC.BS="BS",eC.BA="BA",eC.GB="GB",eC.BH="BH",eC.BD="BD",eC.BB="BB",eC.BY="BY",eC.BE="BE",eC.BZ="BZ",eC.BJ="BJ",eC.BM="BM",eC.BT="BT",eC.BO="BO",eC.BW="BW",eC.BV="BV",eC.NO="NO",eC.SJ="SJ",eC.BR="BR",eC.BN="BN",eC.BG="BG",eC.BF="BF",eC.BI="BI",eC.KH="KH",eC.CM="CM",eC.CA="CA",eC.CV="CV",eC.KY="KY",eC.CF="CF",eC.TD="TD",eC.CL="CL",eC.CN="CN",eC.CX="CX",eC.CC="CC",eC.CG="CG",eC.CO="CO",eC.KM="KM",eC.CD="CD",eC.CK="CK",eC.CR="CR",eC.CI="CI",eC.HR="HR",eC.CY="CY",eC.CZ="CZ",eC.CU="CU",eC.DK="DK",eC.DJ="DJ",eC.DO="DO",eC.TL="TL",eC.EC="EC",eC.EG="EG",eC.EU="EU",eC.SV="SV",eC.GQ="GQ",eC.ER="ER",eC.EE="EE",eC.ET="ET",eC.FK="FK",eC.FO="FO",eC.FJ="FJ",eC.FI="FI",eC.FR="FR",eC.GF="GF",eC.GP="GP",eC.YT="YT",eC.PM="PM",eC.PF="PF",eC.GA="GA",eC.GM="GM",eC.GE="GE",eC.DE="DE",eC.GH="GH",eC.GI="GI",eC.GR="GR",eC.GL="GL",eC.GD="GD",eC.GU="GU",eC.GT="GT",eC.GG="GG",eC.GN="GN",eC.GW="GW",eC.GY="GY",eC.HT="HT",eC.HN="HN",eC.HK="HK",eC.HU="HU",eC.IS="IS",eC.IN="IN",eC.ID="ID",eC.IR="IR",eC.IQ="IQ",eC.IE="IE",eC.IM="IM",eC.IL="IL",eC.IT="IT",eC.JM="JM",eC.JP="JP",eC.JE="JE",eC.JO="JO",eC.KZ="KZ",eC.KE="KE",eC.KI="KI",eC.KR="KR",eC.KP="KP",eC.KW="KW",eC.KG="KG",eC.LA="LA",eC.LV="LV",eC.LB="LB",eC.LS="LS",eC.LR="LR",eC.LY="LY",eC.LI="LI",eC.LT="LT",eC.LU="LU",eC.MO="MO",eC.MK="MK",eC.MG="MG",eC.MW="MW",eC.MY="MY",eC.MV="MV",eC.ML="ML",eC.MT="MT",eC.MH="MH",eC.MQ="MQ",eC.MR="MR",eC.MU="MU",eC.MX="MX",eC.FM="FM",eC.MD="MD",eC.MC="MC",eC.MN="MN",eC.ME="ME",eC.MS="MS",eC.MA="MA",eC.MZ="MZ",eC.MP="MP",eC.MM="MM",eC.NA="NA",eC.NR="NR",eC.NP="NP",eC.NL="NL",eC.AN="AN",eC.NC="NC",eC.NZ="NZ",eC.NI="NI",eC.NE="NE",eC.NG="NG",eC.NU="NU",eC.NF="NF",eC.OM="OM",eC.PK="PK",eC.PW="PW",eC.PA="PA",eC.PG="PG",eC.PS="PS",eC.PY="PY",eC.PE="PE",eC.PH="PH",eC.PN="PN",eC.PL="PL",eC.PT="PT",eC.PR="PR",eC.QA="QA",eC.RE="RE",eC.RO="RO",eC.RU="RU",eC.RW="RW",eC.SH="SH",eC.LC="LC",eC.SM="SM",eC.SA="SA",eC.SN="SN",eC.RS="RS",eC.SC="SC",eC.SL="SL",eC.SG="SG",eC.SK="SK",eC.SI="SI",eC.SB="SB",eC.SO="SO",eC.ZA="ZA",eC.GS="GS",eC.ES="ES",eC.LK="LK",eC.KN="KN",eC.SR="SR",eC.SZ="SZ",eC.SE="SE",eC.CH="CH",eC.ST="ST",eC.SD="SD",eC.SY="SY",eC.TW="TW",eC.TJ="TJ",eC.TZ="TZ",eC.TH="TH",eC.TG="TG",eC.TK="TK",eC.TO="TO",eC.TN="TN",eC.TR="TR",eC.TC="TC",eC.TT="TT",eC.TM="TM",eC.TV="TV",eC.UG="UG",eC.UA="UA",eC.UY="UY",eC.UZ="UZ",eC.VU="VU",eC.VA="VA",eC.VC="VC",eC.VE="VE",eC.VN="VN",eC.VG="VG",eC.VI="VI",eC.EH="EH",eC.WS="WS",eC.WF="WF",eC.YE="YE",eC.ZM="ZM",eC.ZW="ZW",(eR=e0||(e0={})).Desktop="desktop",eR.Mobile="mobile",eR.Amp="amp",(eO=e1||(e1={})).Desktop="desktop",eO.Mobile="mobile",eO.Tablet="tablet",eO.Console="console",eO.TV="tv",eO.UnknownOther="unknown/other",(eP=e2||(e2={})).enUs="en-us",eP.idId="id-id",eP.csCz="cs-cz",eP.deDe="de-de",eP.esEs="es-es",eP.frFr="fr-fr",eP.itIt="it-it",eP.nlNl="nl-nl",eP.plPl="pl-pl",eP.ptPt="pt-pt",eP.ptBr="pt-br",eP.roRo="ro-ro",eP.svSe="sv-se",eP.viVn="vi-vn",eP.trTr="tr-tr",eP.ruRu="ru-ru",eP.ukUa="uk-ua",eP.hiIn="hi-in",eP.zhCn="zh-cn",eP.jaJp="ja-jp",eP.thTh="th-th",eP.koKr="ko-kr",(ew=e3||(e3={})).Ml="ml",ew.User="user",ew.Admin="admin",(eN=e5||(e5={})).blank="_blank",eN.parent="_parent",eN.self="_self",eN.top="_top",(eI=e6||(e6={})).nofollow="nofollow",eI.noreferrer="noreferrer",eI.noopener="noopener",eI.bookmark="bookmark",eI.previous="previous",eI.next="next",eI.tag="tag",(eD=e4||(e4={})).mainPage="mainPage",eD.mainPageAmp="mainPage-amp",eD.newestPage="newestPage",eD.newestPageAmp="newestPage-amp",eD.bestPage="bestPage",eD.bestPageAmp="bestPage-amp",eD.index="index",eD.recent="recent",eD.pornRadar="porn-radar",eD.allTime="all-time",eD.geo="geo",eD.newest="newest",eD.best="best",eD.pornstarPage="pornstarPage",eD.pornstarPageAmp="pornstarPage-amp",eD.celebrityPage="celebrityPage",eD.amateurPage="amateurPage",eD.categoryPage="categoryPage",eD.categoryPageAmp="categoryPage-amp",eD.channelPage="channelPage",eD.tagPage="tagPage",eD.person="person",eD.pornstar="pornstar",eD.celebrity="celebrity",eD.creator="creator",eD.category="category",eD.channel="channel",eD.tag="tag",eD.allCategories="allCategories",eD.allCategoriesAmp="allCategoriesAmp",eD.allChannels="allChannels",eD.allChannelsAmp="allChannelsAmp",eD.allPornstars="allPornstars",eD.allPornstarsAmp="allPornstarsAmp",eD.allCreators="allCreators",eD.allCreatorsAmp="allCreatorsAmp",eD.allCelebs="allCelebs",eD.allCelebsAmp="allCelebsAmp",eD.allPhotoCategoriesAmp="allPhotoCategoriesAmp",eD.personTop="person-top",eD.channelTop="channel-top",eD.photosPage="photosPage",eD.photosRankingPage="photosRankingPage",eD.photosPageAmp="photosPage-amp",eD.photoPage="photoPage",eD.photoPageAmp="photoPage-amp",eD.videoPage="videoPage",eD.videoPageAmp="videoPage-amp",eD.videoPageGoogle="videoPage-google",eD.embeddedVideo="embedded-video",eD.video="video",eD.related="related",eD.searchResultsPage="searchResultsPage",eD.searchResultsPageAmp="searchResultsPage-amp",eD.search="search",eD.userPage="userPage",eD.modelsProfilePage="modelsProfilePage",eD.user="user",eD.datingPage="datingPage",eD.messagesPage="messagesPage",eD.storyPage="storyPage",eD.storyPageAmp="storyPage-amp",eD.otherPages="otherPages",eD.awardsPage="awardsPage",eD.unknown="unknown",(eU=e9||(e9={})).Footer="footer",eU.Menu="menu",(eM=e8||(e8={})).Video="video",eM.Photo="photo",eM.User="user",(eY=e7||(e7={})).Input="input",eY.File="file",eY.Checkbox="checkbox",eY.Textarea="textarea",eY.Select="select",(ex=te||(te={}))[ex.Deleted=0]="Deleted",ex[ex.WaitForAdmin=1]="WaitForAdmin",ex[ex.Public=2]="Public",ex[ex.NotConverted=3]="NotConverted",ex[ex.Wait=4]="Wait",ex[ex.NotConverted2=5]="NotConverted2",ex[ex.Private=6]="Private",ex[ex.Doutful=7]="Doutful",ex[ex.Converting=8]="Converting",ex[ex.WaitForPublic=9]="WaitForPublic",ex[ex.ErrorConvert=10]="ErrorConvert",ex[ex.DeleteRepost=11]="DeleteRepost",(eZ=tt||(tt={})).StopWords="stop-words",eZ.LinkDetection="link-detection",eZ.PhoneDetection="phone-detection",(eB=ti||(ti={})).High="high",eB.Low="low",ig.prototype.root=function(e){let t;let i=this.listenerMap;if(this.rootElement){for(t in i[1])i[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in i[0])i[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;for(t in this.rootElement=e,i[1])i[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in i[0])i[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},ig.prototype.captureForType=function(e){return -1!==["blur","error","focus","load","resize","scroll"].indexOf(e)},ig.prototype.on=function(e,t,i,n){let s,r,o,a;if(!e)throw TypeError("Invalid event type: "+e);if("function"==typeof t&&(n=i,i=t,t=null),void 0===n&&(n=this.captureForType(e)),"function"!=typeof i)throw TypeError("Handler must be a type of Function");return s=this.rootElement,(r=this.listenerMap[n?1:0])[e]||(s&&s.addEventListener(e,this.handle,n),r[e]=[]),t?/^[a-z]+$/i.test(t)?(a=t,o=iy):/^#[a-z0-9\-_]+$/i.test(t)?(a=t.slice(1),o=ib):(a=t,o=Element.prototype.matches):(a=null,o=iS.bind(this)),r[e].push({selector:t,handler:i,matcher:o,matcherParam:a}),this},ig.prototype.off=function(e,t,i,n){let s,r,o,a,l;if("function"==typeof t&&(n=i,i=t,t=null),void 0===n)return this.off(e,t,i,!0),this.off(e,t,i,!1),this;if(o=this.listenerMap[n?1:0],!e){for(l in o)o.hasOwnProperty(l)&&this.off(l,t,i);return this}if(!(a=o[e])||!a.length)return this;for(s=a.length-1;s>=0;s--)r=a[s],t&&t!==r.selector||i&&i!==r.handler||(this._removedListeners.push(r),a.splice(s,1));return!a.length&&(delete o[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,n)),this},ig.prototype.handle=function(e){let t,i,n,s,r,o;let a=e.type,l=[],h="ftLabsDelegateIgnore";if(!0===e[h])return;switch(3===(r=e.target).nodeType&&(r=r.parentNode),r.correspondingUseElement&&(r=r.correspondingUseElement),n=this.rootElement,e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:l=this.listenerMap[1][a];break;case 2:this.listenerMap[0]&&this.listenerMap[0][a]&&(l=l.concat(this.listenerMap[0][a])),this.listenerMap[1]&&this.listenerMap[1][a]&&(l=l.concat(this.listenerMap[1][a]));break;case 3:l=this.listenerMap[0][a]}let c=[];for(i=l.length;r&&i;){for(t=0;t<i&&(s=l[t]);t++)r.tagName&&["button","input","select","textarea"].indexOf(r.tagName.toLowerCase())>-1&&r.hasAttribute("disabled")?c=[]:s.matcher.call(r,s.matcherParam,r)&&c.push([e,r,s]);if(r===n||(i=l.length,(r=r.parentElement||r.parentNode)instanceof HTMLDocument))break}for(t=0;t<c.length;t++)if(!(this._removedListeners.indexOf(c[t][2])>-1)&&!1===this.fire.apply(this,c[t])){c[t][0][h]=!0,c[t][0].preventDefault(),o=!1;break}return o},ig.prototype.fire=function(e,t,i){return i.handler.call(t,e,t)},ig.prototype.destroy=function(){this.off(),this.root()},globalThis.window.eventManagerId=globalThis.window.eventManagerId||0,globalThis.window.eventManagerId++;let iT=`eid${globalThis.window.eventManagerId}`,iA={},iL=1;function ik(e,t=" "){return"string"==typeof e?e.split(t):Array.isArray(e)?e:e instanceof NodeList||e instanceof HTMLCollection?[...e]:[e]}function iC(e,t,i,n,s,r){if("function"==typeof n&&(r=s,s=n,n=""),t=ik(t),i=ik(i),n=ik(n,","),!t.length||!i.length)return;let o=t.filter(e=>e===document||e===window),a=o.length?t.filter(e=>e!==document&&e!==window):t;i.forEach(t=>{o.forEach(i=>{"on"===e?i.addEventListener(t,s,r):i.removeEventListener(t,s)})}),a.map(e=>{let t,i;return(t=e===window?"window":e.getAttribute(iT))||(t=iL++,e.setAttribute(iT,t)),i=iA[t]||new ig(e),iA[t]||(iA[t]=i),i}).map(o=>i.map(i=>n.map(n=>{var a,l;return o[e].call(o,"clickleft"===i?"click":i,n.trim(),(a=t,l=s,"clickleft"===i&&a[0]===window?function(e,t){e.button&&0!==e.button||e.which&&1!==e.which||l.call(t,e,t)}:l),r)})))}function iR(e,t){(function(e){if(!iO(e=iw(e))&&!iZ(e))throw Error("Argument must be either an HTMLElement or a NodeList/Array of element");return iZ(e)?[e]:Array.prototype.slice.call(e)})(t[0]).forEach(i=>e(i,...Array.prototype.slice.call(t,1,t.length)))}function iO(e){return e instanceof NodeList||e instanceof HTMLCollection||Array.isArray(e)}function iP(e,t,i=[]){t.forEach(t=>e(i[0],t,...Array.prototype.slice.call(i,2,i.length)))}function iw(e){return e===document?document.documentElement:e}function iN(e,t,i){if(e=iw(e),!1===i)return e.style.removeProperty(t);let n="number"==typeof i&&-1==="zoom,opacity,z-index".indexOf(t);return e.style.setProperty(t,n?`${i}px`:i)}function iI(e,t,i){if(iO(e)){if(!tR(t)&&tY(i))throw TypeError("Element lists supported only in write mode");return iR(iI,[e,t,i])}let n=iw(e);if(!n)throw TypeError("Element not specified");if(!t||"string"!=typeof t&&"object"!=typeof t)throw TypeError("Style must be a string or an object");return void 0===i&&"string"==typeof t?n.style[t]||window.getComputedStyle(n).getPropertyValue(t):"string"==typeof t?iN(n,t,i):Object.keys(t).forEach(e=>{iN(n,e,t[e])})}function iD(e,t,i){if(iO(e)){if(!tR(t)&&tY(i))throw TypeError("Element lists supported only in write mode");return iR(iD,[e,t,i])}let n=iw(e);if(!iZ(n))throw TypeError("Element not specified");if(tR(t)&&tY(i))return Object.keys(t).forEach(i=>{iD(e,i,t[i])});if("string"!=typeof t)throw TypeError("Attribute not a string");let s=["checked","disabled","selected","multiple"].includes(t);return(tD(i)&&(i=i(e)),s)?void 0===i?n.hasAttribute(t)||n[t]:void(void 0!==n[t]&&(n[t]=i),i||n.removeAttribute(t)):!1===i?n.removeAttribute(t):void 0===i?n.getAttribute(t):n.setAttribute(t,i)}function iU(e,t){if(iO(e)){iR(iU,[e,t]);return}if(iB(e=iw(e)),-1!==t.indexOf(" ")){iP(iU,t.split(" "),[e]);return}e.classList.contains(t)||e.classList.add(t)}function iM(e,t){if(iO(e)){iR(iM,[e,t]);return}if(iB(e=iw(e)),-1!==t.indexOf(" ")){iP(iM,t.split(" "),[e]);return}e.classList.contains(t)&&e.classList.remove(t)}function iY(e,t,i){var n,s;if(iO(e)){iR(iY,[e,t,i]);return}if(iB(e=iw(e)),!tY(i)){if(i){iU(e,t);return}iM(e,t);return}if(n=e,s=t,iB(n=iw(n)),n.classList.contains(s)){iM(e,t);return}iU(e,t)}function ix(e){var t,i,n,s;if(iO(e)){iR(ix,[e]);return}iB(e=iw(e)),function e(t){if(iO(t))return iR(e,[t]);for(t=iw(t);t.lastChild;)t.removeChild(t.lastChild);return t}(e),e.parentNode&&(iC("off",e,void 0,"",void 0,void 0),e.parentNode.removeChild(e))}function iZ(e){return e instanceof HTMLElement||e instanceof window.SVGElement||e===document}function iB(e){if(!iZ(e))throw TypeError("Element must be passed")}let iG=new Promise(e=>{var t,i,n;if((null===(i=globalThis.window)||void 0===i?void 0:null===(t=i.document)||void 0===t?void 0:t.readyState)==="complete"){e();return}null===(n=globalThis.window.document)||void 0===n||n.addEventListener("DOMContentLoaded",()=>e())});new Promise(e=>{var t;null===(t=globalThis.window.document)||void 0===t||t.addEventListener("asyncLayoutHydrated",e)}),new Promise(e=>{var t;null===(t=globalThis.window.document)||void 0===t||t.addEventListener("xplayerInitiated",e)}),(0,t1._)(function*({store:e,fieldName:t}){let i=()=>{};return new Promise(n=>{i=e.subscribe(e=>{e[t]&&(i(),n())})})}),(0,t1._)(function*({importer:e,chunkName:t}){var i;let n;let[{default:s}]=yield Promise.all([e,(n=window.initials.isRtl?`${t}.rtl.css`:`${t}.css`,i=window.assetsManifest[n],new Promise(e=>{let t=document.head.querySelector(`link[href='${i}']`);if(t){e();return}(t=document.createElement("link")).href=i,t.rel="stylesheet",t.crossorigin="anonymous",document.querySelector("head").appendChild(t),t.onload=()=>{e()}}))]);return s});let iV="object"==typeof self?self:globalThis,iH=(e,t)=>{let i=(t,i)=>(e.set(i,t),t),n=s=>{if(e.has(s))return e.get(s);let[r,o]=t[s];switch(r){case 0:case -1:return i(o,s);case 1:{let e=i([],s);for(let t of o)e.push(n(t));return e}case 2:{let e=i({},s);for(let[t,i]of o)e[n(t)]=n(i);return e}case 3:return i(new Date(o),s);case 4:{let{source:e,flags:t}=o;return i(new RegExp(e,t),s)}case 5:{let e=i(new Map,s);for(let[t,i]of o)e.set(n(t),n(i));return e}case 6:{let e=i(new Set,s);for(let t of o)e.add(n(t));return e}case 7:{let{name:e,message:t}=o;return i(new iV[e](t),s)}case 8:return i(BigInt(o),s);case"BigInt":return i(Object(BigInt(o)),s)}return i(new iV[r](o),s)};return n},iF=e=>iH(new Map,e)(0),{toString:i$}={},{keys:iW}=Object,iK=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let i=i$.call(e).slice(8,-1);switch(i){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return i.includes("Array")?[1,i]:i.includes("Error")?[7,i]:[2,i]},ij=([e,t])=>0===e&&("function"===t||"symbol"===t),iq=(e,t,i,n)=>{let s=(e,t)=>{let s=n.push(e)-1;return i.set(t,s),s},r=n=>{if(i.has(n))return i.get(n);let[o,a]=iK(n);switch(o){case 0:{let t=n;switch(a){case"bigint":o=8,t=n.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+a);t=null;break;case"undefined":return s([-1],n)}return s([o,t],n)}case 1:{if(a)return s([a,[...n]],n);let e=[],t=s([o,e],n);for(let t of n)e.push(r(t));return t}case 2:{if(a)switch(a){case"BigInt":return s([a,n.toString()],n);case"Boolean":case"Number":case"String":return s([a,n.valueOf()],n)}if(t&&"toJSON"in n)return r(n.toJSON());let i=[],l=s([o,i],n);for(let t of iW(n))(e||!ij(iK(n[t])))&&i.push([r(t),r(n[t])]);return l}case 3:return s([o,n.toISOString()],n);case 4:{let{source:e,flags:t}=n;return s([o,{source:e,flags:t}],n)}case 5:{let t=[],i=s([o,t],n);for(let[i,s]of n)(e||!(ij(iK(i))||ij(iK(s))))&&t.push([r(i),r(s)]);return i}case 6:{let t=[],i=s([o,t],n);for(let i of n)(e||!ij(iK(i)))&&t.push(r(i));return i}}let{message:l}=n;return s([o,{name:a,message:l}],n)};return r},iQ=(e,{json:t,lossy:i}={})=>{let n=[];return iq(!(t||i),!!t,new Map,n)(e),n};function iz(e){return JSON.parse(JSON.stringify(e))}function iX(){return!0===globalThis.window.isSSR}"function"==typeof structuredClone||((e,t)=>iF(iQ(e,t)));let iJ="dataLayer";globalThis[iJ]=globalThis[iJ]||[];let i0=null,i1={};function i2(e,t=window[iJ]){if(tO(e))return t.push((0,tL._)({},e))}var i3=i(90874);(tn=ts||(ts={})).Generic="generic",tn.Geo="geo",tn.Thumb="thumb",tn.GeoThumb="geoThumb",tn.Ml="ml",tn.Postitial="postitial";let i5=[];(function(e){function t(e){let t=iX()?null:window.localStorage;null==t||t.removeItem(e)}e.getItem=function(e,t=!1){let i=iX()?null:window.localStorage;try{let n=null==i?void 0:i.getItem(e);if(t)return n;return n?JSON.parse(n):void 0}catch(e){return console.error("Error while receiving value from local storage",e),null}},e.setItem=function(e,t,i=!1){let n=iX()?null:window.localStorage;if(i&&!tP(t)){console.error("invalid raw string passed: ",i);return}try{null==n||n.setItem(e,i&&tP(t)?t:JSON.stringify(t))}catch(e){console.error("Error while setting value in local storage",e)}},e.removeItem=t,e.cleanupUnused=function(){i5.forEach(e=>{t(e)})}})(tr||(tr={})),(to=tl||(tl={})).statsEb="statsEb",to.momentWatchedStats="momentWatchedStats",to.cookiesBannerClosed="cookiesBannerClosed",to.uChannels="uChannels",to.watchHistory="watchHistory",to.crossVerDisabled="crossVerDisabled",to.commentLikes="commentLikes",to.adShareCreated="adShareCreated",to.adSharePerformerCreated="adSharePerformerCreated",to.sidebarUnauthVisited="sidebarUnauthVisited",to.videoAdditionalVerificationSuccessSending="videoAdditionalVerificationSuccessSending",to.xhlMdlClHist="xhl-mdl-cl-hist",to.subscriptionTrigger="subscription_trigger",to.subscriptionTriggerTags="subscription_trigger_tags",to.statsHistoryStraight="stats_h_1",to.statsHistoryGay="stats_h_2",to.statsHistoryShemale="stats_h_3",to.usrStatsLastCollected="usr-stats-last-collected",to.claimed2021="claimed2021",to.dialog="dialog",to.ageVerification="ageVerification",to.messagesSoundDisabled="messagesSoundDisabled",to.alert="alert",to.alertPersist="alertPersist",to.deferredCollectorEvents="deferredCollectorEvents",to.vpnGeoClosed="vpnGeoClosed",to.popHistory="popHistory",to.impressionNumberMainKey="cookieModalImpression",to.impressionNumberCookieNoticeEuKey="cookiesNoticeEuImpression",to.impressionNumberManageCookiesKey="manageCookiesDialogImpression",to.twitter="twitter",to.cookieAnnounceClosed="cookieAnnounceClosed",to.CrossVerificationAdShareCreated="crossVerificationAdShareCreated",to.exp1802SuggestShown="exp1802SuggestShown",to.session="session",to.cache="cache",(ta=th||(th={})).report="report",ta.reportComment="report_commentModel",ta.rating="rating";var i6=i(27484),i4=i(10285),i9=i(96036),i8=i(29387),i7=i(70178);let ne=tZ({name:"NO_TRANSLATE"}),nt=tZ({name:"SHOW_KEYS"});class ni{static translateWithIgnoreError(e,...t){return ni.translateKey(e,...t)}static translate(e,...t){let i=window.xhLocale||{};return!e||e in i||!window.__DEV__||console.error(`Translation for key ${e} not found`),ni.translateKey(e,...t)}static translateKey(e,...t){let i=window.xhLocale||{};if(!e)return"";let n=e;if(!window.initials.isAgeVerified&&`${e}Blurred` in i&&(n=`${e}Blurred`),!(n in i))return this.makeReplacements(n,...t);let s=i[n];if("function"==typeof s&&(s=t&&"object"==typeof t[0]?i[n].apply(this,[t[0]]):i[n].apply(this,t)),nt)return`{${n}}`;let r=this.makeReplacements(s,...t);return ne?"*".repeat(r.length):r}static translateWithoutLog(e,...t){let i=window.xhLocale||{},n=null;return e in i?n=this.makeReplacements(i[e],...t):(i[e]=e,n=this.makeReplacements(e,...t)),n}static makeReplacements(e,...t){let i=`${e}`;return t&&t[0]&&"object"==typeof t[0]?Object.keys(t[0]).forEach(e=>{i=i.replace(RegExp(`\\%{${e}}`,"ig"),`${t[0][e]}`)}):t.forEach((e,t)=>{let n=RegExp(`\\%${t+1}\\$[sd]`,"ig"),s=RegExp("\\%[sd]","i");i=i.match(n)?i.replace(n,`${e}`):i.replace(s,`${e}`)}),i}}ni.translate,ni.translateWithIgnoreError;let nn="jp"===globalThis.window.xhLocaleName?"ja":globalThis.window.xhLocaleName||"en";i6.extend(i7),i6.extend(i8),i6.extend(i9),i6.extend(i4),i6.locale(nn);let ns=e=>tO(e)&&"id"in e&&tx(e.id)&&"ts"in e&&tx(e.ts),nr=[ts.GeoThumb,ts.Thumb,ts.Geo,ts.Generic],no=e=>nr.reduce((t,i)=>{var n;return t+Number(null!==(n=e[i])&&void 0!==n?n:0)},0),na=(e,t)=>{if(!e)return;let i=new Map(t.map(e=>[e.widgetName,e])),n=new Map,s=new Map,r=0,o=e.models.length,a=new Map(e.models.map(e=>[e.id,e]));e.widgetPositions.forEach(t=>{var l;let h;if(!i.has(t.name))return;let c=null!==(l=s.get(t.name))&&void 0!==l?l:0,u=i.get(t.name).count;if(c>=u)return;if(t.modelId&&a.has(t.modelId))h=a.get(t.modelId);else{if(r>=o){console.warn(`not enough models in resp: requested ${r}th in ${e.models.length} elements`);return}h=e.models[r%o],r++}if(!h){console.warn("unexpected model not found");return}let d=n.has(t.name)?n.get(t.name):Array(u).fill(null);d[t.position]=(0,tC._)((0,tL._)({},h),{source:ts.Ml}),n.set(t.name,d),s.set(t.name,c+1)}),Array.from(i).forEach(([t,i])=>{var s;let a=i.count,l=null!==(s=n.get(t))&&void 0!==s?s:Array(a).fill(null);i.fixNonZeroModelOffset&&l.length===i.count+1&&null===l[0]&&(l=l.slice(1));let h=l.map(t=>{if(null===t){let t=e.models[r%o];return r++,t}return t});h.length!==a&&console.warn(`expected ${a}, but got ${h.length} models`),i.callback(h.length>a?h.slice(0,a):h)})},nl=e=>{var t,i;let n=null!==(i=null===(t=e.xhlMlSource)||void 0===t?void 0:t.intervalOverride)&&void 0!==i?i:3e5,s=[];return ip(null,t=>{let i=null,r=performance.now(),o=null,a=()=>{var i,n;let a=encodeURIComponent(JSON.stringify(function(e){let t;let i=(tU(t=tr.getItem(tl.xhlMdlClHist))?t:[]).filter(ns);if(0===i.length)return e;let n={};return tO(null==e?void 0:e.userExtra)&&(n=(0,tL._)({},null==e?void 0:e.userExtra)),n.clickedModels=i.map(e=>({id:e.id,ts:e.ts})),(0,tC._)((0,tL._)({},e),{userExtra:n})}((0,tC._)((0,tL._)({},null===(i=e.xhlMlSource)||void 0===i?void 0:i.payload),{suggestedModels:s}))));fetch(`${e.urls.camsWidgetMl}?body=${a}`).then((n=(0,t1._)(function*(e){o=performance.now();let i=yield e.json();"object"==typeof i.widgetPositions&&null!==i.widgetPositions&&Array.isArray(i.models)&&"object"==typeof i.meta&&null!==i.meta?(t({response:i,timing:Math.round(performance.now()-r)}),s=i.models.map(e=>e.id)):console.error("xhl ml response format error")}),function(e){return n.apply(this,arguments)})).catch(e=>{void 0===o&&(o=performance.now()),console.error("unexpected xhl ml error",e)})};return i=window.setInterval(a,n),a(),()=>{null!==i&&(window.clearInterval(i),i=null)}})},nh=e=>ip({[ts.GeoThumb]:[],[ts.Thumb]:[],[ts.Geo]:[],[ts.Generic]:[]},i=>{function s(){let s=[],r=[],o=[],a=[],{urls:l}=e,h=[];if(l.camsThumbWidget){let e=Object.fromEntries(new URLSearchParams(l.camsThumbWidget.substring(l.camsThumbWidget.indexOf("?"))));h.push(nu(l.camsThumbWidget,!1).then(t=>{r=t.map(t=>nc(t,ts.Thumb,e))}))}if(l.camsThumbWidgetGeo){let e=Object.fromEntries(new URLSearchParams(l.camsThumbWidgetGeo.substring(l.camsThumbWidgetGeo.indexOf("?"))));h.push(nu(l.camsThumbWidgetGeo,!1).then(t=>{s=t.map(t=>nc(t,ts.GeoThumb,e))}))}if(l.camsGeoWidget){let e=Object.fromEntries(new URLSearchParams(l.camsGeoWidget.substring(l.camsGeoWidget.indexOf("?"))));h.push(nu(l.camsGeoWidget,!0).then(t=>{o=t.map(t=>nc(t,ts.Geo,e))}))}let c=l.camsWidget||l.camsWidgetBase||"https://gga.xhamster.com/api/models",u=Object.fromEntries(new URLSearchParams(c.substring(c.indexOf("?"))));return h.push(nu(c).then(e=>{a=e.map(e=>nc(e,ts.Generic,u))})),t=performance.now(),n=void 0,Promise.all(h).then(()=>{n=performance.now();let e=[];r.length&&(e=e.concat(r.map(e=>e.id))),s.length&&(e=e.concat(s.map(e=>e.id))),o.length&&(o=o.filter(({id:t})=>!e.includes(t)),e=e.concat(o.map(e=>e.id))),a=a.filter(({id:t})=>!e.includes(t))}).then(()=>{i({generic:a,geo:o,thumb:r,geoThumb:s})})}s();let r=window.setInterval(s,6e4);return function(){clearTimeout(r)}});function nc(e,t,i){return(0,tC._)((0,tL._)({},e),{source:t,collectorData:{sort:i.sortBy,tags:i.tag}})}function nu(e,t=!0){var i;return fetch(e).then((i=(0,t1._)(function*(e){let i=yield e.json(),n=(null==i?void 0:i.models)||[];return t&&(n=function(e){let t=e.length;for(;t;){let i=Math.floor(Math.random()*t--),n=e[t];e[t]=e[i],e[i]=n}return e}(n)),n}),function(e){return i.apply(this,arguments)})).catch(e=>(console.trace("xhl request has failed",e),[]))}function nd(e,t,i){if(null===t)return[];let n=t.generic,s=n+i;if(s>e.generic.length){let s=i-(e.generic.length-n);return t.generic=s,e.generic.slice(n).concat(e.generic.slice(0,s))}return t.generic=s,e.generic.slice(n,s)}function nm(e,t){if(null===t)return[];let i=t.geo;return e.geo[i]?(t.geo=i+1,[e.geo[i]]):nd(e,t,1)}function np(e,t){if(null===t)return[];let i=t.thumb;return e.thumb[i]?(t.thumb++,[e.thumb[i]]):nd(e,t,1)}function nE(e,t){if(null===t)return[];let i=t.geoThumb;return e.geoThumb[i]?(t.geoThumb++,[e.geoThumb[i]]):np(e,t)}let n_=globalThis.window.initials;globalThis.window.xhlStore?(s=globalThis.window.xhlStore.storeFactory,r=globalThis.window.xhlStore.trackingEnabledStore):(s=tR(null==n_?void 0:n_.xhlMlSource)?(o=null,a=[],l=null,{getStore:(e,t)=>{if(0===Object.keys(t).length)throw Error("at least one count needs to be set");return null===o&&(o=nl(n_)),function(e,t,i){var n=!Array.isArray(e),s=n?[e]:e;if(!s.every(Boolean))throw Error("derived() expects stores as input, got a falsy value");var r=t.length<2;return ip(i,function(e,i){var o=!1,a=[],l=0,h=it,c=function(){if(!l){h();var s=t(n?a[0]:a,e,i);r?e(s):h="function"==typeof s?s:it}},u=s.map(function(e,t){return is(e,function(e){a[t]=e,l&=~(1<<t),o&&c()},function(){l|=1<<t})});return o=!0,c(),function(){(function(e){e.forEach(ii)})(u),h(),o=!1}})}(o,(i,n)=>i?(a.push({callback:n,widgetName:e,count:no(t),fixNonZeroModelOffset:t.fixNonZeroModelOffset}),l||(l=window.setTimeout(()=>{na(i.response,a),l=null},5)),()=>{0===(a=a.filter(t=>e!==t.widgetName)).length&&(null!==l&&(window.clearTimeout(l),l=null),o=null)}):n([]),[])},getTiming:()=>{var e;return o?null===(e=ir(o))||void 0===e?void 0:e.timing:void 0},getHistoryLength:()=>{var e,t,i;return o?null===(i=ir(o))||void 0===i?void 0:null===(t=i.response)||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.historyLength:void 0},getAbortedCount:()=>void 0}):(h=()=>({[ts.GeoThumb]:0,[ts.Thumb]:0,[ts.Geo]:0,[ts.Generic]:0}),c=null,u=[],d=null,m=null,p=e=>e.subscribe(e=>{c=h(),u.forEach(({callback:t,counts:i})=>{let n=[];i.geoThumb&&(n=n.concat(nE(e,c))),i.thumb&&(n=n.concat(np(e,c))),i.geo&&(n=n.concat(nm(e,c))),void 0!==i.generic&&i.generic>0&&(n=n.concat(nd(e,c,i.generic))),t(n)})}),{getStore:(e,t)=>{if(0===Object.keys(t).length)throw Error("at least one count needs to be set");null===d&&(h(),m=p(d=nh(n_)));let i=ir(d),n=[];return t.geoThumb&&(n=n.concat(nE(i,c))),t.thumb&&(n=n.concat(np(i,c))),t.geo&&(n=n.concat(nm(i,c))),void 0!==t.generic&&t.generic>0&&(n=n.concat(nd(i,c,t.generic))),ip(n,i=>(u.push({callback:i,widgetName:e,counts:t}),()=>{0===(u=u.filter(t=>e!==t.widgetName)).length&&(m&&m(),c=null,d=null,m=null)}))},getTiming:function(){if(void 0!==n)return Math.round(n-t)},getHistoryLength:()=>void 0,getAbortedCount:()=>void 0}),r=function(e=!1){let t=iE(e);return t.toggle=()=>t.update(e=>!e),t}(!0),globalThis.window.xhlStore={storeFactory:s,trackingEnabledStore:r});let nv=()=>{var e,t,i,n;let s=(null===(n=window.initials)||void 0===n?void 0:null===(i=n.collectorData)||void 0===i?void 0:null===(t=i.experiments)||void 0===t?void 0:null===(e=t["7023"])||void 0===e?void 0:e.group)==="d",r=window.initials.userId?.02:.04;return{expires:s?.02:r,domain:function(){if(!document.domain.length)return".xhamster.com";let e=document.domain.replace(/^(www\.)/,"").split(".");for(;e.length>2;)e.shift();return e.join(".").replace(/(^\.*)|(\.*$)/g,"")}(),secure:!0,sameSite:"None"}};function nf(){return Number.parseInt(tZ(t$),10)||0}function ng(){return Number.parseInt(tZ(tW),10)||0}function ny(){tB(t$,nf()+1,nv())}let nS=(e=[])=>null==e?void 0:e.some(e=>e);class nb{static get intervals(){return nb.intervalDefinitions||(nb.intervalDefinitions={}),nb.intervalDefinitions}static get timeouts(){return nb.timeoutDefinitions||(nb.timeoutDefinitions={}),nb.timeoutDefinitions}static setTimeout(e,t,i,n=!1){if(!e||"string"!=typeof e)throw TypeError("Timers: setTimeout -> no timeoutName passed or it is not a string");if("number"!=typeof t&&!tI(t=!1===t?0:Number(t)))throw TypeError("Timers: setTimeout -> timeout is not a number or boolean");if("function"!=typeof i)throw TypeError("Timers: setTimeout -> callback is not a function");nb.timeouts[e]&&nb.clearTimeout(e),nb.timeouts[e]=window.setTimeout(()=>{i(),n&&nb.setTimeout(e,t,i,n)},t)}static clearTimeout(e){nb.timeouts[e]&&(window.clearTimeout(nb.timeouts[e]),delete nb.timeouts[e])}static setInterval(e,t,i){if(!e||"string"!=typeof e)throw TypeError("Timers: setInterval -> no intervalName passed or it is not a string");if("number"!=typeof t&&!tI(t=Number(t)))throw TypeError("Timers: setInterval -> interval is not a number");if("function"!=typeof i)throw TypeError("Timers: setInterval -> callback is not a function");nb.intervals[e]&&nb.clearInterval(e),nb.intervals[e]={},nb.intervals[e].delay=t,nb.intervals[e].callback=i,nb.intervals[e].interval=window.setInterval(i,t)}static clearInterval(e){nb.intervals[e]&&(window.clearInterval(nb.intervals[e].interval),delete nb.intervals[e])}static resetInterval(e){nb.intervals[e]&&(window.clearInterval(nb.intervals[e].interval),nb.intervals[e].interval=setInterval(nb.intervals[e].callback,nb.intervals[e].delay))}static pauseInterval(e){nb.intervals[e]&&(window.clearInterval(nb.intervals[e].interval),nb.intervals[e].interval=null)}static resumeInterval(e){nb.intervals[e]&&null===nb.intervals[e].interval&&(nb.intervals[e].interval=setInterval(nb.intervals[e].callback,nb.intervals[e].delay))}}let nT=[];function nA(e,t={},i="write"){nT.push({key:e,data:t,action:i})}nb.setInterval("stats.send.data",1500,function(){var e;let t=nT.slice(0);if(!t.length)return;nT=[];let i=null===(e=window.initials.urls)||void 0===e?void 0:e.proxifiedStatsCollect;if(navigator.sendBeacon){navigator.sendBeacon(i,JSON.stringify(t));return}fetch(i,{method:ei.Post,headers:new Headers({"content-type":"application/json"}),credentials:"include",cache:"no-cache",body:JSON.stringify(t)}).catch(e=>console.warn(e))}),function(e,t,i,n,s=!1){iC("on",e,t,i,void 0,s)}(globalThis.window,"unload",function(){iv()?tr.setItem(tl.deferredCollectorEvents,nT):tB(tK,JSON.stringify(nT))}),function(){let e;if(iv()){let t=tr.getItem(tl.deferredCollectorEvents);e=tM(t)&&t.filter(e=>tO(e)&&"key"in e&&"data"in e&&"action"in e).length===t.length?t:[],tr.removeItem(tl.deferredCollectorEvents)}else e=JSON.parse(tZ(tK)||"false");tM(e)&&e.forEach(e=>{nA(e.key,e.data,e.action)})}(),(tc=tu||(tu={})).AGE_VERIFICATION="age_verification",tc.SHARE="share",tc.DOWNLOAD_VIDEO="download_video",tc.LOGIN_POPUP_SHOWN="login_popup_shown",tc.HOVER_MENU_CLICK="hover_menu_click",(td||(td={})).LOG_USER_STATS="user-stats",(tm=tE||(tE={}))[tm.ML_LINKING=15]="ML_LINKING",tm[tm.ML_RANKING=16]="ML_RANKING",tm[tm.SUGGESTS=18]="SUGGESTS",tm[tm.TAG_SUGGEST=1801]="TAG_SUGGEST",tm[tm.ML_SUGGEST=1802]="ML_SUGGEST",tm[tm.SEARCH_LANG_DETECT=19]="SEARCH_LANG_DETECT",tm[tm.SEARCH_SYNONYM=1902]="SEARCH_SYNONYM",tm[tm.SEARCH_CORRECTION_LANG_DETECT=1903]="SEARCH_CORRECTION_LANG_DETECT",tm[tm.SEARCH_LANG_DETECT_FALLBACK=1905]="SEARCH_LANG_DETECT_FALLBACK",tm[tm.SEARCH_RANKING=1906]="SEARCH_RANKING",tm[tm.SEARCH_CORRECTION_PT_ES=1907]="SEARCH_CORRECTION_PT_ES",tm[tm.SEARCH_FILTERS=1908]="SEARCH_FILTERS",tm[tm.SEARCH_NON_SEMANTICS=1909]="SEARCH_NON_SEMANTICS",tm[tm.VIDEO_RELATED=26]="VIDEO_RELATED",tm[tm.RELATED_ADS_1=2601]="RELATED_ADS_1",tm[tm.TAG_RECOMMEND=27]="TAG_RECOMMEND",tm[tm.ML_RANKING_BEST=2701]="ML_RANKING_BEST",tm[tm.GEO_CHANNELS=2702]="GEO_CHANNELS",tm[tm.TAG_NON_SEMANTICS=2703]="TAG_NON_SEMANTICS",tm[tm.VIDEO_THUMB=29]="VIDEO_THUMB",tm[tm.ANALYTICS_1=3001]="ANALYTICS_1",tm[tm.ANALYTICS_2=3002]="ANALYTICS_2",tm[tm.ANALYTICS_3=3003]="ANALYTICS_3",tm[tm.ANALYTICS_4=3004]="ANALYTICS_4",tm[tm.ANALYTICS_5=3005]="ANALYTICS_5",tm[tm.BIG_THUMBS=33]="BIG_THUMBS",tm[tm.VIDEO_LIST_TITLE=37]="VIDEO_LIST_TITLE",tm[tm.GALLERY_RELATED=41]="GALLERY_RELATED",tm[tm.PREROLL_ERROR_REQUEST=44]="PREROLL_ERROR_REQUEST",tm[tm.VERIFICATION_JUMIO=45]="VERIFICATION_JUMIO",tm[tm.INDEX_RECOMMENDED=50]="INDEX_RECOMMENDED",tm[tm.INDEX_COLD_START=5e3]="INDEX_COLD_START",tm[tm.HUB_INDEX=50]="HUB_INDEX",tm[tm.HUB_INDEX_RECENT=5001]="HUB_INDEX_RECENT",tm[tm.HUB_INDEX_ALL_TIME=5002]="HUB_INDEX_ALL_TIME",tm[tm.HUB_INDEX_TIME_CAPSULE=5005]="HUB_INDEX_TIME_CAPSULE",tm[tm.HUB_INDEX_PORN_RADAR=5006]="HUB_INDEX_PORN_RADAR",tm[tm.HUB_INDEX_LINKING_PERSONS=5007]="HUB_INDEX_LINKING_PERSONS",tm[tm.HUB_INDEX_LINKING_CHANNELS=5008]="HUB_INDEX_LINKING_CHANNELS",tm[tm.HUB_INDEX_YOU_MAY_LIKE=5009]="HUB_INDEX_YOU_MAY_LIKE",tm[tm.HUB_INDEX_NEWEST=5010]="HUB_INDEX_NEWEST",tm[tm.HUB_INDEX_GEO=5011]="HUB_INDEX_GEO",tm[tm.HUB_INDEX_TRENDING=5012]="HUB_INDEX_TRENDING",tm[tm.HUB_INDEX_FH_SPOT=5013]="HUB_INDEX_FH_SPOT",tm[tm.INDEX_RANKING=5101]="INDEX_RANKING",tm[tm.TRAILER=52]="TRAILER",tm[tm.IMPORT_FROM_TUBE=56]="IMPORT_FROM_TUBE",tm[tm.SPONSOR_VIDEO_BANNERS=6001]="SPONSOR_VIDEO_BANNERS",tm[tm.RECOMMENDED_HIDE=668]="RECOMMENDED_HIDE",tm[tm.MOMENTS_ROTATION=6901]="MOMENTS_ROTATION",tm[tm.PLAYER_SWIPE_BY_BACKGROUND=7002]="PLAYER_SWIPE_BY_BACKGROUND",tm[tm.PLAYER_AUTOPLAY=7008]="PLAYER_AUTOPLAY",tm[tm.PLAYER_AV1_TEST=7013]="PLAYER_AV1_TEST",tm[tm.PLAYER_STALLED_FALLBACK=7017]="PLAYER_STALLED_FALLBACK",tm[tm.PLAYER_NON_NATIVE_ANDROID_FULLSCREEN=7018]="PLAYER_NON_NATIVE_ANDROID_FULLSCREEN",tm[tm.AGE_VERIFICATION_IN_NEW_TAB=71]="AGE_VERIFICATION_IN_NEW_TAB",tm[tm.NTV_TS_REFRESH=72]="NTV_TS_REFRESH",tm[tm.UNDER_VIDEO=74]="UNDER_VIDEO",tm[tm.VIDEO_THUMB_MOBILE_SIZE=76]="VIDEO_THUMB_MOBILE_SIZE",tm[tm.FRONT_SPEEDLOAD=7990]="FRONT_SPEEDLOAD",tm[tm.AMP_FULL_FRONT_STATS=7998]="AMP_FULL_FRONT_STATS",tm[tm.PLAYER_LEECHER_COUNT=7999]="PLAYER_LEECHER_COUNT",tm[tm.XHL_VIDEO_ML_SOURCE=8001]="XHL_VIDEO_ML_SOURCE",tm[tm.XHL_TAG_AND_PERSON_ML_SOURCE=8002]="XHL_TAG_AND_PERSON_ML_SOURCE",tm[tm.XHL_INDEX_ML_SOURCE=8003]="XHL_INDEX_ML_SOURCE",tm[tm.LANDING_NEWEST=2100]="LANDING_NEWEST",tm[tm.CHANNELS_SIDEBAR=2200]="CHANNELS_SIDEBAR",(tp=t_||(t_={})).A="a",tp.B="b",tp.C="c",tp.D="d",tp.E="e",tp.F="f",tp.G="g",tp.H="h",tp.I="i",tp.J="j",tp.K="k",tp.L="l",tp.M="m",tp.N="n",tp.O="o",tp.P="p",tp.Q="q",tp.R="r",tp.S="s",tp.T="t",tp.U="u",tp.V="v",tp.W="w",tp.X="x",tp.Y="y",tp.Z="z",tp.A1="a1",tp.B1="b1",tp.C1="c1",tp.D1="d1",tp.E1="e1",tp.F1="f1",tp.G1="g1",tp.H1="h1",tp.I1="i1",tp.J1="j1",tp.K1="k1",tp.L1="l1",tp.M1="m1",tp.N1="n1",tp.O1="o1",tp.P1="p1",tp.Q1="q1",tp.R1="r1",tp.S1="s1",tp.T1="t1",tp.U1="u1",tp.V1="v1",tp.W1="w1",tp.X1="x1",tp.Y1="y1",tp.Z1="z1";let nL=(e,t)=>{e&&window.initials.frontStats&&e.core.once(t.SOURCE_CONTROLLER_READY,()=>{var e,t,i;window.frontSpeedTTP=new Date().getTime()-((null===(i=window)||void 0===i?void 0:null===(t=i.performance)||void 0===t?void 0:null===(e=t.timing)||void 0===e?void 0:e.fetchStart)||0)})};(tv=tg||(tg={})).Ads="xh-widgets-events",tv.Custom="custom",tv.FrontendSpeedload="frontend-speedload",tv.Gdpr="gdpr",tv.Experiment="experiment",tv.Linking="linking",tv.PerformanceMetrics="performance-metrics",tv.PlayerVideoWatch="player_video_watch",tv.PlayerStartWatch="player-start-watch",tv.PlayerFirstWatch="player-first-watch",tv.UnitedImpression="united-impression",tv.PhotoEvents="photo-events",tv.ViewSuccess="view-success",tv.VideoRelated="video-related",tv.DocsVerification="docs-verification",tv.StatsBeta="stats-beta",tv.PageUi="page_ui",tv.XhlWidgetsEvents="xhl-widgets-events",tv.MomentsEvents="moments-events",tv.VerificationStartSession="verification_start_session",tv.VerificationLivenessShown="verification_liveness_shown",tv.VerificationLivenessSuccess="verification_liveness_success",tv.VerificationLivenessFail="verification_liveness_fail",tv.VerificationIdscanFrontSuccess="verification_idscan_front_success",tv.VerificationIdscanFrontFail="verification_idscan_front_fail",tv.VerificationIdscanBackSuccess="verification_idscan_back_success",tv.VerificationIdscanBackFail="verification_idscan_back_fail",tv.VerificationUserConfirm="verification_idscan_user_confirm",tv.VerificationFinished="verification_finished",tv.VerificationDataCollected="verification_data_collected",tv.VerificationRestarted="verification_restarted",(tf=ty||(ty={})).Click="click",tf.Impression="impression",(tS=tb||(tb={})).ReportIssueClick="report_issue_click",tS.ContactUs="contact_us_click",tS.StartSlow="start_slow",tS.RewindSlow="rewind_slow",tS.BufferingSlow="buffering_slow",tS.VideoAudioAsync="video_audio_async",tS.AudioOff="audio_off",tS.VideoNotLoading="video_not_loading",tS.VideoStoppedPlaying="video_stopped_playing",tS.QualityDistortion="quality_distortion",tS.QualityBad="quality_bad",tS.PlayerNotResponding="player_not_responding",tS.PlayerNoControls="player_no_controls",tS.ReportIssueClose="report_issue_close",tS.PlayerInit="player_init",tS.ReportIssueClickFromContent="report_issue_click_from_content";let{preroll:nk,userId:nC}=window.initials,nR=e=>new Promise(t=>{var i;let n=s.getStore(nC?"authpreroll":"unauthpreroll",{generic:1}),r=!1,o=n.subscribe((i=(0,t1._)(function*(i){if(0===i.length)return;if(r){o();return}let n=i[0],s=e;(null==n?void 0:n.username)&&(s=`${e}&modelsList=${encodeURIComponent(n.username)}&usePreroll=2`),t(s),r=!0}),function(e){return i.apply(this,arguments)}))}),nO=(e,t,i=null,n=!1)=>{var s;return i&&(e.ads.vastUrls[0]=i,e.ads.trackCollectorExtra["str.xhlOptimizedModel"]="true",window.prerollXhlOptimizedModel=!0),n&&(e.ads.vastUrls=null==(s=e.ads.vastUrls)?void 0:s.map(e=>{if(!e)return e;let t=document.querySelector('meta[name="keywords"]');if(!t)return e;let i=t.content,n=new URL(e),s=n.searchParams.get("keywords");return s?n.searchParams.set("keywords",`${i},${s}`):n.searchParams.set("keywords",i),n.toString()})),e.ads.trackCollectorExtra.ab=!window._tsNoAdBlock,e},nP=({XPlayerClass:e,HTMLElementId:t,xplayerSettings:i},n)=>{var s,r,o,a,l,h,c,u,d,m,p,E,_,v,f,g,y,S,b,T;let A;(function(e,t=""){return(tP(e=iw(e))&&(t=e,e=document),iB(e),tD(e.querySelector)&&tP(t))?e.querySelector(t):null})(`#${t}`)&&(window.xplayer=new e(t,i,n),document.dispatchEvent(new CustomEvent("xplayerInitiated")),nL(window.xplayer,i3.Z),nk&&function(e){let{isAmp:t}=window.initials;t||(e.core.once(e.events.PLAYER_PLAY,()=>{if(nS(e.ads.options.vastUrls)){!function(e){let{prerollConfig:{maxCount:t=Number.POSITIVE_INFINITY,stateConfig:i}={}}=window.initials;(!i||i.includes(nf()))&&ng()<t||e.core.emit(e.events.ADS_BLOCK)}(e);return}ny()},this),e.core.once(e.events.ADS_ENDED,e=>{var t,i;(e||(null===(i=window)||void 0===i?void 0:null===(t=i.initials)||void 0===t?void 0:t.experiment44)==="b")&&(ny(),tB(tW,ng()+1,nv()))},this))}(window.xplayer),window.PlayStatistics&&new window.PlayStatistics(window.xplayer.core.videoElement,{enabled:!0}),0===Math.floor(1e3*Math.random())&&(s=tb.PlayerInit,A=(0,tC._)((0,tL._)({key:"streaming_report",content:s,id:null===(o=window.initials)||void 0===o?void 0:null===(r=o.videoEntity)||void 0===r?void 0:r.id,video_type:function(e){switch(e){case ej.Video:return ee.Video;case ej.Moment:return ee.Moment;default:return ee.Unknown}}(null===(l=window.initials)||void 0===l?void 0:null===(a=l.videoEntity)||void 0===a?void 0:a.type),site:(null===(h=window.initials)||void 0===h?void 0:h.isDesktopSite)?"desktop":"mobile",uid:null===(c=window.initials)||void 0===c?void 0:c.userId,"str.watchId":null===(u=window.initials)||void 0===u?void 0:u.watchId,"str.cdn":null===(m=window)||void 0===m?void 0:null===(d=m.xplayer)||void 0===d?void 0:d.core.sourceController.getCDN(),"str.has_ads":String(!!(null===(_=window.initials)||void 0===_?void 0:null===(E=_.xplayerPluginSettings)||void 0===E?void 0:null===(p=E.ads)||void 0===p?void 0:p.vastUrls)),"str.player":null===(y=window.initials)||void 0===y?void 0:null===(g=y.xplayerPluginSettings)||void 0===g?void 0:null===(f=g.statistics)||void 0===f?void 0:null===(v=f.addFields)||void 0===v?void 0:v.player},null===(T=window.initials)||void 0===T?void 0:null===(b=T.xplayerPluginSettings)||void 0===b?void 0:null===(S=b.statistics)||void 0===S?void 0:S.addFields),{experiments:null}),function(e,t){t4.apply(this,arguments)}(tg.Custom,A,!1)),window.xplayer.core.on(i3.Z.SHARE_MENU_OPEN,()=>nA(tu.SHARE,"video")))},nw=iz(window.initials.xplayerPluginSettings),{xplayerSettings:nN,prerollConfig:nI}=window.initials;tO(null==nw?void 0:null===(tT=nw.statistics)||void 0===tT?void 0:tT.addFields)&&(nw.statistics.addFields=(0,tL._)({},nw.statistics.addFields,function(){var e;let t;let i=null===(e="blockReferrer",t=tJ&&void 0!==tJ[e]?tJ[e]:null)||!Object.values(q).includes(t.page)||!Object.values(Q).includes(t.block)||tY(t.value)||!(null===t.value||"string"==typeof t.value)?null:t;if(null===i)return{};let n={referrer_page:i.page,referrer_block:i.block};return null!==i.value&&(n.referrer_value=i.value),null!==i.algo&&(n.referrer_block_algo=i.algo),n}())),nw.controlBar.largeMode&&(nw.controlBar.largeMode.enabled=`${document.querySelector("html").className}`.indexOf("video-page--large-mode")>-1),"object"==typeof(null==nw?void 0:null===(tA=nw.banner)||void 0===tA?void 0:tA.bannerHtml)&&(nw.banner.bannerHtml="<div data-role=player-pause></div>"),nN&&"string"==typeof window.location.hash&&/comment-\d+/.test(window.location.hash)&&(Object.assign(tk.Z,{logFlash(){document.querySelector("#player-swf").pause(),window.XPlayer.logFlash=null}}),Object.assign(nN,{userSettings:{override:{autoplay:!1}}}),Object.assign(nw,{keyboard:{noFocus:!0}})),nw&&nw.hover&&nw.hover.link&&(nw.hover.link.onClick=()=>{(function t(i=null,n=null,s=null,r={},o=null){let a={};return tw(i)&&(a.eventCategory=i),tw(n)&&(a.eventAction=n),tw(s)&&(a.eventLabel=s),tO(r)&&(a=(0,tL._)({},a,r)),(function(i=null){let n=i||"GTM-TLDPV3J";return void 0===i1[n]&&(i1[n]=new Promise((i,s)=>{iG.then(()=>{var r;if(window.isGtmTriedToLoad){i();return}window.isGtmTriedToLoad=!0;let{isGtmEnabled:o=!0,gtmSettings:{dimensions:a={},overrides:l={},events:h=[]}={}}=null!==(r=window.initials)&&void 0!==r?r:{gtmSettings:{}};if(i2(function e(t){let i=iz(t);return Object.keys(i).forEach(t=>{tR(i[t])&&(i[t]=e(i[t])),i[t]=`${i[t]}`}),i}(function(e,t){let i={};if(t.theme){let{key:n,defaultValue:s}=t.theme;(!e[n]||e[n]===s)&&window.matchMedia("(prefers-color-scheme)").matches&&(i[n]=window.matchMedia("(prefers-color-scheme: dark)").matches?"device_theme_dark":"device_theme_light")}return(0,tL._)({},e,i)}(a,l))),h.forEach(e=>t(e[0],e[1],e[2],e[3],n)),!o){i();return}let c=document.getElementsByTagName("script")[0];if(!c){s(Error("no script found on the page"));return}let u=document.createElement("script"),d=`https://www.googletagmanager.com/gtm.js?id=${n}`;if(c.src===d){i();return}window[iJ]=window[iJ]||[],window[iJ].push({"gtm.start":new Date().getTime(),event:"gtm.js"}),u.async=!0,u.src=d,u.onload=()=>{null!=i0||(i0=window[iJ].push),window[iJ].push=(0,t1._)(function*(...t){return yield function(...t){return e||(e=tD(window.requestIdleCallback)?window.requestIdleCallback:window.setTimeout),new Promise(i=>{e(()=>i(...t))})}(),i0(...t)}),i()},u.onerror=s,c.parentNode.insertBefore(u,c)})})),i1[n]})(o).then(()=>(function(e,t={},i=window[iJ]){tw(e)&&i2((0,tL._)({event:e},t),i)})("oldEvent",a))})("Paysite","click","red link")}),window.getCollectorUrl=t9;let nD={XPlayerClass:tk.Z,HTMLElementId:"player-container",xplayerSettings:nN};if(null==nw?void 0:nw.ads){let e,t,i;let n=(e=null===(f=window.initials.collectorData)||void 0===f?void 0:null===(v=f.experiments)||void 0===v?void 0:null===(_=v[8004])||void 0===_?void 0:_.group,t=Array.isArray(nw.ads.vastUrls)&&nw.ads.vastUrls[0],i=nw.ads.isXhlPreroll,e===t_.B&&i&&t?t:null);n?new Promise((e,t)=>{if(!n){t();return}let i=setTimeout(()=>{console.error("ml tweak rejected"),t()},1e3);nR(n).then(t=>{clearTimeout(i),e(t)})}).then(e=>{nP(nD,nO(nw,nI,e,!0))}).catch(()=>{nP(nD,nO(nw,nI,"",!0))}):nP(nD,nO(nw,nI,"",!0))}else nP(nD,nw)}()}();